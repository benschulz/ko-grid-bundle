/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
var A;
(function(X){"function"===typeof define&&define.amd?define(["require","knockout"],X):window["ko-grid-bundle"]=X(function(E,C){if(!Array.isArray(E)||1!==E.length||"string"!==typeof E[0]||"function"!==typeof C)throw Error("Assertion error.");var F=window.ko.bindingHandlers.grid.config=window.ko.bindingHandlers.grid.config||{};C(F[E[0]])},window.ko)})(function(X,E){var C,F,G,H,I,J,K,L,ca,da,V,Z,R,W,ea,fa,ga,ha,ia,ja,ka,la,ma;C=function(){var x;x=function(){function w(v,q){return Object.prototype.hasOwnProperty.call(v,q)}
return{Xd:function(v,q){if(v===q)return!0;var f=!!q&&"function"===typeof q.valueOf;return!!v&&"function"===typeof v.valueOf&&f&&v.valueOf()===q.valueOf()},extend:function(v,q){Array.prototype.slice.call(arguments,1).forEach(function(f){for(var r=Object.keys(f),c=0,k=r.length;c<k;c++){var h=r[c],e=Object.getOwnPropertyDescriptor(f,h);void 0!==e&&e.enumerable&&Object.defineProperty(v,h,e)}});return v},Z:function(v,q){for(var f in v)w(v,f)&&q(f,v[f])},w:w,Vc:function(v,q){var f={},r;for(r in v)w(v,r)&&
(f[r]=q(v[r],r,v));return f}}}();return function(w){return w}(function(w,v,q){return{n:w,c:v,Da:q}}(function(w){function v(c){return c.filter(function(k,c,e){return e.lastIndexOf(k)===c})}function q(c,k){for(var h=c.length,e=-1,a=0;a<h;++a)if(k(c[a])){if(0<=e)throw Error("Multiple elements match the predicate.");e=a}return e}function f(c,k){return c&&"function"===typeof c.valueOf&&k&&"function"===typeof k.valueOf?c.valueOf()<=k.valueOf()?c.valueOf()<k.valueOf()?-1:0:1:c<=k?c<k?-1:0:1}function r(c,
k){var h=c.length,e=Array(h),a=Array(h),n;for(n=0;n<h;++n)e[n]=n,a[n]=c[n];n=c;c=a;a=n;e.sort(function(a,n){return k(c[a],c[n])||a-n});for(n=0;n<h;++n)a[n]=c[e[n]];return a}return{contains:function(c,k){return 0<=c.indexOf(k)},Gc:function(c){if(50<c.length){for(var k=c.length,h={},e,a=0;a<k;++a)if(e=c[a],"string"===typeof e)if(w.w(h,e))break;else h[e]=!0;else if(c.lastIndexOf(e)!==a)break;if(!(a>=k)){for(var n=c.slice(0,a);a<k;++a)e=c[a],"string"===typeof e?w.w(h,e)||(h[e]=!0,n.push(e)):c.lastIndexOf(e)===
a&&n.push(e);c=n}}else c=v(c);return c},Tb:function(c,k){return Array.prototype.concat.apply([],c.map(k))},kd:function(c,k){var h=q(c,k);if(0>h)throw Error("None of the elements matches the predicate.");return c[h]},ob:function(c,k){var h=q(c,k);return 0<=h?c[h]:null},pb:function(c,k){var h=k||f;window.chrome?h=r(c,h):(c.sort(h),h=c);return h}}}(x),x,{Ac:function(w){return w.replace(/([A-Z])/g,function(v){return"-"+v.toLowerCase()})},Bc:function(w){return w.replace(/-([a-z])/g,function(v){return v[1].toUpperCase()})},
format:function(w){var v=arguments;return w.replace(/{(\d+)}/g,function(q,f){var r=parseInt(f,10)+1;return typeof v.length<=r?q:v[r]})}}))}();F=function(x){return function(w){return w}(function(w){function v(r){var c={get length(){return this.length},contains:function(k){return 0<=this.Za(k)},filter:function(k){for(var c=this.length,e=[],a=0;a<c;++a){var n=this.get(a);k(n,a,this)&&e.push(n)}return new q(e)},forEach:function(c){for(var h=this.length,e=0;e<h;++e)c(this.get(e),e,this)},get:function(c){return this.get(c)},
map:function(c){for(var h=this.length,e=Array(h),a=0;a<h;++a)e[a]=c(this.get(a),a,this);return new q(e)},readOnly:function(){return new f(this)},reduce:function(c,h){var e=1<arguments.length,a=this.length;if(!e&&0===a)throw new TypeError("An empty list can not be reduced, specify an initial value.");for(var n=e?h:this.get(0),e=e?0:1;e<a;++e)n=c(n,this.get(e));return n},slice:function(c,h){var e=this.length;c=0>=arguments.length?0:0<=c?c:e+c;h=1>=arguments.length?e:0<=h?h:e+h;for(var e=h-c,a=Array(e),
n=0;n<e;++n)a[n]=this.get(c+n);return new q(a)},ra:function(){for(var c=this.length,h=Array(c),e=0;e<c;++e)h[e]=this.get(e);return h},Za:function(c){for(var h=this.length,e=0;e<h;++e)if(this.get(e)===c)return e;return-1}};return w.c.extend(c,{get length(){return this.length},contains:c.contains,filter:c.filter,forEach:c.forEach,get:function(c){return this.get(c)},map:c.map,readOnly:c.readOnly,reduce:c.reduce,slice:c.slice,toArray:c.ra,tryFirstIndexOf:c.Za},r)}function q(f){this.Bb=f}function f(f){this.Ia=
f}q.prototype=v({get length(){return this.Bb.length},get:function(f){return this.Bb[f]},ra:function(){return this.Bb.slice()}});f.prototype=v({get length(){return this.Ia.length},get:function(f){return this.Ia.get(f)}});return{Ua:function(f){return new q(f||[])},Tc:v}}(x))}(C);G=function(x,w){return function(v){return v}(function(v,q){function f(a){if("string"!==typeof a)throw Error("Ids must be strings. (given: `"+a+"`, type: `"+typeof a+"`)");return a}function r(a,n){return v.c.w(a,f(n))?a[n]:-1}
function c(a,n){var c=r(a,n);if(0>c)throw Error("No element with id `"+n+"`.");return c}function k(a,n,c,u,d){if(u>=d)return u;var b=Math.floor((u+d)/2);return 0>n(c,a[b])?k(a,n,c,u,b):k(a,n,c,b+1,d)}function h(a,n,c,u,d){function b(d,b){var g=p.length,l=n.slice(d,b);p=p.concat(l);l.forEach(function(d){c[a(d)]=g;++g})}var p=[],g=0;u.forEach(function(a){b(g,a);g=a;d(p)});b(g,n.length);return p}function e(a){this.K=function(n){return f(a(n))};this.A=[];this.D={};this.O=null}e.prototype=q.Tc({get length(){return this.A.length},
get:function(a){return this.A[a]},Lc:function(a){return this.A[c(this.D,a)]},Le:function(a){a=r(this.D,a);return 0<=a?this.A[a]:null},clear:function(){this.A=[];this.D={}},contains:function(a){a=(0,this.K)(a);return 0<=r(this.D,a)},Pb:function(a){return 0<=r(this.D,a)},removeAll:function(a){this.hd(a.map(this.K))},hd:function(a){if(a.length){var n=this.K,e=this.A,u=this.D;a=a.map(function(d){return c(u,d)+1});a.sort(function(d,b){return d-b});this.A=h(n,e,u,a,function(d){d=d.pop();d=n(d);delete u[d]})}},
ld:function(a){var n=this.K,c=this.A,u=this.D;this.O=a;v.n.pb(c,a);a=!1;for(var d=0;d<c.length;++d){var b=n(c[d]);a=a||u[b]!==d;u[b]=d}return a},ub:function(a){if(this.O)throw Error("`updateAll` must not be called on a sorted `IndexedTable`. Use a combination of order-preserving `tryUpdateAll`, `removeAll` and `insertAll` instead.");if(a.length){var n=this.K,e=this.A,u=this.D;a.forEach(function(d){var b=c(u,n(d));e[b]=d})}},od:function(a){if(!this.O)throw Error("`tryUpdateAll` is designed for sorted `IndexedTable`s. For unsorted ones, use `updateAll` instead.");
if(!a.length)return[];var n=this.K,e=this.A,u=this.D,d=this.O,b=[];a.forEach(function(a){var g=c(u,n(a));0!==d(a,e[g])?b.push(a):e[g]=a});return b},ia:function(a){if(this.O)throw Error("`addAll` must not be called on an sorted `IndexedTable`. Use order-preserving `insertAll` instead.");if(a.length){var c=this.K,e=this.A,u=this.D;a.forEach(function(d){var b=c(d);if(v.c.w(u,b))throw Error("The list already contains an element with id `"+b+"`. Did you mean to call `updateAll`?.");u[b]=e.push(d)-1})}},
Pc:function(a){if(!this.O)throw Error("`insertAll` is designed for sorted `IndexedTable`s. For unsorted ones, use `addAll` instead.");if(a.length){var c=this.K,e=this.A,u=this.D,d=this.O;v.n.pb(a,d);var b=0,p=[];a.forEach(function(a){a=k(e,d,a,b,e.length);p.push(a);b=a});b=0;this.A=h(c,e,u,p,function(d){var p=a[b],m=c(p),D=d.length;d.push(p);u[m]=D;++b})}}});return e}(w,x))}(F,C);H=function(x){var w,v,q;w=function(f){return function(r,c){return f.c.extend(r,{get stringifyable(){return c()}})}}(x);
v=function(f,r){function c(){return 0}function k(a,c){return"string"===typeof a&&"string"===typeof c?a.localeCompare(c):a<=c?a<c?-1:0:1}function h(c,h){f.c.extend(c,{get onResultOf(){return this.ma},get reverse(){return this.reverse},get callable(){return this.Na}},{get ma(){return function(a){return e(a,c)}},get reverse(){return function(){return h||a(c)}},get Na(){return c}})}function e(a,c){function u(d,b){return c(a(d),a(b))}h(u);r(u,function(){return{type:"by-function-comparator","function":a.stringifyable,
comparator:c.stringifyable}});return u}function a(a){function c(u,d){return-a(u,d)}h(c,a);r(c,function(){return{type:"reversed-comparator",comparator:a.stringifyable}});return c}h(k);r(k,function(){return{type:"natural-comparator"}});h(c);r(c,function(){return{type:"indifferent-comparator"}});return{Oc:c,ue:k}}(x,w);q=function(f,r){function c(c){f.c.extend(c,{get callable(){return this.Na}},{get Na(){return c}})}return{ec:function(f){function h(c){return c[f]}c(h);r(h,function(){return{type:"property-accessor",
propertyName:f}});return h}}}(x,w);x=function(f,r){function c(){return!0}function k(){return!1}function h(c,d){f.c.extend(c,{get and(){return this.wa},get negate(){return this.Wc},get onResultOf(){return this.ma},get or(){return this.nb},get callable(){return this.Na}},{get wa(){return function(d){return e([c,d])}},get Wc(){return function(){return d||n(c)}},get ma(){return function(d){return a(d,c)}},get nb(){return function(d){return M([c,d])}},get Na(){return c}})}function e(a){function d(d){for(var p=
0,g=a.length;p<g;++p)if(!a[p](d))return!1;return!0}if(!a.length)return c;h(d);r(d,function(){return{type:"and-predicate",components:a.map(function(d){return d.stringifyable})}});return d}function a(a,d){function b(b){return d(a(b))}h(b);r(b,function(){return{type:"by-function-predicate","function":a.stringifyable,predicate:d.stringifyable}});return b}function n(a){function d(d){return!a(d)}h(d,a);r(d,function(){return{type:"negated-predicate",predicate:a.stringifyable}});return d}function M(a){function d(d){for(var p=
0,g=a.length;p<g;++p)if(a[p](d))return!0;return!1}if(!a.length)return k;h(d);r(d,function(){return{type:"or-predicate",components:a.map(function(d){return d.stringifyable})}});return d}h(k);r(k,function(){return{type:"always-false-predicate"}});h(c);r(c,function(){return{type:"always-true-predicate"}});return{a:k,vc:c,wa:e,je:function(a,d){function b(d){return a(d)}h(b);r(b,d);return b},nb:M,ed:function(a){function d(d){return a.test(d)}h(d);r(d,function(){return{type:"regular-expression-predicate",
regularExpression:a.source,caseSensitive:!a.ignoreCase,multiline:a.multiline}});return d}}}(x,w);return function(f){return f}({Y:v,Aa:q,v:x,Uc:w,Ie:function(f,r){return"function"===typeof r||"object"===typeof r?r.stringifyable||r:r}})}(C);I=function(x,w,v,q,f){var r,c,k,h,e,a,n,M,u;r=function(){function a(d,p,g){this.Ma=d||[];this.$a=p||[];this.Xa=g||[]}a.prototype={get size(){return this.Ma.length+this.$a.length+this.Xa.length},get empty(){return!this.size},oa:function(a){this.empty||a(this)}};return a}();
c={};k=function(a,b,p,g,z){function m(b,l,m){this.fb=b;this.o=l||new p(b.Ja);this.fa=m||a.observable(new g);this.Ib=a.observable(this.o.readOnly());this.ua=null;this.B=a.pureComputed(function(){this.Ib();this.ua||(this.ua=this.o.map(this.G.H));return this.ua}.bind(this));this.B.subscribe(function(){return this.ua=null}.bind(this),null,"asleep")}m.prototype={get Ja(){return this.fb.Ja},get G(){return this.fb.G},get values(){return this.Ib},get aa(){return this.B},hb:function(a){this.ua&&(a.Ma.forEach(this.G.H),
this.ua=this.o.map(this.G.te),a.Xa.forEach(this.G.F));this.Ib.valueHasMutated()},Gb:function(){this.B&&this.o.forEach(this.G.F)},Qa:function(){this.fb.Qa();this.eb()},R:function(a){return new z.vd(this,a)},da:function(a){return new z.Hd(this,a)},xc:function(a,d){return new z.qd(this,a,d)}};return m}(f,q,x,r,c);h=function(a,b,p){function g(a,d,b,l){p.call(this,{Ja:a,G:d},b,l);this.Ga=l.subscribe(function(a){this.hb(a)}.bind(this))}g.prototype=b.c.extend({},p.prototype,{Qa:function(){},dispose:function(){this.Ga.dispose();
this.Gb()}});return g}(f,q,k);(function(a,b,p,g,c){function m(b,l){g.call(this,b);var m=a.observable(a.unwrap(l));this.eb=function(){return m(a.unwrap(l))};this.Fa=a.computed(function(){m();var b=a.unwrap(l);m(b);var t=this.o.ra(),b=this.fb.o.filter(b).ra(),t=new p(b,[],t);this.o.clear();this.o.ia(b);this.hb(t);t.oa(this.fa)}.bind(this));this.Ga=b.fa.subscribe(function(b){var t;t=this.Ja;for(var O=this.o,m=a.unwrap(l),g=b.Ma.filter(m),y=[],c=b.Xa.filter(m),z=0,D=b.$a.length;z<D;z++){var e=b.$a[z],
n=O.Pb(t(e));m(e)?n?y.push(e):g.push(e):n&&c.push(e)}t=new p(g,y,c);t.empty||(this.o.removeAll(t.Xa),this.o.ub(t.$a),this.o.ia(t.Ma),this.hb(b),t.oa(this.fa))}.bind(this))}m.prototype=b.c.extend({},g.prototype,{dispose:function(){this.Fa.dispose();this.Ga.dispose();this.Gb()}});return c.vd=m})(f,q,r,k,c);(function(a,b,p,g){function c(b,g){p.call(this,b);this.o.ia(b.o.ra());var l=a.observable(a.unwrap(g));this.eb=function(){return l(a.unwrap(g))};this.Fa=a.computed(function(){l();var b=a.unwrap(g);
l(b);this.o.ld(b)&&this.fa.valueHasMutated()}.bind(this));this.Ga=b.fa.subscribe(function(a){var d=this.o.od(a.$a);this.o.removeAll(a.Xa.concat(d));this.o.Pc(a.Ma.concat(d));this.hb(a);this.fa.valueHasMutated()}.bind(this))}c.prototype=b.c.extend({},p.prototype,{R:function(){throw Error("Filtering a sorted view is not supported.");},da:function(){throw Error("Sorting a sorted view is not supported.");},dispose:function(){this.Fa.dispose();this.Ga.dispose();this.Gb()}});return g.Hd=c})(f,q,k,c);(function(a,
b,p,g){function c(b,g,l){function y(){return{offset:a.unwrap(g),i:a.unwrap(l)}}var B=b.G;this.Db=b;this.d=a.observable(p.Ua());this.B=null;var t=b.Ja,O=a.observable(y());this.eb=function(){var a=O(),t=y();a.offset===t.offset&&a.i===t.i||O(t)};this.Fa=a.computed(function(){b.fa();O();var a=y();O(a);var d=b.o,l=Math.min(d.length,a.offset),p=Math.min(d.length,l+a.i),a=this.d.peek(),d=d.slice(l,p);a:if(a.length!==d.length)l=!0;else{for(l=a.length-1;0<=l;--l)if(t(a.get(l))!==t(d.get(l))){l=!0;break a}l=
!1}l&&(this.d(d),this.B&&(this.B(this.d.peek().map(B.H)),a.forEach(B.F)))}.bind(this))}c.prototype={get values(){return this.d},get aa(){this.B||(this.B=a.observable(this.values().map(this.Db.G.H)));return this.B},Qa:function(){this.Db.Qa();this.eb()},R:function(){throw Error("Filtering a clipped view is not supported.");},da:function(){throw Error("Sorting a clipped view is not supported.");},xc:function(){throw Error("Clipping a clipped view is not supported.");},dispose:function(){this.Fa.dispose();
this.B&&this.d().forEach(this.Db.G.F)}};return g.qd=c})(f,q,v,c);e={Fd:h};c=function(a){function b(a,d,b){this.k=a;this.a=b?function(a,l){var p=d(l);try{return a(p)}finally{b(p)}}:function(a,b){return a(d(b))}}b.prototype={forEach:function(a){this.k.forEach(this.a.bind(null,a))},map:function(a){return new b(this,a)},reduce:function(a,d){return this.k.reduce(function(d,b){return a(d,this.a(function(a){return a},b))}.bind(this),d)}};var p=b.prototype;a.c.extend(p,{forEach:p.forEach,map:p.map,reduce:p.reduce});
return b}(q);a=function(a,b,p){function g(){return 0}function c(){return!0}function m(a,d){this.m=a;this.a=d}function e(a){this.k=a;this.a=null}function l(a,d,b){this.m=a;this.ke=d;this.le=b;this.Ic=!1;this.I=this.a=this.k=this.Qb=null}function y(a,d,b,l){this.g=a||c;this.l=d||g;this.offset=b||0;this.i=l||0===l?l:Number.POSITIVE_INFINITY;this.ca=Math.max(this.g===c?y.a:y.kc,this.l===g?y.a:y.I,0===this.offset&&this.i===Number.POSITIVE_INFINITY?y.a:y.k)}function B(a,d,b){this.key=a;this.view=d;this.T=
1;this.a=b}m.prototype={Yc:function(a){return new e(this.bc(a))},bc:function(a){return new l(this.m,this.a,a)},md:function(a){return this.ea(a).then(function(a){return new p(a,this.m.H.bind(this.m),this.m.F.bind(this.m))}.bind(this))},na:function(){throw Error("`"+this.constructor+"` does not implement `openView`.");},ea:function(){throw Error("`"+this.constructor+"` does not implement `streamValues`.");},dispose:function(){throw Error("`"+this.constructor+"` does not implement `dispose`.");}};m.prototype=
b.c.extend({},{openEntryView:m.prototype.Yc,openOptionalEntryView:m.prototype.bc,streamObservables:m.prototype.md},m.prototype);e.prototype={get value(){return this.k.value},get observable(){this.a||(this.a=this.k.ba.subscribe(function(){throw Error("Illegal state: A non-optional view for this entry is still open.");}));return this.k.observable},dispose:function(){this.a&&this.a.dispose();this.k.dispose()}};e.prototype=b.c.extend({},{get value(){return this.value},get observable(){return this.observable},
dispose:e.prototype.dispose},e.prototype);l.prototype={xa:function(){if(this.Ic)throw Error("Illegal state: Entry view was already disposed.");},get value(){this.xa();return this.Qb=this.ke(this.le)},get observable(){this.xa();return(this.k||this.ba)&&this.k},get ba(){this.xa();if(this.a)return this.a;var b=this.m.Td(this.value);this.k=b();this.a=a.observable({present:!0,observable:this.k});this.I=b.subscribe(function(a){this.a({present:!!a,observable:a})}.bind(this));return this.a},dispose:function(){this.xa();
this.Ic=!0;this.I&&(this.I.dispose(),this.m.F(this.Qb),this.Qb=this.k=this.a=this.I=null)}};l.prototype=b.c.extend({},{get value(){return this.value},get observable(){return this.observable},get optionalObservable(){return this.ba},dispose:l.prototype.dispose},l.prototype);y.a=0;y.kc=1;y.I=2;y.k=3;y.Kc=function(a){return new y(a.g,a.l,a.offset,a.i)};y.prototype={Pa:function(a){return this.ca===a.ca&&this.g===a.g&&this.l===a.l&&this.offset===a.offset&&this.i===a.i},cd:function(){if(0>=this.ca)throw Error("Unsupported operation.");
var a=[null,this.g,this.l].slice(0,this.ca);return new (y.bind.apply(y,a))},tc:function(){return 0===this.ca?[this]:this.cd().tc().concat([this])},Wd:function(a){var d=[[this.g],[this.l],[this.offset,this.i]][this.ca-1];return(0,[function(a){return a.R},function(a){return a.da},function(a){return a.xc}][this.ca-1])(a).apply(a,d)}};B.prototype={H:function(){if(0>=this.T)throw Error("Assertion error: Reference count at `"+this.T+"`.");++this.T;return this},F:function(){0===--this.T&&this.a();return this}};
m.bb=y;m.jc=B;return m}(f,q,c);n=function(a,b){function p(a){this.Ia=a}p.prototype={forEach:function(a){this.Ia.forEach(a)},map:function(a){return new b(this,a)},reduce:function(a,d){return Promise.resolve(this.Ia.reduce(a,d))}};var c=p.prototype;a.c.extend(c,{forEach:c.forEach,map:c.map,reduce:c.reduce});return p}(q,c);c=function(a){function b(a){this.Ha=!1;(a&&a.observableProperties||[]).forEach(function(a){this.Ha=this.Ha||{};this.Ha[a]=!0}.bind(this))}b.prototype={constructor:function(b){var c=
this.Ha;if(!c)return b;var z={};Object.keys(b).forEach(function(m){z[m]=c&&c[m]?a.observable(b[m]):b[m]});return z},updater:function(a,d){var b=this.Ha;if(!b)return a;Object.keys(d).filter(function(a){return b&&b[a]}).forEach(function(b){return a[b](d[b])});return a},destructor:function(){}};return b}(f);M=function(a,b,c){function g(b){this.observable=b;this.ba=a.observable(b);this.dd=1}return function(a,d){function e(a){if("string"!==typeof a)throw y(a);if(b.c.w(t,a))return t[a];throw Error("No entry for id `"+
a+"`.");}function l(b){var l=a(b);if("string"!==typeof l)throw y(l);Object.prototype.hasOwnProperty.call(t,l)?(l=t[l],++l.dd):(b=new g(d.constructor(b)),l=t[l]=b);return l}function y(a){throw Error("Illegal argument: Ids must be strings ('"+a+"' is of type '"+typeof a+"').");}function B(a){var b=a.observable;a.ba(null);a.observable=null;d.destructor(b)}d=d||new c;var t={};this.H=function(a){return l(a).observable};this.Td=function(a){return l(a).ba};this.F=function(b){b=a(b);var d=e(b);0===--d.dd&&
(B(d),delete t[b])};this.te=function(b){return e(a(b)).observable};this.bd=function(l){l.forEach(function(l){var c=a(l);b.c.w(t,c)&&(c=t[c],c.observable||(c.observable=d.constructor(l),c.ba(c.observable)))})};this.vb=function(l){l.forEach(function(l){var c=a(l);b.c.w(t,c)&&d.updater(t[c].observable,l)})};this.ye=function(a){b.c.Z(t,function(b,l){var t=a(b);t?l.observable?d.updater(l.observable,t):(l.observable=d.constructor(t),l.ba(l.observable)):B(l)})};this.Dc=function(a){b.c.Z(t,function(b,d){a(b)&&
B(d)})};this.dispose=function(){this.Dc(function(){return!0})}.bind(this)}}(f,q,c);w=function(a,b,c){function g(a,b,d,l){this.Od=a;this.O=b;this.Nd=d;this.Md=l}g.prototype=b.c.extend({get predicate(){return this.g},get comparator(){return this.l},get offset(){return this.offset},get limit(){return this.i}},{get g(){return this.Od},get l(){return this.O},get offset(){return this.Nd},get i(){return this.Md},normalize:function(){return new g(this.g||c.v.vc,this.l||c.Y.Oc,this.offset||0,this.i||0===this.i?
this.i:Number.POSITIVE_INFINITY)},fc:function(){return new g(a.unwrap(this.g),a.unwrap(this.l),a.unwrap(this.offset),a.unwrap(this.i))},Pa:function(a){return this.g===a.g&&this.l===a.l&&this.offset===a.offset&&this.i===a.i}});return g}(f,q,w);w=function(a,b){function c(a,d,p){b.call(this,a,d,p)}var g={Wb:function(a){return new b(this.g,this.l,this.offset,a)}};c.prototype=a.c.extend({},b.prototype,g,{limitedTo:g.Wb});return c}(q,w);w=function(a,b){function c(a,d){b.call(this,a,d)}var g={Zb:function(a){return new b(this.g,
this.l,a)}};c.prototype=a.c.extend({},b.prototype,g,{offsetBy:g.Zb});return c}(q,w);w=function(a,b){function c(a){b.call(this,a)}var g={da:function(a){return new b(this.g,a)}};c.prototype=a.c.extend({},b.prototype,g,{sortedBy:g.da});return c}(q,w);w=function(a,b){function c(){b.call(this)}var g={R:function(a){return new b(a)}};c.prototype=a.c.extend({},b.prototype,g,{filteredBy:g.R});return c}(q,w);u=function(a,b){function c(){b.call(this)}c.prototype=a.c.extend({},b.prototype);return c}(q,w);w=function(){function d(a,
b){b=b||new y(a);var d=new l(a);m.call(this,b,function(a){return d.Lc(a)});this.cb=a;this.m=b;this.d=d;this.ta=c.observable(new h);this.s=[];var B=new z.Fd(this.cb,this.m,this.d,this.ta);this.Pd=this.lc(new m.bb,B);this.W=c.pureComputed(function(){return B.values().length})}function b(a,b){this.a=a;this.I=b;this.W=c.pureComputed(function(){return a.values().length});this.k=c.pureComputed(function(){return(g.n.ob(b,function(a){return a.key.ca===m.bb.kc})||b[0]).view.values().length})}var c=f,g=q,z=
e,m=a,h=r,l=x,y=M;d.prototype={get size(){return this.W},lc:function(a,b){var d=new m.jc(a,b,function(){return this.s.splice(this.s.indexOf(d),1)}.bind(this));this.s.push(d);return d},Ld:function(a){var b=g.n.ob(this.s,function(b){return a.Pa(b.key)});if(b)return b.H();var d=a.cd(),b=g.n.kd(this.s,function(a){return d.Pa(a.key)}).view,b=a.Wd(b);return this.lc(a,b)},Sd:function(a){this.d.ia(a);(new h(a)).oa(this.ta);this.m.bd(a)},Ud:function(a){var b=[],d=[];a.forEach(function(a){return(this.d.contains(a)?
d:b).push(a)}.bind(this));this.d.ia(b);this.d.ub(d);(new h(b,d)).oa(this.ta);this.m.bd(b);this.m.vb(d)},na:function(a){a=(a||function(a){return a})(new u);a=m.bb.Kc(a).tc().map(function(a){return this.Ld(a)}.bind(this));var d=a[a.length-1].view;d.Qa();return new b(d,a)},ze:function(a){this.d.removeAll(a);(new h([],[],a)).oa(this.ta);this.m.Dc(function(a){return!this.d.Pb(a)}.bind(this))},Be:function(a){var b=this.d.ra();this.d.clear();this.d.ia(a);(new h(a,[],b)).oa(this.ta);this.m.ye(function(a){return this.d.Le(a)}.bind(this))},
ea:function(a){a=this.na(a);try{return Promise.resolve(new n(a.values.peek().slice()))}finally{a.dispose()}},vb:function(a){this.d.ub(a);(new h([],a)).oa(this.ta);this.m.vb(a)},dispose:function(){this.Pd.F();this.m.dispose();if(this.s.length){var a=this.s.length,b=this.s.reduce(function(a,b){return a+b.T},0);window.console.warn("Some views were not or are not yet disposed ("+a+" views, "+b+" references).")}}};d.prototype=g.c.extend({},m.prototype,{get size(){return this.size},addEntries:d.prototype.Sd,
dispose:d.prototype.dispose,addOrUpdateEntries:d.prototype.Ud,openView:d.prototype.na,removeEntries:d.prototype.ze,replaceEntries:d.prototype.Be,streamValues:d.prototype.ea,updateEntries:d.prototype.vb},d.prototype);var B=c.pureComputed(function(){return!1});b.prototype={get Oa(){return B},get za(){return this.k},get Sa(){return c.pureComputed(function(){return{}})},get aa(){return this.a.aa},get size(){return this.W},get values(){return this.a.values},dispose:function(){this.I.forEach(function(a){a.F()})}};
b.prototype=g.c.extend({get dirty(){return this.Oa},get filteredSize(){return this.za},get metadata(){return this.Sa},get observables(){return this.aa},get size(){return this.size},get values(){return this.values},dispose:b.prototype.dispose},b.prototype);return d}({});k=function(){function d(a,b,d){d=d||new m(a);var t={};e.call(this,d,function(a){if(!n(t,a))throw Error("No known entry with id `"+a+"`.");return t[a].value});this.cb=a;this.m=d;this.oc=b;this.d=t;this.W=c.observable(0);this.Kd=c.pureComputed(function(){return this.W()}.bind(this));
this.s=[]}function b(a,b,d){function t(a){if(a.g!==r||a.l!==M)return!1;for(var b=0,d=D.length;b<d;++b){var c=k[b];if(D[b]<=a.offset&&c>=a.offset+a.i)return!0}return!1}function m(a,b){if(a.g!==r||a.l!==M){var d=a.g,c=a.l;f=[];D=[];k=[];r=d;M=c}var c=d=a.offset,l=d+a.i,t,B,g;B=t=0;for(g=D.length;t<g;++t){var y=D[B]=D[t],p=k[B]=k[t];c<=p&&l>=y?(c=Math.min(y,c),l=Math.max(p,l)):++B}D.length=k.length=B;D.push(c);k.push(l>=z().filteredSize?Number.POSITIVE_INFINITY:l);t=0;for(g=b.length;t<g;++t)f[d+t]=b[t];
window.console.log("Cache ranges:");t=0;for(g=D.length;t<g;++t)window.console.log("["+D[t]+", "+k[t]+"]")}var e=c.observable(!1),n=c.observable(!1),z=c.observable({unfilteredSize:a.size.peek(),filteredSize:0}),h=g.Ua(),u=c.observable(),f=[],D=[],k=[],r=null,M=null,q=c.pureComputed(function(){if(e.peek())return e();var d=b.fc().normalize();if(t(d))return u(f.slice(d.offset,d.offset+d.i));n(!0);e(!0);window.setTimeout(function(){if(!d.Pa(b.fc().normalize()))return e(!1);a.oc.issue(d).then(function(b){var c=
[];b.values.reduce(function(a,b){return c.push(b)});u(c);delete b.values;a.W(b.unfilteredSize);z(b);m(d,c)}).then(function(){n(!1);e(!1)},function(){e(!1)})})}),v=c.pureComputed(function(){q();var b=u(),b=g.Ua(b);w?(w=b.map(function(b){a.mc(b);return a.m.H(b)}),h.forEach(function(b){a.pc(b);a.m.F(b)})):(b.forEach(a.mc.bind(a)),h.forEach(a.pc.bind(a)));return h=b});this.d=v;var w=null;this.B=c.pureComputed(function(){v();w||(w=h.map(a.m.H));return w});this.B.subscribe(function(){return w=null},null,
"asleep");this.k=c.pureComputed(function(){return n()});this.xa=c.pureComputed(function(){return z()});this.a=c.pureComputed(function(){return z().filteredSize});this.W=c.pureComputed(function(){return v().length});this.I=function(){q.dispose();d()}}var c=f,g=v,e=a,m=M,n=q.c.w;d.prototype={get size(){return this.Kd},mc:function(a){var b=this.cb(a);n(this.d,b)?(b=this.d[b],++b.T,b.value=a):this.d[b]={T:1,value:a}},pc:function(a){a=this.cb(a);if(!n(this.d,a))throw Error("Assertion error: Value with id `"+
a+"` was expected to be referenced.");0===--this.d[a].T&&delete this.d[a]},na:function(a){a=(a||function(a){return a})(new u);var d=e.bb.Kc(a),c=q.n.ob(this.s,function(a){return d.Pa(a.key)});if(c)return c.H().view;a=new b(this,a,function(){return t.F()});var t=new e.jc(d,a,function(){return this.s.splice(this.s.indexOf(t),1)}.bind(this));this.s.push(t);return a},ea:function(a){a=(a||function(a){return a})(new u);return this.oc.issue(a.fc().normalize())},dispose:function(){this.m.dispose();if(this.s.length){var a=
this.s.length,b=this.s.reduce(function(a,b){return a+b.T},0);window.console.warn("Some views were not or are not yet disposed ("+a+" views, "+b+" references).")}}};d.prototype=q.c.extend({},e.prototype,{get size(){return this.size},dispose:d.prototype.dispose,openView:d.prototype.na,streamValues:d.prototype.ea},d.prototype);b.prototype={get Oa(){return this.k},get za(){return this.a},get Sa(){return this.xa},get aa(){return this.B},get size(){return this.W},get values(){return this.d},dispose:function(){this.I()}};
b.prototype=q.c.extend({},{get dirty(){return this.Oa},get filteredSize(){return this.za},get metadata(){return this.Sa},get observables(){return this.aa},get size(){return this.size},get values(){return this.values},dispose:b.prototype.dispose},b.prototype);return d}({});return function(a){return a}(function(a,b,c,g,e){return{ClientSideDataSource:a,DefaultObservableStateTransitioner:b,ObservableEntries:c,ServerSideDataSource:g,streams:e}}(w,c,M,k,function(a,b){return{streamArray:function(c){return new b(a.Ua(c))}}}(v,
n)))}(G,H,F,C,E);J=function(){return function(x){return x}(function(){function x(q,f){return!!(q.compareDocumentPosition(f)&16)}var w=window.Element,v=w.prototype.webkitMatchesSelector||w.prototype.mozMatchesSelector||w.prototype.msMatchesSelector||w.prototype.matches;return{Ec:function(q,f){for(var r=0;f;){if(f===q)return r;f=f.parentNode;++r}throw Error("The given node is not part of the subtree.");},Qc:function(q,f){return q===f||x(q,f)},He:x,element:{Ob:function(q,f){do{if(v.call(q,f))return q;
q=q.parentElement}while(q);return null},matches:function(q,f){return v.call(q,f)}}}}())}();K=function(x){var w,v,q;w=function(){function f(c){this.length=function(){return c.length};this.get=function(h){return c[h]}}function r(c){this.length=function(){return c.length()};this.get=function(h){return c.get(h)}}function c(c){this.length=function(){return c.length};this.get=function(h){return c.get(h)}}return{oe:function(k){if(Array.isArray(k))k=f;else a:switch(typeof k.length){case "function":k=r;break a;
case "number":k=c;break a;default:throw Error("Unsupported type: The `forEach` value must be an array or a list with a `length` property or method.");}return k}}}();v=function(f){function r(c){if("function"===typeof c)return c;if("string"===typeof c)return function(e){return e[c]};throw Error("A repeat-binding must specify and indexedBy of type string (property name) or function (custom selector).");}function c(c){f.cleanNode(c);window.setTimeout(function(){f.cleanNode(c)},1);var e=c.cloneNode(!0);
e.removeAttribute("data-bind");"string"===typeof c.getAttribute("data-repeat-bind")&&(e.setAttribute("data-bind",c.getAttribute("data-repeat-bind")),e.removeAttribute("data-repeat-bind"));return e}var k=window.document;return function(h,e){var a=h.getAttribute("data-bind");this.K=r(e.indexedBy);this.re=e.as||"$item";this.ne=e.at||"$index";this.Vd=!1!==e.allowElementRecycling;this.Ee=e.beforeElementRecycling||function(){};this.De=e.afterElementRecycled||function(){};this.uc=!0===e.allowDeviation;this.Ce=
e.onDeviation||function(){};this.Fe=e.onSynchronization||function(){};this.parent=h.parentNode;this.qb=k.createComment("[repeat("+a+")");this.Rb=k.createComment("repeat("+a+")]");this.qe=c(h);this.ge=this.qb}}(x);q=function(){function f(){this.gb=0;this.P={}}f.prototype={add:function(f,c){if(Object.prototype.hasOwnProperty.call(this.P,f))throw Error("Key `"+f+"` is already taken.");++this.gb;this.P[f]=c},get:function(f){return this.P[f]},remove:function(f){if(!Object.prototype.hasOwnProperty.call(this.P,
f))throw Error("No entry for key  `"+f+"` present.");delete this.P[f];--this.gb},clear:function(){this.P={};this.gb=0},get size(){return this.gb},forEach:function(f){for(var c in this.P)Object.prototype.hasOwnProperty.call(this.P,c)&&f(c,this.P[c])}};return f}();q=function(f,r){function c(a,c){this.element=a;this.Yd=c}function k(a,c,e,f){this.index=a;this.item=c;this.id=e;this.$c=f}var h=window.requestAnimationFrame.bind(window),e=window.cancelAnimationFrame.bind(window);return function(a,n){function M(){u((new Date).getTime()+
40)}function u(a){for(;d();)if(++S,(new Date).getTime()>a){O();Y=h(M);return}p()}function d(){if(S<x.length()){var d=S,t=x.get(S),g=d?l(x.get(d-1)):null,e=l(t),p=U.get(e);if(p)if(p.element.style.display="",p.Yd[B](d),d=Q.get(e))Q.remove(e),aa.insertBefore(d,P.nextSibling),P=d;else{for(;p.element!==P.nextSibling;)m(P.nextSibling);P=p.element}else T.push(new k(d,t,e,g))}else if(N)if(T.length)a.Vd&&N.length?(e=N.pop(),p=T.shift(),d=f.contextFor(e),a.Ee(e,d),e.style.display="",z(e,p.$c),d[y](p.item),
d[B](p.index),a.De(e,d),U.add(p.id,new c(e,d))):(e=T.shift(),p=w.cloneNode(!0),d={},d[B]=f.observable(e.index),d[y]=f.observable(e.item),d=n.extend(d),U.add(e.id,new c(p,d)),f.applyBindings(d,p),z(p,e.$c),++ba);else{for(;N.length;)f.removeNode(N.pop());return}else b();return!0}function b(){N=[];for(var a=x.length()-T.length,a=ba-Q.size-a;0<a;--a)m(P.nextSibling);Q.forEach(function(a,b){U.remove(a);N.push(b)});Q.clear()}function p(){for(var a=0;a<N.length;++a)f.removeNode(N[a]);ba=x.length();g();na()}
function g(){S=0;N=Q=T=P=null}function z(a,b){var d=(b?U.get(b).element:q).nextSibling;aa.insertBefore(a,d)}function m(a){Q.add(l(f.contextFor(a)[y]()),a);a.style.display="none";aa.insertBefore(a,v)}function D(){if(Y){e(Y);Y=null;for(var a=0;null!==N&&a<N.length;++a){var b=N[a];U.add(l(f.contextFor(b)[y]()),new c(b,f.contextFor(b)))}g()}}var l=a.K,y=a.re,B=a.ne,t=a.uc,O=a.Ce,na=a.Fe,aa=a.parent,q=a.qb,v=a.Rb,w=a.qe,x=null,U=new r,ba=0,S=0,P=null,Y=null,T=null,Q=null,N=null;this.Ge=function(b){D();
S=0;P=a.qb;T=[];Q=new r;x=b;if(t)u((new Date).getTime()+15);else{for(;d();)++S;p()}};this.Rd=D}}(x,q);return function(f){return f}(function(f,q,c,k){return f.bindingHandlers.indexedRepeat={init:function(h,e,a,n,M){e=e();a=new c(h,e);n=a.ge;a.parent.replaceChild(a.Rb,h);a.parent.insertBefore(a.qb,a.Rb);var u=new k(a,M);a.uc&&f.utils.domNodeDisposal.addDisposeCallback(n,function(){u.Rd()});var d=e.forEach,b=q.oe(d());return{controlsDescendantBindings:!0,subscribable:f.computed(function(){var a=new b(d());
f.ignoreDependencies(u.Ge,u,[a])},null,{disposeWhenNodeIsRemoved:n})}}}}(x,w,v,q))}(E);L=function(x,w,v,q,f,r,c,k){var h,e;h=function(){var a=/^[a-z]+(-[a-z]+)*$/,c=/\x3c!--(?:(before|after):)?([a-z]+(-[a-z]+)*)--\x3e*/g;return function(e){function f(a,c){c=c||function(a,b){return b+a};return function(l){var g=d(l,a);return{L:function(a,l){var e=l?a:null,m=(l=l?l:a)?e:null,n=l,e=c;m&&p(m,2);b(n);m=m?d(m,3)+n+d(m,4):n;e=e(g,m);z=z.replace(g,e)}}}}function d(a,b){function d(b){if(g[a]!==b)throw Error("Operation is not defined for placeholder `"+
a+"`.");}if(!g[a])throw Error("Unknown placeholder id `"+a+"`.");var c="\x3c!--"+a+"--\x3e",e="\x3c!--before:"+a+"--\x3e",t="\x3c!--after:"+a+"--\x3e";switch(b){case 1:return d(1),delete g[a],c;case 2:return d(1),c;case 3:return d(2),e;case 4:return d(2),t;case 5:case 6:return 1===g[a]?c:5===b?t:e}throw Error("Assertion error. Unkown operator: `"+b+"`");}function b(a){for(var b;b=c.exec(a);){var d=b[1],g="before"===d;b=b[2];if(d&&1!==(a.match(new RegExp((g?"after":"before")+":"+b,"g"))||[]).length)throw Error("Multiple or unmatched before-/after-placeholders for placeholder id `"+
b+"`.");d&&!g||p(b,d?2:1)}}function p(b,d){if(!a.test(b))throw Error("Invalid placeholder id `"+b+"`");if(g[b])throw Error("Placeholder id `"+b+"` is already taken.");g[b]=d}var g={},z=e;b(z);this.Vb=f(2);this.Mb=f(3);this.Jb=f(4,function(a,b){return a+b});this.replace=function(a){return{gc:f(1,function(a,b){return b})(a).L}};this.tb=function(a){return{append:f(5)(a).L,dc:f(6,function(a,b){return a+b})(a).L}};this.$d=function(){return z.replace(c,"")}}}();w=function(a,c,e){function f(a){return null===
a?"":""+a}function d(b,d,g){this.id=this.id=g.id;this.property=this.C=g.property||this.id;this.userDefined=this.wb=!1!==g.wb;this.X=!g.hidden;(function(){return this.X}).bind(this);this.visible=this.visible;this.label=this.label=a.observable(g.label);this.width=this.width=a.observable(g.width);this.widthInPixels=this.sa=function(){var a=this.width();if("px"!==a.substr(-2))throw Error("The only currently supported column width values are absolute pixel lengths.");return parseInt(a.substring(0,a.length-
2),10)}.bind(this);this.Ba=a.observableArray(g.headerClasses||g.classes||[]);this.wc=a.observableArray(g.cellClasses||g.classes||[]);this.Jc=a.observableArray(g.footerClasses||g.classes||[]);this.headerClasses=this.Ba;this.cellClasses=this.wc;this.footerClasses=this.Jc;this.metadata=this.Sa=d.columnMetadataSupplier?d.columnMetadataSupplier(b.Zd,g):{};this.renderValue=this.qa=d.cellValueRenderer?d.cellValueRenderer.bind(void 0,this):f;this.a=function(a){this.qa=a(this.qa)}.bind(this);this.cc=function(a){a=
this.sc(a);if(!a||!a.u||!a.update)throw Error("The cell value binding must define an `init` as well as an `update` method.");this.Ka=a.u;this.Hb=a.update}.bind(this);this.sc=function(a){a=a(c.c.extend({u:this.Ka,update:this.Hb},{init:this.Ka,update:this.Hb}));return{u:a.u||a.init,update:a.update||a.update}}.bind(this);this.overrideValueRendering=this.a;this.overrideValueBinding=this.cc}a.bindingHandlers.__gridColumn={init:function(){},update:function(a,d){var c=d();a.style.width=c.width()}};return{u:function(a){a.replace("columns").gc(e)},
j:function(b,c,g){function e(a){a=new d(g,c,a);c.columnInitializer&&c.columnInitializer(a);return a}var m=[];this.all=this.all=a.observableArray(b.columns.map(e));this.byId=this.ja=function(a){var b=this.nd(a);if(!b)throw Error("The column id `"+a+"` is undefined.");return b}.bind(this);this.tryById=this.nd=function(a){var b=this.all().filter(function(b){return b.id===a});if(1<b.length)throw Error("Assertion error: Multiple columns with id `"+a+"`.");return b[0]}.bind(this);var n=a.observable(this.all().filter(function(a){return a.X}));
this.displayed=this.p=function(){return n()};this.show=function(a){this.Ya(function(b){return b.X||b===a})}.bind(this);this.me=function(a){this.Ya(function(b){return b.X&&b!==a})}.bind(this);this.show=this.show;this.hide=this.me;this.reorder=this.Ae=function(a){var b=this.all().slice(),d=[];a.forEach(function(a){b.splice(b.indexOf(a),1);d.push(a)});if(b.length)throw Error("The new column order must contain all columns.");this.all(d);this.Ya(function(a){return a.X})}.bind(this);this.showOnlyThoseWhich=
this.Ya=function(a){var b=this.all();a=b.filter(a);b.forEach(function(a){a.X=!1});a.forEach(function(a){a.X=!0});n(a)}.bind(this);this.combinedWidth=this.zc=a.pureComputed(function(){for(var a=0,b=this.p(),d=0;d<b.length;++d)a+=b[d].sa();return a}.bind(this));this.add=this.add=function(a){a=e({wb:!1,id:"$"+a.id,label:a.label,hidden:a.hidden||!1,width:a.width});this.all.unshift(a);this.Ya(function(a){return a.X});return a}.bind(this);this.ga=function(){m.forEach(function(a){a.dispose()})}}}}(k,f,'<colgroup class="ko-grid-colgroup">\n    <col class="ko-grid-col" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\' }" data-repeat-bind="__gridColumn: column()">\n</colgroup>');
x=function(a,c){function e(d){var b=d.defaultPrevented;a.c.extend(this,d,{preventDefault:function(){b=!0;return d.preventDefault()},k:function(){b=!0},get defaultPrevented(){return b}})}function f(a,b){this.Ub=a;this.jd=b}return function(d){function b(b,d,e){function f(a){a=Array.prototype.slice.call(b.querySelectorAll(a)).filter(function(a){return c.Qc(a,d.target)});return a.length?a[a.length-1]:void 0}var l=c.Ec.bind(null,b),y=p.map(function(a){var d=a.jd?f(a.jd):b;return{Ub:a.Ub,match:d,depth:d?
l(d):-1}}).filter(function(a){return!!a.match});a.n.pb(y,function(a,b){return b.depth-a.depth});y.forEach(function(a){a.Ub.apply(b,e)})}d=d||function(a){return[a]};var p=[];this.Ca=function(a,b){var d=1<arguments.length?a:void 0;b=1<arguments.length?b:a;p.push(new f(b,d))};this.fd=function(a){return{Fc:function(p){var m=c.element.Ob(p.target,a);m&&(p=new e(p),b(m,p,d(p,m)))}}}}}(f,x);v=function(a,c,e,f,d){function b(a){this.V(function(b){b();this.va=a.element.querySelector(".ko-grid-tbody")}.bind(this));
return function(){this.va=null}.bind(this)}function p(){var b=[],d={};this.rows=this.rows=d;d.p=a.observableArray([]);d.displayed=d.p;d.kb=a.observable(!1).extend({Ve:"always"});d.displayedSynchronized=d.kb;d.__handleDisplayedRowsDeviate=function(){this.rows.kb(!1)}.bind(this);d.__handleDisplayedRowsSynchronized=function(){this.rows.kb(!0)}.bind(this);var c=this.view;d.__dirty=c.Oa;b.push(c.aa.subscribe(function(a){d.p(a)}));d.p(c.aa());var e=[];d.__classify=function(a){var b=e.map(function(b){return b(a)});
return Array.prototype.concat.apply([],b)};d.pe=function(a){e.push(a)};d.installClassifier=d.pe;return function(){b.forEach(function(a){a.dispose()})}}function g(){function b(d,c){var e=a.contextFor(c),g=e.row(),e=e.column();return[d,g[e.C],g,e]}function d(a){return function(b){a.fd(".ko-grid-cell").Fc(b);return!b.defaultPrevented}}var c=new f(b),e=new f(b),g=new f(b),l=new f(b);this.xe=c.Ca.bind(c);this.$b=e.Ca.bind(e);this.we=g.Ca.bind(g);this.ve=l.Ca.bind(l);this["onCellMouseDown "]=this.xe;this["onCellClick "]=
this.$b;this["onCellDoubleClick "]=this.we;this["onCellContextMenu "]=this.ve;this.V(function(a){a();this.va.addEventListener("mousedown",d(c));this.va.addEventListener("click",d(e));this.va.addEventListener("dblclick",d(g));this.va.addEventListener("contextmenu",d(l))}.bind(this));return function(){}}function h(b){function d(a,b){for(var c=a.firstChild,e=-1;c;){if(c.nodeType===l&&"TD"===c.tagName&&0<=(" "+c.className+" ").indexOf("td")&&++e===b)return c;c=c.nextSibling}throw Error("Column `"+b+"` does not exist.");
}var e=function(a){for(var b=this.va.firstChild,d=-1;b;){if(b.nodeType===l&&"TR"===b.tagName&&0<=(" "+b.className+" ").indexOf("ko-grid-row")&&++d===a)return b;b=b.nextSibling}throw Error("Row `"+a+"` does not exist.");}.bind(this),g=[];this.rows.__handleElementRecycling=function(a){Array.prototype.slice.call(a.querySelectorAll(".ko-grid-cell")).forEach(function(a){return a["__@__hijacked"]=null})};this.rows.__handleElementRecycled=function(d,e){var l=e.row(),p=this.Va(a.unwrap(l[b.primaryKey]));
c.c.w(g,p)&&g[p].forEach(function(a){var c=a.Q,e=b.e.p().indexOf(c),e=d.children[e];a.element=e;e["__@__hijacked"]=a;a.u&&m(e,l,c);k(e,l,c)})}.bind(this);this.lookupCell=this.Xb=function(l,p){function f(a,b){function d(){1===B.length?delete g[y]:B.splice(B.indexOf(t),1);t.element["__@__hijacked"]===t&&(t.element["__@__hijacked"]=null,m(t.element,l,p),k(t.element,l,p))}if(z["__@__hijacked"])throw Error("Illegal state: This cell is already hijacked.");var e=p.sc(b||function(a){return a}),t=z["__@__hijacked"]=
{element:z,Q:p,ae:a,u:e.u,update:e.update},B=g[y]=g[y]||[];B.push(t);t.u&&m(z,l,p);k(z,l,p);return c.c.extend({gd:d,dispose:d},{dispose:d,release:d})}var y=this.Va(a.unwrap(l[b.primaryKey])),h=this.rows.p().Za(l),u=b.e.p().indexOf(p),z=d(e(h),u);return c.c.extend({element:z,Mc:f},{element:z,hijack:f})}.bind(this);return function(){}}function m(b,d,c){for(var e=b["__@__hijacked"];b.firstChild;)a.removeNode(b.firstChild);e&&e.u&&e.u(b,d,c);c.Ka?c.Ka(b,d,c):b.appendChild(y.createTextNode(""))}function k(b,
d,c){var e=d[c.C],g=e&&a.unwrap(e),l=b["__@__hijacked"],p=c.wc.peek().join(" ");b.className="ko-grid-td ko-grid-cell "+p+(l?" "+l.ae:"");l&&l.update&&l.update(b,e,d,c);c.Ka?c.Hb(b,e,d,c):b.lastChild.nodeValue=c.qa(g)}var l=window.Node.ELEMENT_NODE,y=window.document;a.bindingHandlers.__gridRow={init:function(){},update:function(a,b){var d=b(),c=d.classify,e=d.row(),d=1===d.index()%2?["ko-grid-tr","ko-grid-row","alternate"]:["ko-grid-tr","ko-grid-row"],c=c(e);a.className=d.concat(c).join(" ")}};a.bindingHandlers.__gridCell=
{init:function(a,b){var d=b();m(a,d.row,d.column());return{controlsDescendantBindings:!0}},update:function(a,b){var d=b(),c=d.row(),d=d.column.peek();k(a,c,d)}};return{u:function(a){a.replace("body").gc("body",d);a.tb("table").dc("<div class=\"ko-grid-load-indicator\" data-bind=\"style: { display: data.rows.__dirty() ? 'block' : 'none' }\">Loading&hellip;</div>")},j:function(d,c,l){var m=[];this.source=d.dataSource;this.valueSelector=this.ab=d.valueSelector||c.valueSelector||function(a){return a};
this.observableValueSelector=this.Va=d.observableValueSelector||c.observableValueSelector||this.ab;this.predicates=this.v=a.observableArray(d.filters||[]);this.predicate=this.g=a.pureComputed(function(){return e.v.wa(this.v().map(a.unwrap))}.bind(this));this.comparator=this.l=a.observable(e.Y.Oc);this.offset=this.offset=a.observable(0);this.limit=this.i=a.observable(Number.POSITIVE_INFINITY);d=this.source.na(function(a){return a.R(this.g).da(this.l).Zb(this.offset).Wb(this.i)}.bind(this));m.push(d.dispose.bind(d));
this.view=this.view=d;this.La=function(){};this.V=function(a){var b=this.La;this.La=function(){a(b)}}.bind(this);m.push(b.call(this,l));m.push(p.call(this));m.push(g.call(this));m.push(h.call(this,l));this.ga=function(){m.forEach(function(a){a()})}}}}(k,f,v,x,'<tbody class="ko-grid-tbody" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n    <tr class="ko-grid-tr ko-grid-row"\n        data-bind="indexedRepeat: {\n            forEach: data.rows.displayed,\n            indexedBy: function(r) { return grid.data.observableValueSelector(ko.unwrap(r[grid.primaryKey])); },\n            as: \'row\',\n            at: \'rowIndex\',\n            beforeElementRecycling: data.rows.__handleElementRecycling,\n            afterElementRecycled: data.rows.__handleElementRecycled,\n            allowDeviation: true,\n            onDeviation: data.rows.__handleDisplayedRowsDeviate,\n            onSynchronization: data.rows.__handleDisplayedRowsSynchronized }"\n        data-repeat-bind="__gridRow: { classify: grid.data.rows.__classify, row: row, index: rowIndex }">\n\n        <td data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\', allowElementRecycling: false }"\n            data-repeat-bind="__gridCell: { row: row, column: column }"></td>\n    </tr>\n</tbody>');
x=function(a,c,e,f){function d(b){this.id=this.id="column-header-"+b.id;this.element=this.element=a.observable(null);this.rowSpan=this.rowSpan=a.observable(1);this.columnSpan=this.ka=a.observable(1);this.label=this.label=b.label;this.column=this.Q=b;this.columns=this.e=[b];this.Eb=function(a){this.rowSpan(a)}.bind(this)}function b(b){this.id=this.id="column-group-header-"+(b.id||"@__"+ ++l);this.element=this.element=a.observable(null);this.Qd=b;this.rowSpan=this.rowSpan=a.observable(b.height);this.columnSpan=
this.ka=a.observable(1);this.label=this.label=a.observable(b.label);this.columns=this.e=[];this.Eb=function(a){this.e=[a];this.ka(1)}.bind(this)}function p(a){function b(a){a.be.forEach(function(b){var c=d[b];if(!c)d[b]=a;else if(c!==a)throw Error("Column `"+b+"` is element of column group `"+c.label+"` as well as `"+a.label+"`.");});a.jb&&b(a.jb)}var d={};c.n.Tb(a,g.bind(this,null)).forEach(function(a){b(a)});return d}function g(a,b){var d=h(b),e=b.elements.filter(function(a){return"string"!==typeof a}),
l=b.elements.filter(function(a){return"string"===typeof a}),d={id:b.id,label:b.label,jb:a,depth:a?a.depth+1:0,height:a?a.Zc-d:1,Zc:d,be:l};return e.length?c.n.Tb(e,g.bind(this,d)):d}function h(a){a=a.elements.filter(function(a){return"string"!==typeof a});return 1+Math.max.apply(Math,[0].concat(a.map(h)))}var m=window.document,k=window.Node,l=0;a.bindingHandlers.__gridHeader={init:function(b,d){var c=d()();c.element(b);a.utils.domNodeDisposal.addDisposeCallback(b,function(){c.element(null)});for(var e=
b.firstChild;e;){var g=e;g.nodeType===k.TEXT_NODE&&a.removeNode(g);e=e.nextSibling}b.insertBefore(m.createTextNode(""),b.firstChild);return{controlsDescendantBindings:!0}},update:function(a,b){var d=b()(),c=d.id.replace(/[\s]/g,"_");a.className=d.Q?"ko-grid-th ko-grid-column-header "+c+" "+d.Q.Ba().join(" "):"ko-grid-th ko-grid-column-group-header "+c;c=d.e.map(function(a){return a.sa()}).reduce(function(a,b){return a+b})+"px";a.style.width=c;a.style.maxWidth=c;a.rowSpan=d.rowSpan();a.colSpan=d.ka();
for(c=a.firstChild;c.nodeType!==k.TEXT_NODE;)c=c.nextSibling;c.nodeValue=d.label()}};return{u:function(a){a.replace("head").gc(f)},j:function(c,g,l){function m(a,d,c){if(!a)return[];if(d[a.depth]&&d[a.depth].Qd===a){var e=a;do{var g=d[e.depth];g.e.push(c);g.ka(g.ka()+1);e=e.jb}while(e);return[]}d.length=a.depth;var e=m(a.jb,d,c),l=g=a.depth;a=f(h,new b(a));a.Eb(c);e[g]=d[l]=a;return e}function f(a,b){var d=b.id;return a[d]=a[d]||b}var n=p(c.columnGroups||[]),h={},z={},k=[];this.__rows=this.Fb=a.computed(function(){var b=
l.e.p(),c=0;b.forEach(function(a){a=n[a.id];c=Math.max(c,a?a.depth+a.Zc:0)});k.length=c+1;for(var e=0;e<k.length;++e)k[e]=k[e]||a.observableArray(),k[e].__rowId="header-row-"+e,k[e].valueWillMutate(),k[e]().length=0;var g=[];b.forEach(function(a){var b=n[a.id],e=b?b.depth+b.height:0;g.length=e;var l=f(z,new d(a));l.Eb(c-e+1);k[e]().push(l);a=m(b,g,a);for(b=0;b<a.length;++b)a[b]&&k[b]().push(a[b])});k.forEach(function(a){a.valueHasMutated()});return k});this.all=this.all=a.computed(function(){var a=
[];this.Fb().forEach(function(b){Array.prototype.push.apply(a,b())});return a}.bind(this));this.forColumn=this.ie=function(a){a="column-header-"+a.id;if(!Object.prototype.hasOwnProperty.call(z,a))throw Error("Es existiert kein Header f\u00fcr die gegebene Spalte.");return z[a]};var u=new e(function(b,d){return[b,a.contextFor(d).header()]});this.__handleClick=function(a,b){u.fd(".ko-grid-column-header, .ko-grid-column-group-header").Fc(b);return!b.defaultPrevented};this.Xc=u.Ca.bind(u);this.ac=function(a,
b){function c(a,e){e instanceof d&&b.apply(this,arguments)}var e=1<arguments.length;b=e?b:a;u.Ca.apply(u,e?[a,c]:[c])};this.onHeaderClick=this.Xc;this.onColumnHeaderClick=this.ac;this.ga=function(){this.Fb.dispose();this.all.dispose()}.bind(this)}}}(k,f,x,'<thead class="ko-grid-thead" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n    \x3c!--before:headers--\x3e\n    <tr class="ko-grid-tr ko-grid-headers"\n        data-bind="indexedRepeat: { forEach: headers.__rows, indexedBy: \'__rowId\', as: \'headerRow\' }"\n        data-repeat-bind="click: headers.__handleClick">\n\n        <th class="ko-grid-th"\n            data-bind="indexedRepeat: { forEach: headerRow(), indexedBy: \'id\', as: \'header\' }"\n            data-repeat-bind="__gridHeader: header"></th>\n    </tr>\n    \x3c!--after:headers--\x3e\n</thead>');
e=function(a,c,e,f,d){a=a.bindingHandlers.grid=a.bindingHandlers.grid||{};return a.core=a.core||{columns:c,data:e,headers:f,layout:d}}(k,w,v,x,function(a){function c(a,d,e,n){var m=a.element,h=m.querySelector(".ko-grid-table-scroller-padding"),l=m.querySelector(".ko-grid-table-scroller"),k=m.querySelector(".ko-grid-thead"),B=m.querySelector(".ko-grid-tfoot"),t=!1;return function(a){if(!t)try{d(t=!0);var b=l.scrollLeft;a&&a();e.forEach(function(a){a.call(m)});f(m,function(){h.style.borderTopWidth=
Math.max(k.clientHeight,0)+"px";h.style.borderBottomWidth=Math.max(B.clientHeight,0)+"px"});l.scrollLeft=b;n.forEach(function(a){a.call(m)})}finally{d(!1),t=!1}}}function e(a){a=a.element;var d=a.querySelector(".ko-grid-table-scroller"),c=a.querySelector(".ko-grid-thead"),f=a.querySelector(".ko-grid-tfoot");d.addEventListener("scroll",function(){var a=-d.scrollLeft+"px";c.style.left=a;f.style.left=a})}function f(a,c){if(a.offsetWidth&&a.offsetHeight)c();else{var e=a.parentNode,n=d.createComment("placeholder");
e.replaceChild(n,a);var m=a.style.position;a.style.position="absolute";a.style.visibility="hidden";d.body.appendChild(a);try{c()}finally{e.replaceChild(a,n),a.style.position=m,a.style.visibility="visible"}}}var d=window.document;return{u:function(){},j:function(b,p,g){function f(a){a&&a()}var m=a.observable(!1);this.recalculate=this.pa=function(a){f(a)};var h=a.computed(function(){m()||(g.e.p().forEach(function(a){a.width()}),f())}),l=[],k=[];this.Nb=function(a){l.push(a)};this.Kb=function(a){k.push(a)};
this.beforeRelayout=this.Nb;this.afterRelayout=this.Kb;this.La=function(){e.call(this,g);f=c(g,m,l,k);g.Wa(f)}.bind(this);this.determineCellDimensions=this.fe=function(a){var b=d.createElement("div");b.className="ko-grid-td ko-grid-cell";b.appendChild("string"===typeof a?d.createTextNode(a):a);b.style.position="absolute";b.style.visibility="hidden";d.body.appendChild(b);try{return{width:b.offsetWidth,height:b.offsetHeight}}finally{d.body.removeChild(b)}};this.ga=function(){h.dispose()}}}}(k));(function(a,
c){function e(a,d){if(c.c.w(b,a))throw Error("Extension id or alias already in use: `"+a+"`.");b[a]=d;d.Cb.push(a);return d}function f(a,b){this.ad=a;this.J=b.J||[];this.S=b.S||function(){};this.j=b.j;this.Cb=[]}var d=a.bindingHandlers.grid=a.bindingHandlers.grid||{},b=d.extensions=d.extensions||{};d.q=function(a,b){return e(a,new f(a,b))};d.mb=function(a){if(!c.c.w(b,a))throw Error("No known extension id or alias: `"+a+"`.");return b[a]};d.t=function(a,b){return e(a,d.mb(b))};d.Cc=function(a,b){var c=
d.mb(b);a.forEach(function(a){return e(a,c)});return c};f.prototype={get se(){return this.Cb.slice()},Hc:function(a,b){var d=this.nc(a,function(a){throw Error("Conflicting configurations "+a.map(function(a){return"`"+a+"`"}).join(", ")+" (configuration: `"+b+"`).");});if(!d)throw Error("The extension `"+this.ad+"` must be configured (configuration: `"+b+"`)");return a[d]},Ke:function(a){var b=this.nc(a,function(a){throw Error("Conflicting binding values "+a.map(function(a){return"`"+a+"`"}).join(", ")+
".");});return a[b]},nc:function(a,b){var d=this.Cb.filter(function(b){return c.c.w(a,b)});1<d.length&&b(d);return d[0]}};return b})(k,f);return function(a){return a}(function(a,c,f){function k(b,d){function c(){var a=q[b];d(a.ee,a.Je,a.he)}q[b]?c():a([b],function(a){function d(c){c=p.mb(c);var m=c.ad,h=c.Hc(g,b);if(!f.n.contains(n,m)){if(f.n.contains(k,m))throw Error("Dependency-Cycle: .. -> "+k.join(" -> ")+" -> "+m+" -> ..");k.push(m);c.J.forEach(d);c.S(e,h,a);if(k.pop()!==m)throw Error("Assertion error.");
n.push(m)}}var e=new h('<div class="ko-grid">\n    \x3c!--before:grid--\x3e\n    <div class="ko-grid-table-container">\n        \x3c!--before:table--\x3e\n        <div class="ko-grid-table-scroller-padding">\n            <div class="ko-grid-table-scroller">\n                <table class="ko-grid-table" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n                    \x3c!--columns--\x3e\n                    \x3c!--head--\x3e\n                    <tfoot class="ko-grid-tfoot" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\x3c!--tfoot--\x3e</tfoot>\n                    \x3c!--body--\x3e\n                </table>\n            </div>\n        </div>\n        \x3c!--after:table--\x3e\n    </div>\n    \x3c!--after:grid--\x3e\n</div>');
z.forEach(function(b){b.u(e,a)});var g=a.extensions,n=[],k=[];Object.keys(g).forEach(d);var u="ko-grid-template-"+b;m.a(u,e.$d());q[b]={ee:a,Je:u,he:n};c()})}function d(a,b){this.Zd=b;this.primaryKey=this.primaryKey=b.primaryKey;this.rootElement=this.U=a;this.element=this.element=null;this.ga=function(){};this.V=function(){};this.Wa=function(a){if(!this.V)throw Error("Illegal state: postApplyBindings-callbacks have been called already.");var b=this.V;this.V=function(){b();a()}}.bind(this)}var b=window.document,
p=c.bindingHandlers.grid=c.bindingHandlers.grid||{},g=["columns","headers","data","layout"],z=g.map(function(a){return e[a]}),m=new c.nativeTemplateEngine;m.a=function(a,d){var c=b.createElement("script");c.id=a;c.type="text/html";c.text=d;b.querySelector("head").appendChild(c)};c.bindingHandlers.grid.init=function(a,b,h,t,q){var z=b(),r=z.config;k(r,function(b,h,k){var t=[],u=new d(a,z);c.utils.domNodeDisposal.addDisposeCallback(a,function(){u.ga();t.forEach(function(a){a()})});f.c.Z(e,function(a,
d){var c=new d.j(z,b,u);u[a]=c;u.e=u.columns;u.headers=u.headers;u.data=u.data;u.la=u.layout;"function"===typeof c.ga&&t.push(c.ga.bind(c))});var y=b.extensions,B=z.extensions||{},D=u.extensions=u.f={};for(k.forEach(function(a){a=p.mb(a);var d=a.Hc(y,r),c=a.Ke(B)||{};if((!1!==d.enabled||!0===c.enabled)&&!1!==c.enabled){a.J.forEach(function(a){if(!D[a])throw Error("Dependency '"+a+"' was disabled.");});var e=new a.j(c,d,u,z,b);a.se.forEach(function(a){D[a]=e});"function"===typeof e.dispose&&t.push(e.dispose.bind(e))}});a.firstChild;)c.removeNode(a.firstChild);
k=q.createChildContext(u,"grid");c.renderTemplate(h,k,{templateEngine:m},a);var v=a.querySelector(".ko-grid");u.element=v;u.element=v;f.c.Z(y,function(a){v.className+=" with-"+f.Da.Ac(a)});g.forEach(function(a){u[a].La&&u[a].La()});u.V();u.V=null});return{controlsDescendantBindings:!0}};c.bindingHandlers.grid.update=function(){};var q={};c.bindingHandlers._gridWidth={init:function(){},update:function(a,b){var d=b();a.style.width=d;a.style.maxWidth=d}};return p}(X,k,f))}(J,G,H,F,C,I,K,E);ca=function(x,
w,v,q,f,r,c,k,h){return function(c){return c}(function(c,a,f){function h(a,d){return a.data.source.ea(function(b){return b.R(a.data.g)}).then(function(b){var c={count:0};d.forEach(function(a){c[a]={minimum:Number.POSITIVE_INFINITY,maximum:Number.NEGATIVE_INFINITY,sum:0}});return b.reduce(function(b,e){++c.count;d.forEach(function(b){var d=c[b];b=a.data.ab(e[b]);d.minimum=Math.min(d.minimum,b);d.maximum=Math.max(d.maximum,b);d.sum+=b});return b},c)})}c="ko-grid-aggregate".substr(0,-1).substr(0,-1);
f.q(c,{S:function(a){a.tb("tfoot").dc("aggregates",'<tr class="ko-grid-tr ko-grid-aggregate-row" data-bind="indexedRepeat: {  forEach: extensions.aggregate.__aggregateRows,  indexedBy: \'id\',  as: \'aggregateRow\'}">  <td class="ko-grid-tf ko-grid-aggregate"    data-bind="indexedRepeat: {      forEach: columns.displayed,      indexedBy: \'id\',      as: \'column\'    }"    data-repeat-bind="      __gridAggregate: aggregateRow()[column().id],      _gridWidth: column().width()"></td></tr>')},j:function(c,
d,b){var e=a.observable([]);this.__aggregateRows=e;if(Array.isArray(c)){var g=[];c.forEach(function(a){Object.keys(a).forEach(function(a){a=b.e.ja(a).C;0>g.indexOf(a)&&g.push(a)})});var f=d.statisticsComputer||h,m=0,k=a.computed(function(){b.data.g();b.data.view.values();return f(b,g).then(function(a){var d=a.count;e(c.map(function(c){var e={id:""+ ++m};b.e.p().forEach(function(b){var g=b.id,f=b.C,m=c[g];if(m){if(d)if(f="average"===m?a[f].sum/d:a[f][m],1<=Math.abs(f))f=f.toLocaleString();else var p=
-Math.floor(Math.log(f)/Math.log(10)),f=f.toLocaleString(void 0,{maximumFractionDigits:p+1});else f="N/A";b={Q:b,Lb:m,value:f}}else b={Q:b};e[g]=b});return e}));b.la.pa()})});this.dispose=function(){k.dispose()}}}});a.bindingHandlers.__gridAggregate={init:function(c){for(;c.firstChild;)a.removeNode(c.firstChild);c.appendChild(window.document.createTextNode(""));return{controlsDescendantBindings:!0}},update:function(a,d){var b=d();a.className=["ko-grid-tf ko-grid-aggregate"+(b.Lb?" "+b.Lb:"")].concat(b.Q.Jc()).join(" ");
a.firstChild.nodeValue=b.Lb?b.value:""}};return f.t("aggregate",c)}({},h,r))}(J,H,G,F,C,L,I,K,E);da=function(x,w,v,q,f,r,c,k,h){return function(c){return c}(function(c,a,f){var h=[38,37,39,40,9,13];f.q("ko-grid-cell-navigation",{S:function(a){a.Mb("table").L('<textarea class="ko-grid-focus-parking" tabIndex="-1" style="position: absolute; z-index: 10; overflow: hidden; box-sizing: border-box; width: 1em; height: 1em; top: -3em; left: -3em; resize: none; border: none;"></textarea>')},j:function(c,
d,b){function e(a,d,c){c=!!c;var f=b.data.rows.p(),m=b.e.p();a=f.Za(k)+a;d=m.indexOf(l)+d;c&&0>d?(--a,d=m.length-1):c&&d>=m.length&&(a+=1,d=0);d=Math.max(0,Math.min(m.length-1,d));a=Math.max(0,Math.min(f.length-1,a));g(f.get(a),m[d])}function g(d,c){n&&n.gd();k=d;l=c;var e=b.data.Xb(d,c);n=e.Mc("focused");var g=e.element,e=f.getBoundingClientRect(),p=g.getBoundingClientRect(),g=Math.min(0,p.left-e.left-7)||Math.max(0,p.right-e.right+7+(f.offsetWidth-f.clientWidth)),e=Math.min(0,p.top-e.top-7)||Math.max(0,
p.bottom-e.bottom+7);f.scrollLeft+=g;f.scrollTop+=e;m.focus();m.value=c.qa(a.unwrap(d[c.C]));m.setSelectionRange(0,m.value.length)}var f=null,m=null,k=null,l=null,n=null;b.Wa(function(){f=b.element.querySelector(".ko-grid-table-scroller");m=b.element.querySelector(".ko-grid-focus-parking")});b.data.$b(function(a,b,d,c){return g(d,c)});b.U.addEventListener("keydown",function(a){if(!(0>h.indexOf(a.keyCode))){a.preventDefault();var b=a.shiftKey?-1:1;switch(a.keyCode){case 38:return e(-1,0);case 37:return e(0,
-1);case 39:return e(0,1);case 40:return e(1,0);case 9:return e(0,b,!0);case 13:return e(b,0)}}})}});return f.t("cellNavigation","ko-grid-cell-navigation")}({},h,r))}(J,G,H,F,C,L,I,K,E);V=function(x,w,v,q,f,r){return function(c){return c}(function(c,f){f.q("ko-grid-column-sizing",{j:function(){this.isResizable=this.Ra=function(c){return c.wb}}});return f.t("columnSizing","ko-grid-column-sizing")}({},r))}(J,H,G,F,C,L,I,K,E);Z=function(x,w,v,q,f,r,c,k,h,e){return function(a){return a}(function(a,c,
e,f){var d=window.document,b=window.requestAnimationFrame.bind(window),p=window.cancelAnimationFrame.bind(window);f.q("ko-grid-column-resizing",{J:["ko-grid-column-sizing"],j:function(a,f,m){function h(a){a.forEach(function(a){!k[a.id]&&a.e.filter(l).length&&(k[a.id]=a.element.subscribe(function(a){if(a){var b=d.createElement("div");b.classList.add("ko-grid-column-resizer");a.appendChild(b)}}))})}var l=m.f["ko-grid-column-sizing"].Ra,k={},u=m.headers.all.subscribe(h);h(m.headers.all());var t=!1;this.isResizeInProgress=
this.Rc=function(){return t};m.U.addEventListener("mousedown",function(a){function f(){for(var a=q+w-y,a=Math.max(0,a-10*u.length),b=0;b<u.length;++b){var d=Math.round(r[b]*a);u[b].width(10+d+"px");a-=d}}function g(d){w=d.pageX;D&&p(D);D=b(f);a.preventDefault()}function h(){D&&p(D);d.removeEventListener("mousemove",g);d.removeEventListener("mouseup",h);d.body.removeChild(k);a.target.classList.remove("active");t=!1;m.la.pa()}if(e.element.matches(a.target,".ko-grid-column-resizer")){a.preventDefault();
var k=d.createElement("div");k.id="ko-grid-column-resize-in-progress";d.body.appendChild(k);a.target.classList.add("active");t=!0;for(var u=c.contextFor(a.target).header().e.filter(l),q=0,r=[],z=u.length-1;0<=z;--z){var v=u[z].sa(),q=q+v;r.unshift(v/q)}var y=a.pageX,w=y,D=null;d.addEventListener("mousemove",g);d.addEventListener("mouseup",h)}},!0);m.U.addEventListener("click",function(a){e.element.matches(a.target,".ko-grid-column-resizer")&&a.preventDefault()},!0);this.dispose=function(){u.dispose();
Object.keys(k).forEach(function(a){k[a].dispose()})}}});return f.t("columnResizing","ko-grid-column-resizing")}({},e,x,h))}(J,H,G,F,C,V,I,K,L,E);R=function(x,w,v,q,f,r,c,k,h){return function(c){return c}(function(c,a,f,h){h.q("ko-grid-view-modes",{j:function(c,d,b){c=function(a){return function(d,c){var e="string"===typeof d?[d]:f.n.Gc(d),h=this.ha();e.forEach(function(b){if(f.n.contains(h,b)===a)throw Error("Mode `"+b+"` is already "+(a?"active":"inactive")+".");});b.la.pa(function(){this.ha.valueWillMutate();
var d=b.element.classList;if(a)Array.prototype.push.apply(h,e),d.add.apply(d,e);else{var g=h.filter(function(a){return!f.n.contains(e,a)});h.length=0;Array.prototype.push.apply(h,g);d.remove.apply(d,e)}h.sort();c&&c();this.ha.valueHasMutated()}.bind(this))}.bind(this)}.bind(this);this.ha=a.observableArray([]);this.Sb=c(!0);this.Sc=c(!1);this.activeModes=this.ha;this.enver=this.Sb;this.leave=this.Sc}});return h.t("viewModes","ko-grid-view-modes")}({},h,f,r))}(J,H,G,F,C,L,I,K,E);W=function(x,w,v,q,
f,r,c,k,h){return function(c){return c}(function(c,a,f){function h(d,b,c){function e(a){return b()+"."+a}var f={};this.read=function(a){return d.read(e(a))};this.a=function(a,b){return d.a(e(a),b)};this.bind=function(b,d){if(a.c.w(f,b))throw Error("The key `"+b+"` is already bound.");var e=d.subscribe(function(a){c()||this.a(b,a)}.bind(this)),g=f[b]={qc:function(){var a=this.read(b);void 0===a?this.a(b,d()):d(a)}.bind(this),key:b,observable:d,dispose:function(){e.dispose();delete f[b]}};g.qc();return g}.bind(this);
this.rc=function(){a.c.Z(f,function(a,b){b.qc()})};this.Jd=function(){a.c.Z(f,function(a,b){b.dispose();delete f[a]})}}function k(){this.read=function(a){a=window.localStorage.getItem(a);return null===a?void 0:JSON.parse(a)};this.a=function(a,b){void 0!==b&&window.localStorage.setItem(a,JSON.stringify(b))}}f.q("ko-grid-view-state-storage",{J:["ko-grid-view-modes"],j:function(d,b,c){var e=this,f="koGrid."+a.Da.Bc(c.U.id);d=b.keyValueStore||new k;var m=!1;e.Yb=new h(d,function(){return f},function(){return!1});
e.Ta=new h(d,function(){return f+"["+c.f["ko-grid-view-modes"].ha().join(";")+"]"},function(){return m});var n=c.f["ko-grid-view-modes"].ha.subscribe(function(){m=!0},null,"beforeChange"),l=c.f["ko-grid-view-modes"].ha.subscribe(function(){m=!1;e.Ta.rc()});c.Wa(function(){return[e.Yb,e.Ta].forEach(function(a){return a.rc()})});e.dispose=function(){n.dispose();l.dispose();[e.Yb,e.Ta].forEach(function(a){return a.Jd()})}}});return f.t("viewStateStorage","ko-grid-view-state-storage")}({},f,h))}(J,H,
G,F,C,R,I,K,L,E);ea=function(x,w,v,q,f,r,c,k,h,e,a,n,M){return function(a){return a}(function(a,d,b,c){c.q("ko-grid-column-scaling",{J:["ko-grid-view-state-storage","ko-grid-column-sizing"],j:function(a,c,e){function f(a){var d=0,c=0,g=0,l={};e.e.p().forEach(function(a){var b=p(a),e;b&&h(a)?(e=k()[a.id].width,c+=e):(e=a.sa(),g+=b?0:e);d+=e;l[a.id]={width:e,ib:0}});if(d>=a)return l;var n=a-d,u=c||d-g;return b.c.Vc(l,function(a,b){var d=e.e.ja(b);if(!p(d)||c&&!h(d))return a;d=Math.round(a.width/u*n);
n-=d;u-=a.width;return{width:a.width,ib:d}})}function l(a){a=f(a);b.c.Z(a,function(a,b){e.e.ja(a).width(b.width+b.ib+"px")});k(a)}function h(a){var b=k()[a.id];return b&&b.width+b.ib===a.sa()}var k=d.observable({});e.f["ko-grid-view-state-storage"].Ta.bind("borrowedPixels",k);var p=e.f["ko-grid-column-sizing"].Ra;e.la.Nb(function(){if(!e.f["ko-grid-column-resizing"]||!e.f["ko-grid-column-resizing"].Rc()){var a=this.querySelector(".ko-grid-table-scroller").clientWidth,b=e.e.zc(),d=0;e.e.p().forEach(function(a){d+=
h(a)?k()[a.id].ib:0});(a>b||a<b&&d)&&l(a)}})}});return c.t("columnScaling","ko-grid-column-scaling")}({},n,f,M))}(H,J,G,F,C,Z,W,I,K,V,R,E,L);fa=function(x,w,v,q,f,r,c,k,h,e,a,n){return function(a){return a}(function(a,c,d){d.q("ko-grid-column-width-persistence",{J:["ko-grid-view-state-storage","ko-grid-column-sizing"],j:function(a,d,e){function f(a){return a.filter(function(a){return!c.c.w(l,a.key)}).forEach(function(a){l[a.key]=!0;k(a)&&h.bind("column["+a.id+"].width",a.width)})}var h=e.f["ko-grid-view-state-storage"].Ta,
k=e.f["ko-grid-column-sizing"].Ra,l={},n=e.e.all.subscribe(f);f(e.e.all());this.dispose=function(){n.dispose()}}});return d.t("columnWidthPersistence","ko-grid-column-width-persistence")}({},f,n))}(J,H,G,F,C,V,W,I,K,R,E,L);ga=function(x,w,v,q,f,r){return function(c){return c}(function(c,f){function h(c){var f=c.e.p().filter(function(a){return!!a.C}),d=c.data.ab;c.data.source.ea(function(a){return a.R(c.data.g).da(c.data.l)}).then(function(a){return a.map(function(a){return"<tr>"+f.map(function(b){return"<td>"+
d(a[b.C])+"</td>"}).join("")+"</tr>"}).reduce(function(a,b){return a+b},"")}).then(function(b){b=['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">  <head></head>  <body>    <table>      <thead>',"        <tr>"+f.map(function(a){return"<th>"+a.label()+"</th>"}).join("")+"</tr>","      </thead>      <tbody>",b,"      </tbody>    </table>  </body></html>"].join("");(window.navigator.a?window.navigator.a.bind(window.navigator):
function(a,b){var d=n.createObjectURL(a),c=e.createElement("a");c.href=d;c.download=b;var f=e.createEvent("MouseEvents");f.initEvent("click",!0,!0);c.dispatchEvent(f);window.setTimeout(function(){return n.revokeObjectURL(d)})})(new a([b],{type:"application/vnd.ms-excel;charset=utf-8"}),"excel-export.xls")})}var e=window.document,a=window.Blob,n=window.URL;f.q("ko-grid-export",{J:["ko-grid-toolbar"],S:function(a){a.Vb("left-toolbar").L(' <button class="ko-grid-toolbar-button ko-grid-excel-export">Excel Export</button> ')},
j:function(a,c,d){d.U.addEventListener("click",function(a){a.target.classList.contains("ko-grid-excel-export")&&h(d)})}});return f.t("export","ko-grid-export")}({},r))}(J,H,G,F,C,L,I,K,E);ha=function(x,w,v,q,f,r,c,k,h,e,a){return function(a){return a}(function(a,c,e,d,b){function f(a,b){function d(a){return"*"+a}var c=b.toLowerCase()!==b;return 0<=b.indexOf("*")?g(a,b,c):g(a,"*"+b.replace(/([A-Z])/g,d)+"*",c)}function g(a,b,d){b="^"+b.split("*").map(h).join(".*")+"$";var c=new RegExp(b,d?"":"i"),
f=a.qa;return e.v.je(function(a){return c.test(f(a))},function(){return e.v.ed(c).stringifyable})}function h(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var k=e.v.vc;d.q("ko-grid-filtering",{J:[],S:function(a){return a.Jb("headers").L("filters",b)},j:function(a,b,d){function g(a){var b=a.id;if(!h[b]){var e=c.observable("");d.f["ko-grid-view-state-storage"]&&d.f["ko-grid-view-state-storage"].Yb.bind("filters["+b+"]",e);h[b]={text:e,g:c.pureComputed(function(){var b=e();return b.length?f(a,
b):k})}}return h[b]}var h={};this.__forColumn=g;a=c.pureComputed(function(){var a=d.e.p().filter(function(a){return g(a).g()!==k}).map(function(a){return g(a).g().ma(e.Aa.ec(a.C))});return e.v.wa(a)});var n=b.sb&&b.sb.Ue||300,q=b.sb&&!1===b.sb.enabled?a:a.extend({sb:n}),r=c.observable(!0);this.__applied=c.pureComputed(function(){r(r()||d.data.rows.kb()&&!d.data.view.Oa());return r()});d.data.v.push(c.pureComputed(function(){r(!1);return q()}));this.dispose=function(){q.dispose()}}});return d.t("filtering",
"ko-grid-filtering")}({},e,v,a,'<tr class="ko-grid-tr ko-grid-filter-row" data-bind="css: { applied: extensions.filtering.__applied }">\n    <td class="ko-grid-th ko-grid-filter-cell" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\'  }">\n        <input class="ko-grid-filter" type="text" data-bind="value: extensions.filtering.__forColumn(column()).text, valueUpdate: [\'keypress\', \'keyup\']"/>\n    </td>\n</tr>'))}(J,G,H,F,C,W,I,K,R,E,L);ia=function(x,w,v,
q,f,r,c,k,h,e){return function(a){return a}(function(a,c,e){var f=window.document.documentElement;e.q("ko-grid-full-screen",{J:["ko-grid-toolbar","ko-grid-view-modes"],S:function(a){a.Vb("left-toolbar").L(' <label class="ko-grid-toolbar-button ko-grid-full-screen-label" data-bind="css: { pressed: extensions.fullScreen.__state }">  <input type="checkbox" tabIndex="-1" class="ko-grid-full-screen-toggle" data-bind="checked: extensions.fullScreen.__state" />  Full Screen</label> ')},j:function(a,b,e){var g=
c.observable(!1);this.__state=g;this.Sb=function(){return g(!0)};var h=e.U.classList.contains("fixed-height"),k=g.subscribe(function(a){a?(f.classList.add("contains-full-screen-element"),e.f["ko-grid-view-modes"].Sb("full-screen",function(){e.U.classList.add("fixed-height")})):(f.classList.remove("contains-full-screen-element"),e.f["ko-grid-view-modes"].Sc("full-screen",function(){h||e.U.classList.remove("fixed-height")}))});this.dispose=function(){return k.dispose()}}});return e.Cc(["fullscreen",
"fullScreen"],"ko-grid-full-screen")}({},e,h))}(J,H,G,F,C,R,I,K,L,E);ja=function(x,w,v,q,f,r,c,k,h){return function(c){return c}(function(c,a,f){f.q("ko-grid-links",{j:function(c,e,d){Object.keys(c).forEach(function(b){var e=d.e.ja(b),f=c[b].uri,h=c[b].label,k="function"===typeof f?f:function(b){return d.data.Va(a.unwrap(b[f]))},n="function"===typeof h?h:function(b){return d.data.Va(a.unwrap(b[h||e.C]))};e.cc(function(){return{u:function(a){var b=window.document.createElement("a");b.appendChild(window.document.createTextNode(""));
a.appendChild(b)},update:function(a,b,c){a.firstChild.firstChild.nodeValue=n(c);a.firstChild.href=k(c)}}})})}});return f.t("links","ko-grid-links")}({},h,r))}(J,H,G,F,C,L,I,K,E);ka=function(x,w,v,q,f,r){return function(c){return c}(function(c,f,h){var e=window.requestAnimationFrame.bind(window);window.cancelAnimationFrame.bind(window);h.q("ko-grid-resize-detection",{j:function(a,c,h){function q(){d||(d=e(function(){d=null;h.la.pa()}))}var d,b=(a=window.$)?a(f.element.Ob(h.U,".ui-resizable")):{on:function(){},
off:function(){}};window.addEventListener("resize",q);b.on("resize resizestop",q);this.dispose=function(){window.removeEventListener("resize",q);b.off("resize resizestop",q)}}});return h.t("resizeDetection","ko-grid-resize-detection")}({},x,r))}(J,H,G,F,C,L,I,K,E);la=function(x,w,v,q,f,r){return function(c){return c}(function(c,f,h){f.q("ko-grid-sorting",{j:function(c,a,f){function k(a){a===d?(b="ascending"===b?"descending":"ascending",p=p.reverse()):(d&&d.Ba.removeAll(["ascending-order","descending-order"]),
d=a,b="ascending",p=q(a));a.Ba(d.Ba().filter(function(a){return"ascending-order"!==a&&"descending-order"!==a}).concat(["ascending"===b?"ascending-order":"descending-order"]));f.data.l(p)}function q(a){function b(a){return(a=f.data.ab(a[c]))&&"function"===typeof a.valueOf?a.valueOf():a}var c=a.C;h.Uc(b,function(){return h.Aa.ec(a.C).stringifyable});return h.Y.ue.ma(b)}var d,b,p;(c=c.initiallyBy)&&k(f.e.ja(c));f.headers.ac(function(a,b){a.defaultPrevented||(a.preventDefault(),k(b.Q))});var g=f.data.l.subscribe(function(a){d&&
(a!==p&&(d.Ba.removeAll(["ascending-order","descending-order"]),d=b=p=null),f.la.pa())});this.dispose=function(){g.dispose()}}});return f.t("sorting","ko-grid-sorting")}({},r,w))}(J,H,G,F,C,L,I,K,E);ma=function(x,w,v,q,f,r){return function(c){return c}(function(c,f){f.q("ko-grid-toolbar",{S:function(c){c.tb("grid").append("toolbar",'<div class="ko-grid-toolbar">  <div class="ko-grid-left-toolbar">\x3c!--left-toolbar--\x3e</div>  <div class="ko-grid-right-toolbar">\x3c!--right-toolbar--\x3e</div></div>')},
j:function(){}});return f.t("toolbar","ko-grid-toolbar")}({},r))}(J,H,G,F,C,L,I,K,E);C=function(x,w,v,q,f,r,c,k,h){return function(c){return c}(function(c,a,f){f.q("ko-grid-virtualization",{S:function(a){a.Mb("body").L('<tbody class="ko-grid-virtualization-before-spacer"><tr data-bind="style: { height: extensions.virtualization.__beforeHeight() + \'px\' }"><td></td></tr></tbody>');a.Jb("body").L('<tbody class="ko-grid-virtualization-after-spacer"><tr data-bind="style: { height: extensions.virtualization.__afterHeight() + \'px\' }"><td></td></tr></tbody>')},
j:function(c,e,d){function b(){d.data.i(Math.ceil((n.clientHeight-1)/q)+2)}function f(){var a=n.scrollTop,b=n.getBoundingClientRect().top-l.getBoundingClientRect().bottom,b=Math.floor(b/q),b=Math.max(0,Math.min(d.data.view.za()-d.data.view.size()+2,d.data.offset()+b)),c=b&1;d.data.offset(b-c);h(a-c*q-a%q);g()}function g(){k(Math.max(0,d.data.view.za()-d.data.offset()-d.data.i())*q)}var h=a.observable(0),k=a.observable(0);this.__beforeHeight=h;this.__afterHeight=k;var n,l;d.Wa(function(){n=d.element.querySelector(".ko-grid-table-scroller");
l=d.element.querySelector(".ko-grid-virtualization-before-spacer");d.element.querySelector(".ko-grid-virtualization-after-spacer");d.la.Kb(b);d.data.view.za.subscribe(g);n.addEventListener("scroll",f)});var q=25}});return f.t("virtualization","ko-grid-virtualization")}({},h,r))}(J,G,H,F,C,L,I,K,E);return function(x){return x}({dataSource:I,grid:L,extensions:{aggregate:ca,cellNavigation:da,columnResizing:Z,columnScaling:ea,columnSizing:V,columnWidthPersistence:fa,"export":ga,filtering:ha,fullScreen:ia,
links:ja,resizeDetection:ka,sorting:la,toolbar:ma,viewModes:R,viewStateStorage:W,virtualization:C}})});