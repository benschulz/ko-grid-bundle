/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
var A;
(function(X){"function"===typeof define&&define.amd?define(["require","knockout"],X):window["ko-grid-bundle"]=X(function(C,z){if(!Array.isArray(C)||1!==C.length||"string"!==typeof C[0]||"function"!==typeof z)throw Error("Assertion error.");var E=window.ko.bindingHandlers.grid.config=window.ko.bindingHandlers.grid.config||{};z(E[C[0]])},window.ko)})(function(X,C){var z,E,G,H,I,J,K,L,ca,V,Z,P,W,da,ea,fa,ga,ha,ia,ja,ka,la;z=function(){var x;x=function(){function v(r,k){return Object.prototype.hasOwnProperty.call(r,k)}
return{Sd:function(r,k){if(r===k)return!0;var f=!!k&&"function"===typeof k.valueOf;return!!r&&"function"===typeof r.valueOf&&f&&r.valueOf()===k.valueOf()},extend:function(r,k){Array.prototype.slice.call(arguments,1).forEach(function(f){for(var q=Object.keys(f),c=0,l=q.length;c<l;c++){var h=q[c],e=Object.getOwnPropertyDescriptor(f,h);void 0!==e&&e.enumerable&&Object.defineProperty(r,h,e)}});return r},V:function(r,k){for(var f in r)v(r,f)&&k(f,r[f])},v:v,Rc:function(r,k){var f={},q;for(q in r)v(r,q)&&
(f[q]=k(r[q],q,r));return f}}}();return function(v){return v}(function(v,r,k){return{m:v,a:r,Ca:k}}(function(v){function r(c){return c.filter(function(l,c,e){return e.lastIndexOf(l)===c})}function k(c,l){for(var h=c.length,e=-1,a=0;a<h;++a)if(l(c[a])){if(0<=e)throw Error("Multiple elements match the predicate.");e=a}return e}function f(c,l){return c&&"function"===typeof c.valueOf&&l&&"function"===typeof l.valueOf?c.valueOf()<=l.valueOf()?c.valueOf()<l.valueOf()?-1:0:1:c<=l?c<l?-1:0:1}function q(c,
l){var h=c.length,e=Array(h),a=Array(h),n;for(n=0;n<h;++n)e[n]=n,a[n]=c[n];n=c;c=a;a=n;e.sort(function(a,n){return l(c[a],c[n])||a-n});for(n=0;n<h;++n)a[n]=c[e[n]];return a}return{contains:function(c,l){return 0<=c.indexOf(l)},Dc:function(c){if(50<c.length){for(var l=c.length,h={},e,a=0;a<l;++a)if(e=c[a],"string"===typeof e)if(v.v(h,e))break;else h[e]=!0;else if(c.lastIndexOf(e)!==a)break;if(!(a>=l)){for(var n=c.slice(0,a);a<l;++a)e=c[a],"string"===typeof e?v.v(h,e)||(h[e]=!0,n.push(e)):c.lastIndexOf(e)===
a&&n.push(e);c=n}}else c=r(c);return c},Nb:function(c,l){return Array.prototype.concat.apply([],c.map(l))},ed:function(c,l){var h=k(c,l);if(0>h)throw Error("None of the elements matches the predicate.");return c[h]},kb:function(c,l){var h=k(c,l);return 0<=h?c[h]:null},lb:function(c,l){var h=l||f;window.chrome?h=q(c,h):(c.sort(h),h=c);return h}}}(x),x,{xc:function(v){return v.replace(/([A-Z])/g,function(r){return"-"+r.toLowerCase()})},yc:function(v){return v.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})},
format:function(v){var r=arguments;return v.replace(/{(\d+)}/g,function(k,f){var q=parseInt(f,10)+1;return typeof r.length<=q?k:r[q]})}}))}();E=function(x){return function(v){return v}(function(v){function r(q){var c={get length(){return this.length},contains:function(l){return 0<=this.Zb(l)},filter:function(l){for(var c=this.length,e=[],a=0;a<c;++a){var n=this.get(a);l(n,a,this)&&e.push(n)}return new k(e)},forEach:function(c){for(var h=this.length,e=0;e<h;++e)c(this.get(e),e,this)},get:function(c){return this.get(c)},
map:function(c){for(var h=this.length,e=Array(h),a=0;a<h;++a)e[a]=c(this.get(a),a,this);return new k(e)},readOnly:function(){return new f(this)},reduce:function(c,h){var e=1<arguments.length,a=this.length;if(!e&&0===a)throw new TypeError("An empty list can not be reduced, specify an initial value.");for(var n=e?h:this.get(0),e=e?0:1;e<a;++e)n=c(n,this.get(e));return n},slice:function(c,h){var e=this.length;c=0>=arguments.length?0:0<=c?c:e+c;h=1>=arguments.length?e:0<=h?h:e+h;for(var e=h-c,a=Array(e),
n=0;n<e;++n)a[n]=this.get(c+n);return new k(a)},pa:function(){for(var c=this.length,h=Array(c),e=0;e<c;++e)h[e]=this.get(e);return h},Zb:function(c){for(var h=this.length,e=0;e<h;++e)if(this.get(e)===c)return e;return-1}};return v.a.extend(c,{get length(){return this.length},contains:c.contains,filter:c.filter,forEach:c.forEach,get:function(c){return this.get(c)},map:c.map,readOnly:c.readOnly,reduce:c.reduce,slice:c.slice,toArray:c.pa,tryFirstIndexOf:c.Zb},q)}function k(f){this.xb=f}function f(f){this.Ga=
f}k.prototype=r({get length(){return this.xb.length},get:function(f){return this.xb[f]},pa:function(){return this.xb.slice()}});f.prototype=r({get length(){return this.Ga.length},get:function(f){return this.Ga.get(f)}});return{Sa:function(f){return new k(f||[])},Pc:r}}(x))}(z);G=function(x,v){return function(r){return r}(function(r,k){function f(a){if("string"!==typeof a)throw Error("Ids must be strings. (given: `"+a+"`, type: `"+typeof a+"`)");return a}function q(a,n){return r.a.v(a,f(n))?a[n]:-1}
function c(a,n){var c=q(a,n);if(0>c)throw Error("No element with id `"+n+"`.");return c}function l(a,n,c,w,b){if(w>=b)return w;var d=Math.floor((w+b)/2);return 0>n(c,a[d])?l(a,n,c,w,d):l(a,n,c,d+1,b)}function h(a,c,e,w,b){function d(b,d){var p=g.length,y=c.slice(b,d);g=g.concat(y);y.forEach(function(b){e[a(b)]=p;++p})}var g=[],p=0;w.forEach(function(a){d(p,a);p=a;b(g)});d(p,c.length);return g}function e(a){this.J=function(c){return f(a(c))};this.w=[];this.B={};this.L=null}e.prototype=k.Pc({get length(){return this.w.length},
get:function(a){return this.w[a]},Ic:function(a){return this.w[c(this.B,a)]},Fe:function(a){a=q(this.B,a);return 0<=a?this.w[a]:null},clear:function(){this.w=[];this.B={}},contains:function(a){a=(0,this.J)(a);return 0<=q(this.B,a)},Jb:function(a){return 0<=q(this.B,a)},removeAll:function(a){this.cd(a.map(this.J))},cd:function(a){if(a.length){var n=this.J,e=this.w,w=this.B;a=a.map(function(b){return c(w,b)+1});a.sort(function(b,d){return b-d});this.w=h(n,e,w,a,function(b){b=b.pop();b=n(b);delete w[b]})}},
fd:function(a){var c=this.J,e=this.w,w=this.B;this.L=a;r.m.lb(e,a);a=!1;for(var b=0;b<e.length;++b){var d=c(e[b]);a=a||w[d]!==b;w[d]=b}return a},qb:function(a){if(this.L)throw Error("`updateAll` must not be called on a sorted `IndexedTable`. Use a combination of order-preserving `tryUpdateAll`, `removeAll` and `insertAll` instead.");if(a.length){var n=this.J,e=this.w,w=this.B;a.forEach(function(b){var d=c(w,n(b));e[d]=b})}},jd:function(a){if(!this.L)throw Error("`tryUpdateAll` is designed for sorted `IndexedTable`s. For unsorted ones, use `updateAll` instead.");
if(!a.length)return[];var n=this.J,e=this.w,w=this.B,b=this.L,d=[];a.forEach(function(a){var p=c(w,n(a));0!==b(a,e[p])?d.push(a):e[p]=a});return d},ga:function(a){if(this.L)throw Error("`addAll` must not be called on an sorted `IndexedTable`. Use order-preserving `insertAll` instead.");if(a.length){var c=this.J,e=this.w,w=this.B;a.forEach(function(b){var d=c(b);if(r.a.v(w,d))throw Error("The list already contains an element with id `"+d+"`. Did you mean to call `updateAll`?.");w[d]=e.push(b)-1})}},
Lc:function(a){if(!this.L)throw Error("`insertAll` is designed for sorted `IndexedTable`s. For unsorted ones, use `addAll` instead.");if(a.length){var c=this.J,e=this.w,w=this.B,b=this.L;r.m.lb(a,b);var d=0,g=[];a.forEach(function(a){a=l(e,b,a,d,e.length);g.push(a);d=a});d=0;this.w=h(c,e,w,g,function(b){var g=a[d],m=c(g),u=b.length;b.push(g);w[m]=u;++d})}}});return e}(v,x))}(E,z);H=function(x){var v,r,k;v=function(f){return function(q,c){return f.a.extend(q,{get stringifyable(){return c()}})}}(x);
r=function(f,q){function c(){return 0}function l(a,c){return"string"===typeof a&&"string"===typeof c?a.localeCompare(c):a<=c?a<c?-1:0:1}function h(c,h){f.a.extend(c,{get onResultOf(){return this.la},get reverse(){return this.reverse},get callable(){return this.Ka}},{get la(){return function(a){return e(a,c)}},get reverse(){return function(){return h||a(c)}},get Ka(){return c}})}function e(a,c){function e(b,d){return c(a(b),a(d))}h(e);q(e,function(){return{type:"by-function-comparator","function":a.stringifyable,
comparator:c.stringifyable}});return e}function a(a){function c(e,b){return-a(e,b)}h(c,a);q(c,function(){return{type:"reversed-comparator",comparator:a.stringifyable}});return c}h(l);q(l,function(){return{type:"natural-comparator"}});h(c);q(c,function(){return{type:"indifferent-comparator"}});return{Kc:c,pe:l}}(x,v);k=function(f,q){function c(c){f.a.extend(c,{get callable(){return this.Ka}},{get Ka(){return c}})}return{Yb:function(f){function h(c){return c[f]}c(h);q(h,function(){return{type:"property-accessor",
propertyName:f}});return h}}}(x,v);x=function(f,q){function c(){return!0}function l(){return!1}function h(c,b){f.a.extend(c,{get and(){return this.va},get negate(){return this.Sc},get onResultOf(){return this.la},get or(){return this.ib},get callable(){return this.Ka}},{get va(){return function(b){return e([c,b])}},get Sc(){return function(){return b||n(c)}},get la(){return function(b){return a(b,c)}},get ib(){return function(b){return M([c,b])}},get Ka(){return c}})}function e(a){function b(b){for(var g=
0,p=a.length;g<p;++g)if(!a[g](b))return!1;return!0}if(!a.length)return c;h(b);q(b,function(){return{type:"and-predicate",components:a.map(function(b){return b.stringifyable})}});return b}function a(a,b){function d(d){return b(a(d))}h(d);q(d,function(){return{type:"by-function-predicate","function":a.stringifyable,predicate:b.stringifyable}});return d}function n(a){function b(b){return!a(b)}h(b,a);q(b,function(){return{type:"negated-predicate",predicate:a.stringifyable}});return b}function M(a){function b(b){for(var g=
0,p=a.length;g<p;++g)if(a[g](b))return!0;return!1}if(!a.length)return l;h(b);q(b,function(){return{type:"or-predicate",components:a.map(function(b){return b.stringifyable})}});return b}h(l);q(l,function(){return{type:"always-false-predicate"}});h(c);q(c,function(){return{type:"always-true-predicate"}});return{b:l,rc:c,va:e,ce:function(a,b){function d(b){return a(b)}h(d);q(d,b);return d},ib:M,ad:function(a){function b(b){return a.test(b)}h(b);q(b,function(){return{type:"regular-expression-predicate",
regularExpression:a.source,caseSensitive:!a.ignoreCase,multiline:a.multiline}});return b}}}(x,v);return function(f){return f}({U:r,ya:k,s:x,Qc:v,Ce:function(f,q){return"function"===typeof q||"object"===typeof q?q.stringifyable||q:q}})}(z);I=function(x,v,r,k,f){var q,c,l,h,e,a,n,M,w;q=function(){function b(b,a,p){this.Ja=b||[];this.Va=a||[];this.Ta=p||[]}b.prototype={get size(){return this.Ja.length+this.Va.length+this.Ta.length},get empty(){return!this.size},na:function(b){this.empty||b(this)}};return b}();
c={};l=function(b,a,g,p,c){function m(a,d,t){this.$a=a;this.o=d||new g(a.Ha);this.da=t||b.observable(new p);this.Db=b.observable(this.o.readOnly());this.sa=null;this.A=b.pureComputed(function(){this.Db();this.sa||(this.sa=this.o.map(this.F.G));return this.sa}.bind(this));this.A.subscribe(function(){return this.sa=null}.bind(this),null,"asleep")}m.prototype={get Ha(){return this.$a.Ha},get F(){return this.$a.F},get values(){return this.Db},get Y(){return this.A},bb:function(b){this.sa&&(b.Ja.forEach(this.F.G),
this.sa=this.o.map(this.F.ne),b.Ta.forEach(this.F.D));this.Db.valueHasMutated()},Cb:function(){this.A&&this.o.forEach(this.F.D)},Oa:function(){this.$a.Oa();this.Za()},N:function(b){return new c.rd(this,b)},ba:function(b){return new c.Cd(this,b)},uc:function(b,a){return new c.ld(this,b,a)}};return m}(f,k,x,q,c);h=function(b,a,g){function p(b,a,d,y){g.call(this,{Ha:b,F:a},d,y);this.Fa=y.subscribe(function(b){this.bb(b)}.bind(this))}p.prototype=a.a.extend({},g.prototype,{Oa:function(){},dispose:function(){this.Fa.dispose();
this.Cb()}});return p}(f,k,l);(function(b,a,g,p,c){function m(a,d){p.call(this,a);var t=b.observable(b.unwrap(d));this.Za=function(){return t(b.unwrap(d))};this.Ea=b.computed(function(){t();var a=b.unwrap(d);t(a);var F=this.o.pa(),a=this.$a.o.filter(a).pa(),F=new g(a,[],F);this.o.clear();this.o.ga(a);this.bb(F);F.na(this.da)}.bind(this));this.Fa=a.da.subscribe(function(a){var F;F=this.Ha;for(var t=this.o,p=b.unwrap(d),c=a.Ja.filter(p),m=[],u=a.Ta.filter(p),D=0,e=a.Va.length;D<e;D++){var n=a.Va[D],
h=t.Jb(F(n));p(n)?h?m.push(n):c.push(n):h&&u.push(n)}F=new g(c,m,u);F.empty||(this.o.removeAll(F.Ta),this.o.qb(F.Va),this.o.ga(F.Ja),this.bb(a),F.na(this.da))}.bind(this))}m.prototype=a.a.extend({},p.prototype,{dispose:function(){this.Ea.dispose();this.Fa.dispose();this.Cb()}});return c.rd=m})(f,k,q,l,c);(function(a,d,g,p){function c(d,p){g.call(this,d);this.o.ga(d.o.pa());var y=a.observable(a.unwrap(p));this.Za=function(){return y(a.unwrap(p))};this.Ea=a.computed(function(){y();var d=a.unwrap(p);
y(d);this.o.fd(d)&&this.da.valueHasMutated()}.bind(this));this.Fa=d.da.subscribe(function(a){var b=this.o.jd(a.Va);this.o.removeAll(a.Ta.concat(b));this.o.Lc(a.Ja.concat(b));this.bb(a);this.da.valueHasMutated()}.bind(this))}c.prototype=d.a.extend({},g.prototype,{N:function(){throw Error("Filtering a sorted view is not supported.");},ba:function(){throw Error("Sorting a sorted view is not supported.");},dispose:function(){this.Ea.dispose();this.Fa.dispose();this.Cb()}});return p.Cd=c})(f,k,l,c);(function(a,
d,g,p){function c(d,p,y){function t(){return{offset:a.unwrap(p),l:a.unwrap(y)}}var B=d.F;this.zb=d;this.d=a.observable(g.Sa());this.A=null;var F=d.Ha,S=a.observable(t());this.Za=function(){var a=S(),b=t();a.offset===b.offset&&a.l===b.l||S(b)};this.Ea=a.computed(function(){d.da();S();var a=t();S(a);var b=d.o,g=Math.min(b.length,a.offset),p=Math.min(b.length,g+a.l),a=this.d.peek(),b=b.slice(g,p);a:if(a.length!==b.length)g=!0;else{for(g=a.length-1;0<=g;--g)if(F(a.get(g))!==F(b.get(g))){g=!0;break a}g=
!1}g&&(this.d(b),this.A&&(this.A(this.d.peek().map(B.G)),a.forEach(B.D)))}.bind(this))}c.prototype={get values(){return this.d},get Y(){this.A||(this.A=a.observable(this.values().map(this.zb.F.G)));return this.A},Oa:function(){this.zb.Oa();this.Za()},N:function(){throw Error("Filtering a clipped view is not supported.");},ba:function(){throw Error("Sorting a clipped view is not supported.");},uc:function(){throw Error("Clipping a clipped view is not supported.");},dispose:function(){this.Ea.dispose();
this.A&&this.d().forEach(this.zb.F.D)}};return p.ld=c})(f,k,r,c);e={Ad:h};c=function(a){function d(a,b,d){this.k=a;this.b=d?function(a,g){var t=b(g);try{return a(t)}finally{d(t)}}:function(a,d){return a(b(d))}}d.prototype={forEach:function(a){this.k.forEach(this.b.bind(null,a))},map:function(a){return new d(this,a)},reduce:function(a,b){return this.k.reduce(function(b,d){return a(b,this.b(function(a){return a},d))}.bind(this),b)}};var g=d.prototype;a.a.extend(g,{forEach:g.forEach,map:g.map,reduce:g.reduce});
return d}(k);a=function(a,d,g){function c(){return 0}function D(){return!0}function m(a,b){this.j=a;this.b=b}function u(a){this.k=a;this.b=null}function y(a,b,d){this.j=a;this.ee=b;this.fe=d;this.Fc=!1;this.H=this.b=this.k=this.Kb=null}function t(a,b,d,g){this.h=a||D;this.n=b||c;this.offset=d||0;this.l=g||0===g?g:Number.POSITIVE_INFINITY;this.Z=Math.max(this.h===D?t.b:t.gc,this.n===c?t.b:t.H,0===this.offset&&this.l===Number.POSITIVE_INFINITY?t.b:t.k)}function B(a,b,d){this.key=a;this.view=b;this.Q=
1;this.b=d}m.prototype={Uc:function(a){return new u(this.Vb(a))},Vb:function(a){return new y(this.j,this.b,a)},gd:function(a){return this.ca(a).then(function(a){return new g(a,this.j.G.bind(this.j),this.j.D.bind(this.j))}.bind(this))},ma:function(){throw Error("`"+this.constructor+"` does not implement `openView`.");},ca:function(){throw Error("`"+this.constructor+"` does not implement `streamValues`.");},dispose:function(){throw Error("`"+this.constructor+"` does not implement `dispose`.");}};m.prototype=
d.a.extend({},{openEntryView:m.prototype.Uc,openOptionalEntryView:m.prototype.Vb,streamObservables:m.prototype.gd},m.prototype);u.prototype={get value(){return this.k.value},get observable(){this.b||(this.b=this.k.P.subscribe(function(){throw Error("Illegal state: A non-optional view for this entry is still open.");}));return this.k.observable},dispose:function(){this.b&&this.b.dispose();this.k.dispose()}};u.prototype=d.a.extend({},{get value(){return this.value},get observable(){return this.observable},
dispose:u.prototype.dispose},u.prototype);y.prototype={wa:function(){if(this.Fc)throw Error("Illegal state: Entry view was already disposed.");},get value(){this.wa();return this.Kb=this.ee(this.fe)},get observable(){this.wa();return(this.k||this.P)&&this.k},get P(){this.wa();if(this.b)return this.b;var F=this.j.Od(this.value);this.k=F();this.b=a.observable({present:!0,observable:this.k});this.H=F.subscribe(function(a){this.b({present:!!a,observable:a})}.bind(this));return this.b},dispose:function(){this.wa();
this.Fc=!0;this.H&&(this.H.dispose(),this.j.D(this.Kb),this.Kb=this.k=this.b=this.H=null)}};y.prototype=d.a.extend({},{get value(){return this.value},get observable(){return this.observable},get optionalObservable(){return this.P},dispose:y.prototype.dispose},y.prototype);t.b=0;t.gc=1;t.H=2;t.k=3;t.Hc=function(a){return new t(a.h,a.n,a.offset,a.l)};t.prototype={Ma:function(a){return this.Z===a.Z&&this.h===a.h&&this.n===a.n&&this.offset===a.offset&&this.l===a.l},Zc:function(){if(0>=this.Z)throw Error("Unsupported operation.");
var a=[null,this.h,this.n].slice(0,this.Z);return new (t.bind.apply(t,a))},pc:function(){return 0===this.Z?[this]:this.Zc().pc().concat([this])},Rd:function(a){var b=[[this.h],[this.n],[this.offset,this.l]][this.Z-1];return(0,[function(a){return a.N},function(a){return a.ba},function(a){return a.uc}][this.Z-1])(a).apply(a,b)}};B.prototype={G:function(){if(0>=this.Q)throw Error("Assertion error: Reference count at `"+this.Q+"`.");++this.Q;return this},D:function(){0===--this.Q&&this.b();return this}};
m.Xa=t;m.fc=B;return m}(f,k,c);n=function(a,d){function g(a){this.Ga=a}g.prototype={forEach:function(a){this.Ga.forEach(a)},map:function(a){return new d(this,a)},reduce:function(a,b){return Promise.resolve(this.Ga.reduce(a,b))}};var c=g.prototype;a.a.extend(c,{forEach:c.forEach,map:c.map,reduce:c.reduce});return g}(k,c);c=function(a){return function(){var d={};Array.prototype.slice.call(arguments).forEach(function(a){d[a]=!0});this.constructor=function(g){var c={};Object.keys(g).forEach(function(e){c[e]=
d[e]?g[e]:a.observable(g[e])});return c};this.ac=function(a,b){Object.keys(b).filter(function(a){return!d[a]}).forEach(function(d){return a[d](b[d])});return a}}}(f);M=function(a,d,g){function c(d){this.observable=d;this.P=a.observable(d);this.$c=1}return function(a,b){function u(a){if("string"!==typeof a)throw t(a);if(d.a.v(B,a))return B[a];throw Error("No entry for id `"+a+"`.");}function y(d){var g=a(d);if("string"!==typeof g)throw t(g);Object.prototype.hasOwnProperty.call(B,g)?(g=B[g],++g.$c):
(d=new c(b.constructor(d)),g=B[g]=d);return g}function t(a){throw Error("Illegal argument: Ids must be strings ('"+a+"' is of type '"+typeof a+"').");}b=b||new g;var B={};this.G=function(a){return y(a).observable};this.Od=function(a){return y(a).P};this.D=function(b){b=a(b);0===--u(b).$c&&delete B[b]};this.ne=function(b){return u(a(b)).observable};this.Yc=function(g){g.forEach(function(g){var c=a(g);d.a.v(B,c)&&(c=B[c],c.observable=b.constructor(g),c.P(c.observable))})};this.rb=function(g){g.forEach(function(g){var c=
a(g);d.a.v(B,c)&&b.ac(B[c].observable,g)})};this.ue=function(a){d.a.V(B,function(d,g){var c=a(d);c?g.observable?b.ac(g.observable,c):(g.observable=b.constructor(c),g.P(g.observable)):g.P(null)})};this.Ac=function(a){d.a.V(B,function(b,d){a(b)&&d.P(null)})};this.dispose=function(){this.Ac(function(){return!0})}.bind(this)}}(f,k,c);v=function(a,d,g){function c(a,b,d,g){this.Jd=a;this.L=b;this.Id=d;this.Hd=g}c.prototype=d.a.extend({get predicate(){return this.h},get comparator(){return this.n},get offset(){return this.offset},
get limit(){return this.l}},{get h(){return this.Jd},get n(){return this.L},get offset(){return this.Id},get l(){return this.Hd},normalize:function(){return new c(this.h||g.s.rc,this.n||g.U.Kc,this.offset||0,this.l||0===this.l?this.l:Number.POSITIVE_INFINITY)},$b:function(){return new c(a.unwrap(this.h),a.unwrap(this.n),a.unwrap(this.offset),a.unwrap(this.l))},Ma:function(a){return this.h===a.h&&this.n===a.n&&this.offset===a.offset&&this.l===a.l}});return c}(f,k,v);v=function(a,d){function g(a,b,
g){d.call(this,a,b,g)}var c={Qb:function(a){return new d(this.h,this.n,this.offset,a)}};g.prototype=a.a.extend({},d.prototype,c,{limitedTo:c.Qb});return g}(k,v);v=function(a,d){function g(a,b){d.call(this,a,b)}var c={Tb:function(a){return new d(this.h,this.n,a)}};g.prototype=a.a.extend({},d.prototype,c,{offsetBy:c.Tb});return g}(k,v);v=function(a,d){function g(a){d.call(this,a)}var c={ba:function(a){return new d(this.h,a)}};g.prototype=a.a.extend({},d.prototype,c,{sortedBy:c.ba});return g}(k,v);v=
function(a,d){function g(){d.call(this)}var c={N:function(a){return new d(a)}};g.prototype=a.a.extend({},d.prototype,c,{filteredBy:c.N});return g}(k,v);w=function(a,d){function g(){d.call(this)}g.prototype=a.a.extend({},d.prototype);return g}(k,v);v=function(){function b(a,b){b=b||new t(a);var d=new y(a);m.call(this,b,function(a){return d.Ic(a)});this.Ya=a;this.j=b;this.d=d;this.ra=g.observable(new u);this.q=[];var c=new h.Ad(this.Ya,this.j,this.d,this.ra);this.Kd=this.hc(new m.Xa,c);this.S=g.pureComputed(function(){return c.values().length})}
function d(a,b){this.b=a;this.H=b;this.S=g.pureComputed(function(){return a.values().length});this.k=g.pureComputed(function(){return(c.m.kb(b,function(a){return a.key.Z===m.Xa.gc})||b[0]).view.values().length})}var g=f,c=k,h=e,m=a,u=q,y=x,t=M;b.prototype={get size(){return this.S},hc:function(a,b){var d=new m.fc(a,b,function(){return this.q.splice(this.q.indexOf(d),1)}.bind(this));this.q.push(d);return d},Gd:function(a){var b=c.m.kb(this.q,function(b){return a.Ma(b.key)});if(b)return b.G();var d=
a.Zc(),b=c.m.ed(this.q,function(a){return d.Ma(a.key)}).view,b=a.Rd(b);return this.hc(a,b)},Nd:function(a){this.d.ga(a);(new u(a)).na(this.ra);this.j.Yc(a)},Pd:function(a){var b=[],d=[];a.forEach(function(a){return(this.d.contains(a)?d:b).push(a)}.bind(this));this.d.ga(b);this.d.qb(d);(new u(b,d)).na(this.ra);this.j.Yc(b);this.j.rb(d)},ma:function(a){a=(a||function(a){return a})(new w);a=m.Xa.Hc(a).pc().map(function(a){return this.Gd(a)}.bind(this));var b=a[a.length-1].view;b.Oa();return new d(b,
a)},ve:function(a){this.d.removeAll(a);(new u([],[],a)).na(this.ra);this.j.Ac(function(a){return!this.d.Jb(a)}.bind(this))},xe:function(a){var b=this.d.pa();this.d.clear();this.d.ga(a);(new u(a,[],b)).na(this.ra);this.j.ue(function(a){return this.d.Fe(a)}.bind(this))},ca:function(a){a=this.ma(a);try{return Promise.resolve(new n(a.values.peek().slice()))}finally{a.dispose()}},rb:function(a){this.d.qb(a);(new u([],a)).na(this.ra);this.j.rb(a)},dispose:function(){this.Kd.D();this.j.dispose();if(this.q.length){var a=
this.q.length,b=this.q.reduce(function(a,b){return a+b.Q},0);window.console.warn("Some views were not or are not yet disposed ("+a+" views, "+b+" references).")}}};b.prototype=c.a.extend({},m.prototype,{get size(){return this.size},addEntries:b.prototype.Nd,dispose:b.prototype.dispose,addOrUpdateEntries:b.prototype.Pd,openView:b.prototype.ma,removeEntries:b.prototype.ve,replaceEntries:b.prototype.xe,streamValues:b.prototype.ca,updateEntries:b.prototype.rb},b.prototype);var B=g.pureComputed(function(){return!1});
d.prototype={get La(){return B},get Na(){return this.k},get Qa(){return g.pureComputed(function(){return{}})},get Y(){return this.b.Y},get size(){return this.S},get values(){return this.b.values},dispose:function(){this.H.forEach(function(a){a.D()})}};d.prototype=c.a.extend({get dirty(){return this.La},get filteredSize(){return this.Na},get metadata(){return this.Qa},get observables(){return this.Y},get size(){return this.size},get values(){return this.values},dispose:d.prototype.dispose},d.prototype);
return b}({});l=function(){function b(a,b,d){d=d||new m(a);var p={};e.call(this,d,function(a){if(!u(p,a))throw Error("No known entry with id `"+a+"`.");return p[a].value});this.Ya=a;this.j=d;this.kc=b;this.d=p;this.S=c.observable(0);this.Fd=c.pureComputed(function(){return this.S()}.bind(this));this.q=[]}function d(a,b,d){var m=c.observable(!1),u=c.observable(!1),e=c.observable({unfilteredSize:a.size.peek(),filteredSize:0}),n=p.Sa(),h=c.observable(),f=c.pureComputed(function(){if(m.peek())return m();
u(!0);m(!0);var d=b.$b().normalize();window.setTimeout(function(){if(!d.Ma(b.$b().normalize()))return m(!1);a.kc.issue(d).then(function(b){var d=[];b.values.reduce(function(a,b){return d.push(b)});h(d);delete b.values;a.S(b.unfilteredSize);e(b)}).then(function(){u(!1);m(!1)},function(){m(!1)})})}),w=c.pureComputed(function(){f();var b=h(),b=p.Sa(b);D?(D=b.map(function(b){a.ic(b);return a.j.G(b)}),n.forEach(function(b){a.lc(b);a.j.D(b)})):(b.forEach(a.ic.bind(a)),n.forEach(a.lc.bind(a)));return n=
b});this.d=w;var D=null;this.A=c.pureComputed(function(){w();D||(D=n.map(a.j.G));return D});this.A.subscribe(function(){return D=null},null,"asleep");this.k=c.pureComputed(function(){return u()});this.wa=c.pureComputed(function(){return e()});this.b=c.pureComputed(function(){return e().filteredSize});this.S=c.pureComputed(function(){return w().size()});this.H=function(){f.dispose();d()}}var c=f,p=r,e=a,m=M,u=k.a.v;b.prototype={get size(){return this.Fd},ic:function(a){var b=this.Ya(a);u(this.d,b)?
(b=this.d[b],++b.Q,b.value=a):this.d[b]={Q:1,value:a}},lc:function(a){a=this.Ya(a);if(!u(this.d,a))throw Error("Assertion error: Value with id `"+a+"` was expected to be referenced.");0===--this.d[a].Q&&delete this.d[a]},ma:function(a){a=(a||function(a){return a})(new w);var b=e.Xa.Hc(a),c=k.m.kb(this.q,function(a){return b.Ma(a.key)});if(c)return c.G().view;a=new d(this,a,function(){return g.D()});var g=new e.fc(b,a,function(){return this.q.splice(this.q.indexOf(g),1)}.bind(this));this.q.push(g);
return a},ca:function(a){a=(a||function(a){return a})(new w);return this.kc.issue(a.$b().normalize())},dispose:function(){this.j.dispose();if(this.q.length){var a=this.q.length,b=this.q.reduce(function(a,b){return a+b.Q},0);window.console.warn("Some views were not or are not yet disposed ("+a+" views, "+b+" references).")}}};b.prototype=k.a.extend({},e.prototype,{get size(){return this.size},dispose:b.prototype.dispose,openView:b.prototype.ma,streamValues:b.prototype.ca},b.prototype);d.prototype=
{get La(){return this.k},get Na(){return this.b},get Qa(){return this.wa},get Y(){return this.A},get size(){return this.S},get values(){return this.d},dispose:function(){this.H()}};d.prototype=k.a.extend({},{get dirty(){return this.La},get filteredSize(){return this.Na},get metadata(){return this.Qa},get observables(){return this.Y},get size(){return this.size},get values(){return this.values},dispose:d.prototype.dispose},d.prototype);return b}({});return function(a){return a}(function(a,d,c,p,e){return{ClientSideDataSource:a,
DefaultObservableStateTransitioner:d,ObservableEntries:c,ServerSideDataSource:p,streams:e}}(v,c,M,l,function(a,d){return{streamArray:function(c){return new d(a.Sa(c))}}}(r,n)))}(G,H,E,z,C);J=function(){return function(x){return x}(function(){function x(k,f){return!!(k.compareDocumentPosition(f)&16)}var v=window.Element,r=v.prototype.webkitMatchesSelector||v.prototype.mozMatchesSelector||v.prototype.msMatchesSelector||v.prototype.matches;return{Bc:function(k,f){for(var q=0;f;){if(f===k)return q;f=
f.parentNode;++q}throw Error("The given node is not part of the subtree.");},Mc:function(k,f){return k===f||x(k,f)},Be:x,element:{Ib:function(k,f){do{if(r.call(k,f))return k;k=k.parentElement}while(k);return null},matches:function(k,f){return r.call(k,f)}}}}())}();K=function(x){var v,r,k;v=function(){function f(c){this.length=function(){return c.length};this.get=function(h){return c[h]}}function q(c){this.length=function(){return c.length()};this.get=function(h){return c.get(h)}}function c(c){this.length=
function(){return c.length};this.get=function(h){return c.get(h)}}return{ie:function(l){if(Array.isArray(l))l=f;else a:switch(typeof l.length){case "function":l=q;break a;case "number":l=c;break a;default:throw Error("Unsupported type: The `forEach` value must be an array or a list with a `length` property or method.");}return l}}}();r=function(f){function q(c){if("function"===typeof c)return c;if("string"===typeof c)return function(e){return e[c]};throw Error("A repeat-binding must specify and indexedBy of type string (property name) or function (custom selector).");
}function c(c){f.cleanNode(c);window.setTimeout(function(){f.cleanNode(c)},1);var e=c.cloneNode(!0);e.removeAttribute("data-bind");"string"===typeof c.getAttribute("data-repeat-bind")&&(e.setAttribute("data-bind",c.getAttribute("data-repeat-bind")),e.removeAttribute("data-repeat-bind"));return e}var l=window.document;return function(h,e){var a=h.getAttribute("data-bind");this.J=q(e.indexedBy);this.le=e.as||"$item";this.he=e.at||"$index";this.Qd=!1!==e.allowElementRecycling;this.qc=!0===e.allowDeviation;
this.ye=e.onDeviation||function(){};this.ze=e.onSynchronization||function(){};this.parent=h.parentNode;this.mb=l.createComment("[repeat("+a+")");this.Lb=l.createComment("repeat("+a+")]");this.ke=c(h);this.$d=this.mb}}(x);k=function(){function f(){this.ab=0;this.M={}}f.prototype={add:function(f,c){if(Object.prototype.hasOwnProperty.call(this.M,f))throw Error("Key `"+f+"` is already taken.");++this.ab;this.M[f]=c},get:function(f){return this.M[f]},remove:function(f){if(!Object.prototype.hasOwnProperty.call(this.M,
f))throw Error("No entry for key  `"+f+"` present.");delete this.M[f];--this.ab},clear:function(){this.M={};this.ab=0},get size(){return this.ab},forEach:function(f){for(var c in this.M)Object.prototype.hasOwnProperty.call(this.M,c)&&f(c,this.M[c])}};return f}();k=function(f,k){function c(a,c){this.element=a;this.Td=c}function l(a,c,e,f){this.index=a;this.item=c;this.id=e;this.Wc=f}var h=window.requestAnimationFrame.bind(window),e=window.cancelAnimationFrame.bind(window);return function(a,n){function M(){w((new Date).getTime()+
40)}function w(a){for(;b();)if(++Q,(new Date).getTime()>a){S();Y=h(M);return}g()}function b(){if(Q<T.length()){var b=Q,g=T.get(Q),p=b?y(T.get(b-1)):null,e=y(g),u=U.get(e);if(u)if(u.element.style.display="",u.Td[B](b),b=z.get(e))z.remove(e),aa.insertBefore(b,O.nextSibling),O=b;else{for(;u.element!==O.nextSibling;)m(O.nextSibling);O=u.element}else R.push(new l(b,g,e,p))}else if(N)if(R.length)a.Qd&&N.length?(e=N.pop(),u=R.shift(),e.style.display="",D(e,u.Wc),b=f.contextFor(e),b[t](u.item),b[B](u.index),
U.add(u.id,new c(e,b))):(e=R.shift(),u=x.cloneNode(!0),b={},b[B]=f.observable(e.index),b[t]=f.observable(e.item),b=n.extend(b),U.add(e.id,new c(u,b)),f.applyBindings(b,u),D(u,e.Wc),++ba);else{for(;N.length;)f.removeNode(N.pop());return}else d();return!0}function d(){N=[];for(var a=T.length()-R.length,a=ba-z.size-a;0<a;--a)m(O.nextSibling);z.forEach(function(a,b){U.remove(a);N.push(b)});z.clear()}function g(){for(var a=0;a<N.length;++a)f.removeNode(N[a]);ba=T.length();p();ma()}function p(){Q=0;N=z=
R=O=null}function D(a,b){var c=(b?U.get(b).element:r).nextSibling;aa.insertBefore(a,c)}function m(a){z.add(y(f.contextFor(a)[t]()),a);a.style.display="none";aa.insertBefore(a,v)}function u(){if(Y){e(Y);Y=null;for(var a=0;null!==N&&a<N.length;++a){var b=N[a];U.add(y(f.contextFor(b)[t]()),new c(b,f.contextFor(b)))}p()}}var y=a.J,t=a.le,B=a.he,F=a.qc,S=a.ye,ma=a.ze,aa=a.parent,r=a.mb,v=a.Lb,x=a.ke,T=null,U=new k,ba=0,Q=0,O=null,Y=null,R=null,z=null,N=null;this.Ae=function(c){u();Q=0;O=a.mb;R=[];z=new k;
T=c;if(F)w((new Date).getTime()+15);else{for(;b();)++Q;g()}};this.Md=u}}(x,k);return function(f){return f}(function(f,k,c,l){return f.bindingHandlers.indexedRepeat={init:function(h,e,a,n,M){e=e();a=new c(h,e);n=a.$d;a.parent.replaceChild(a.Lb,h);a.parent.insertBefore(a.mb,a.Lb);var w=new l(a,M);a.qc&&f.utils.domNodeDisposal.addDisposeCallback(n,function(){w.Md()});var b=e.forEach,d=k.ie(b());return{controlsDescendantBindings:!0,subscribable:f.computed(function(){var a=new d(b());f.ignoreDependencies(w.Ae,
w,[a])},null,{disposeWhenNodeIsRemoved:n})}}}}(x,v,r,k))}(C);L=function(x,v,r,k,f,q,c,l){var h,e;h=function(){var a=/^[a-z]+(-[a-z]+)*$/,c=/\x3c!--(?:(before|after):)?([a-z]+(-[a-z]+)*)--\x3e*/g;return function(e){function f(a,c){c=c||function(a,b){return b+a};return function(e){var t=b(e,a);return{O:function(a,e){var m=e?a:null,p=(e=e?e:a)?m:null,y=e,m=c;p&&g(p,2);d(y);p=p?b(p,3)+y+b(p,4):y;m=m(t,p);h=h.replace(t,m)}}}}function b(a,b){function c(b){if(p[a]!==b)throw Error("Operation is not defined for placeholder `"+
a+"`.");}if(!p[a])throw Error("Unknown placeholder id `"+a+"`.");var d="\x3c!--"+a+"--\x3e",g="\x3c!--before:"+a+"--\x3e",e="\x3c!--after:"+a+"--\x3e";switch(b){case 1:return c(1),delete p[a],d;case 2:return c(1),d;case 3:return c(2),g;case 4:return c(2),e;case 5:case 6:return 1===p[a]?d:5===b?e:g}throw Error("Assertion error. Unkown operator: `"+b+"`");}function d(a){for(var b;b=c.exec(a);){var d=b[1],e="before"===d;b=b[2];if(d&&1!==(a.match(new RegExp((e?"after":"before")+":"+b,"g"))||[]).length)throw Error("Multiple or unmatched before-/after-placeholders for placeholder id `"+
b+"`.");d&&!e||g(b,d?2:1)}}function g(b,c){if(!a.test(b))throw Error("Invalid placeholder id `"+b+"`");if(p[b])throw Error("Placeholder id `"+b+"` is already taken.");p[b]=c}var p={},h=e;d(h);this.Pb=f(2);this.sc=f(3);this.Eb=f(4,function(a,b){return a+b});this.replace=function(a){return{bc:f(1,function(a,b){return b})(a).O}};this.pb=function(a){return{append:f(5)(a).O,Xb:f(6,function(a,b){return a+b})(a).O}};this.Vd=function(){return h.replace(c,"")}}}();v=function(a,c){function e(a){return null===
a?"":""+a}function f(b,c,g){this.id=this.id=g.id;this.property=this.C=g.property||this.id;this.userDefined=this.sb=!1!==g.sb;this.T=!g.hidden;(function(){return this.T}).bind(this);this.visible=this.visible;this.label=this.label=a.observable(g.label);this.width=this.width=a.observable(g.width);this.widthInPixels=this.qa=function(){var a=this.width();if("px"!==a.substr(-2))throw Error("The only currently supported column width values are absolute pixel lengths.");return parseInt(a.substring(0,a.length-
2),10)}.bind(this);this.za=a.observableArray(g.headerClasses||g.classes||[]);this.tc=a.observableArray(g.cellClasses||g.classes||[]);this.Gc=a.observableArray(g.footerClasses||g.classes||[]);this.headerClasses=this.za;this.cellClasses=this.tc;this.footerClasses=this.Gc;this.metadata=this.Qa=c.columnMetadataSupplier?c.columnMetadataSupplier(b.Ud,g):{};this.renderValue=this.Ba=c.cellValueRenderer?c.cellValueRenderer.bind(void 0,this):e;this.b=function(a){this.Ba=a(this.Ba)}.bind(this);this.Wb=function(a){a=
a({W:this.ua,update:this.oc});if(!a||!a.W||!a.update)throw Error("The cell value binding must define an `init` as well as an `update` method.");this.ua=a.W;this.oc=a.update}.bind(this);this.overrideValueRendering=this.b;this.overrideValueBinding=this.Wb}a.bindingHandlers.__gridColumn={init:function(){},update:function(a,c){var g=c();a.style.width=g.width()}};return{W:function(a){a.replace("columns").bc(c)},i:function(b,c,g){function e(a){a=new f(g,c,a);c.columnInitializer&&c.columnInitializer(a);
return a}var n=[];this.all=this.all=a.observableArray(b.columns.map(e));this.byId=this.ha=function(a){var b=this.hd(a);if(!b)throw Error("The column id `"+a+"` is undefined.");return b}.bind(this);this.tryById=this.hd=function(a){var b=this.all().filter(function(b){return b.id===a});if(1<b.length)throw Error("Assertion error: Multiple columns with id `"+a+"`.");return b[0]}.bind(this);var m=a.observable(this.all().filter(function(a){return a.T}));this.displayed=this.u=function(){return m()};this.show=
function(a){this.Ua(function(b){return b.T||b===a})}.bind(this);this.ge=function(a){this.Ua(function(b){return b.T&&b!==a})}.bind(this);this.show=this.show;this.hide=this.ge;this.reorder=this.we=function(a){var b=this.all().slice(),c=[];a.forEach(function(a){b.splice(b.indexOf(a),1);c.push(a)});if(b.length)throw Error("The new column order must contain all columns.");this.all(c);this.Ua(function(a){return a.T})}.bind(this);this.showOnlyThoseWhich=this.Ua=function(a){var b=this.all();a=b.filter(a);
b.forEach(function(a){a.T=!1});a.forEach(function(a){a.T=!0});m(a)}.bind(this);this.combinedWidth=this.wc=a.pureComputed(function(){for(var a=0,b=this.u(),c=0;c<b.length;++c)a+=b[c].qa();return a}.bind(this));this.add=this.add=function(a){a=e({sb:!1,id:"$"+a.id,label:a.label,hidden:a.hidden||!1,width:a.width});this.all.unshift(a);this.Ua(function(a){return a.T});return a}.bind(this);this.ea=function(){n.forEach(function(a){a.dispose()})}}}}(l,'<colgroup class="ko-grid-colgroup">\n    <col class="ko-grid-col" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\' }" data-repeat-bind="__gridColumn: column()">\n</colgroup>');
x=function(a,c){function e(b){var c=b.defaultPrevented;a.a.extend(this,b,{preventDefault:function(){c=!0;return b.preventDefault()},k:function(){c=!0},get defaultPrevented(){return c}})}function f(a,c){this.Ob=a;this.dd=c}return function(b){function d(b,d,e){function f(a){a=Array.prototype.slice.call(b.querySelectorAll(a)).filter(function(a){return c.Mc(a,d.target)});return a.length?a[a.length-1]:void 0}var h=c.Bc.bind(null,b),t=g.map(function(a){var c=a.dd?f(a.dd):b;return{Ob:a.Ob,match:c,depth:c?
h(c):-1}}).filter(function(a){return!!a.match});a.m.lb(t,function(a,b){return b.depth-a.depth});t.forEach(function(a){a.Ob.apply(b,e)})}b=b||function(a){return[a]};var g=[];this.Aa=function(a,b){var c=1<arguments.length?a:void 0;b=1<arguments.length?b:a;g.push(new f(b,c))};this.bd=function(a){return{Cc:function(g){var m=c.element.Ib(g.target,a);m&&(g=new e(g),d(m,g,b(g,m)))}}}}}(f,x);r=function(a,c,e,f,b){function d(a){this.R(function(b){b();this.ta=a.element.querySelector(".ko-grid-tbody")}.bind(this));
return function(){this.ta=null}.bind(this)}function g(){var b=[],c={};this.rows=this.rows=c;c.u=a.observableArray([]);c.displayed=c.u;c.fb=a.observable(!1).extend({Pe:"always"});c.displayedSynchronized=c.fb;c.__handleDisplayedRowsDeviate=function(){this.rows.fb(!1)}.bind(this);c.__handleDisplayedRowsSynchronized=function(){this.rows.fb(!0)}.bind(this);var d=this.view;c.__dirty=d.La;b.push(d.Y.subscribe(function(a){c.u(a)}));c.u(d.Y());var g=[];c.__classify=function(a){var b=g.map(function(b){return b(a)});
return Array.prototype.concat.apply([],b)};c.je=function(a){g.push(a)};c.installClassifier=c.je;return function(){b.forEach(function(a){a.dispose()})}}function p(){function b(c,d){var g=a.contextFor(d),e=g.row(),g=g.column();return[c,e[g.C],e,g]}function c(a){return function(b){a.bd(".ko-grid-cell").Cc(b);return!b.defaultPrevented}}var d=new f(b),g=new f(b),e=new f(b),m=new f(b);this.te=d.Aa.bind(d);this.qe=g.Aa.bind(g);this.se=e.Aa.bind(e);this.re=m.Aa.bind(m);this["onCellMouseDown "]=this.te;this["onCellClick "]=
this.qe;this["onCellDoubleClick "]=this.se;this["onCellContextMenu "]=this.re;this.R(function(a){a();this.ta.addEventListener("mousedown",c(d));this.ta.addEventListener("click",c(g));this.ta.addEventListener("dblclick",c(e));this.ta.addEventListener("contextmenu",c(m))}.bind(this));return function(){}}function h(b){function c(a,b){for(var d=a.firstChild,g=-1;d;){if(d.nodeType===u&&"TD"===d.tagName&&0<=(" "+d.className+" ").indexOf("td")&&++g===b)return d;d=d.nextSibling}throw Error("Column `"+b+"` does not exist.");
}var d=function(a){for(var b=this.ta.firstChild,c=-1;b;){if(b.nodeType===u&&"TR"===b.tagName&&0<=(" "+b.className+" ").indexOf("ko-grid-row")&&++c===a)return b;b=b.nextSibling}throw Error("Row `"+a+"` does not exist.");}.bind(this);this.lookupCell=this.oe=function(g,e){var p=this.rows.u().indexOf(g),f=b.g.u().indexOf(e),h=c(d(p),f);return{element:h,hijack:function(b){function c(){for(h.removeAttribute("data-hijacked");h.firstChild;)a.removeNode(h.firstChild);var b=a.contextFor(h).row();e.ua?e.ua(h,
b,e):h.appendChild(y.createTextNode(""));m(h,b(),e)}if(h.hasAttribute("data-hijacked"))throw Error("Illegal state: This cell is already hijacked.");for(;h.firstChild;)a.removeNode(h.firstChild);h.className+=" "+b;h.setAttribute("data-hijacked","hijacked "+b);return{dispose:c,release:c}}}}.bind(this);return function(){}}function m(b,c,d){var g=c[d.C],e=g&&a.unwrap(g),m=b.getAttribute("data-hijacked"),p=d.tc.peek().join(" ");b.className="ko-grid-td ko-grid-cell "+p+(m?" "+m:"");m||(d.ua?d.oc(b,g,c,
d):b.lastChild.nodeValue=d.Ba(e))}var u=window.Node.ELEMENT_NODE,y=window.document;a.bindingHandlers.__gridRow={init:function(){},update:function(a,b){var c=b(),d=c.classify,g=c.row(),c=1===c.index()%2?["ko-grid-tr","ko-grid-row","alternate"]:["ko-grid-tr","ko-grid-row"],d=d(g);a.className=c.concat(d).join(" ")}};a.bindingHandlers.__gridCell={init:function(b,c){for(var d=c(),g=d.row,d=d.column,e=d();b.firstChild;)a.removeNode(b.firstChild);e.ua?e.ua(b,g,d):b.appendChild(y.createTextNode(""));return{controlsDescendantBindings:!0}},
update:function(a,b){var c=b(),d=c.row(),c=c.column.peek();m(a,d,c)}};return{W:function(a){a.replace("body").bc("body",b);a.pb("table").Xb("<div class=\"ko-grid-load-indicator\" data-bind=\"style: { display: data.rows.__dirty() ? 'block' : 'none' }\">Loading&hellip;</div>")},i:function(b,c,m){var f=[];this.source=b.dataSource;this.valueSelector=this.Wa=b.valueSelector||c.valueSelector||function(a){return a};this.observableValueSelector=this.Sb=b.observableValueSelector||c.observableValueSelector||
this.Wa;this.predicates=this.s=a.observableArray(b.filters||[]);this.predicate=this.h=a.pureComputed(function(){return e.s.va(this.s().map(a.unwrap))}.bind(this));this.comparator=this.n=a.observable(e.U.Kc);this.offset=this.offset=a.observable(0);this.limit=this.l=a.observable(Number.POSITIVE_INFINITY);b=this.source.ma(function(a){return a.N(this.h).ba(this.n).Tb(this.offset).Qb(this.l)}.bind(this));f.push(b.dispose.bind(b));this.view=this.view=b;this.Ia=function(){};this.R=function(a){var b=this.Ia;
this.Ia=function(){a(b)}}.bind(this);f.push(d.call(this,m));f.push(g.call(this));f.push(p.call(this));f.push(h.call(this,m));this.ea=function(){f.forEach(function(a){a()})}}}}(l,f,r,x,'<tbody class="ko-grid-tbody" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n    <tr class="ko-grid-tr ko-grid-row"\n        data-bind="indexedRepeat: {\n            forEach: data.rows.displayed,\n            indexedBy: function(r) { return grid.data.observableValueSelector(ko.unwrap(r[grid.primaryKey])); },\n            as: \'row\',\n            at: \'rowIndex\',\n            allowDeviation: true,\n            onDeviation: data.rows.__handleDisplayedRowsDeviate,\n            onSynchronization: data.rows.__handleDisplayedRowsSynchronized }"\n        data-repeat-bind="__gridRow: { classify: grid.data.rows.__classify, row: row, index: rowIndex }">\n\n        <td data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\', allowElementRecycling: false }"\n            data-repeat-bind="__gridCell: { row: row, column: column }"></td>\n    </tr>\n</tbody>');
x=function(a,c,e,f){function b(b){this.id=this.id="column-header-"+b.id;this.element=this.element=a.observable(null);this.rowSpan=this.rowSpan=a.observable(1);this.columnSpan=this.ja=a.observable(1);this.label=this.label=b.label;this.column=this.ia=b;this.columns=this.g=[b];this.Ab=function(a){this.rowSpan(a)}.bind(this)}function d(b){this.id=this.id="column-group-header-"+(b.id||"@__"+ ++y);this.element=this.element=a.observable(null);this.Ld=b;this.rowSpan=this.rowSpan=a.observable(b.height);this.columnSpan=
this.ja=a.observable(1);this.label=this.label=a.observable(b.label);this.columns=this.g=[];this.Ab=function(a){this.g=[a];this.ja(1)}.bind(this)}function g(a){function b(a){a.Wd.forEach(function(b){var c=d[b];if(!c)d[b]=a;else if(c!==a)throw Error("Column `"+b+"` is element of column group `"+c.label+"` as well as `"+a.label+"`.");});a.eb&&b(a.eb)}var d={};c.m.Nb(a,p.bind(this,null)).forEach(function(a){b(a)});return d}function p(a,b){var d=h(b),g=b.elements.filter(function(a){return"string"!==typeof a}),
e=b.elements.filter(function(a){return"string"===typeof a}),d={id:b.id,label:b.label,eb:a,depth:a?a.depth+1:0,height:a?a.Vc-d:1,Vc:d,Wd:e};return g.length?c.m.Nb(g,p.bind(this,d)):d}function h(a){a=a.elements.filter(function(a){return"string"!==typeof a});return 1+Math.max.apply(Math,[0].concat(a.map(h)))}var m=window.document,u=window.Node,y=0;a.bindingHandlers.__gridHeader={init:function(b,c){var d=c()();d.element(b);a.utils.domNodeDisposal.addDisposeCallback(b,function(){d.element(null)});for(var g=
b.firstChild;g;){var e=g;e.nodeType===u.TEXT_NODE&&a.removeNode(e);g=g.nextSibling}b.insertBefore(m.createTextNode(""),b.firstChild);return{controlsDescendantBindings:!0}},update:function(a,b){var c=b()(),d=c.id.replace(/[\s]/g,"_");a.className=c.ia?"ko-grid-th ko-grid-column-header "+d+" "+c.ia.za().join(" "):"ko-grid-th ko-grid-column-group-header "+d;d=c.g.map(function(a){return a.qa()}).reduce(function(a,b){return a+b})+"px";a.style.width=d;a.style.maxWidth=d;a.rowSpan=c.rowSpan();a.colSpan=c.ja();
for(d=a.firstChild;d.nodeType!==u.TEXT_NODE;)d=d.nextSibling;d.nodeValue=c.label()}};return{W:function(a){a.replace("head").bc(f)},i:function(c,m,f){function p(a,b,c){if(!a)return[];if(b[a.depth]&&b[a.depth].Ld===a){var g=a;do{var e=b[g.depth];e.g.push(c);e.ja(e.ja()+1);g=g.eb}while(g);return[]}b.length=a.depth;var g=p(a.eb,b,c),m=e=a.depth;a=h(u,new d(a));a.Ab(c);g[e]=b[m]=a;return g}function h(a,b){var c=b.id;return a[c]=a[c]||b}var n=g(c.columnGroups||[]),u={},y={},w=[];this.__rows=this.Bb=a.computed(function(){var c=
f.g.u(),d=0;c.forEach(function(a){a=n[a.id];d=Math.max(d,a?a.depth+a.Vc:0)});w.length=d+1;for(var g=0;g<w.length;++g)w[g]=w[g]||a.observableArray(),w[g].__rowId="header-row-"+g,w[g].valueWillMutate(),w[g]().length=0;var e=[];c.forEach(function(a){var c=n[a.id],g=c?c.depth+c.height:0;e.length=g;var m=h(y,new b(a));m.Ab(d-g+1);w[g]().push(m);a=p(c,e,a);for(c=0;c<a.length;++c)a[c]&&w[c]().push(a[c])});w.forEach(function(a){a.valueHasMutated()});return w});this.all=this.all=a.computed(function(){var a=
[];this.Bb().forEach(function(b){Array.prototype.push.apply(a,b())});return a}.bind(this));this.forColumn=this.be=function(a){a="column-header-"+a.id;if(!Object.prototype.hasOwnProperty.call(y,a))throw Error("Es existiert kein Header f\u00fcr die gegebene Spalte.");return y[a]};var l=new e(function(b,c){return[b,a.contextFor(c).header()]});this.__handleClick=function(a,b){l.bd(".ko-grid-column-header, .ko-grid-column-group-header").Cc(b);return!b.defaultPrevented};this.Tc=l.Aa.bind(l);this.Ub=function(a,
c){function d(a,g){g instanceof b&&c.apply(this,arguments)}var g=1<arguments.length;c=g?c:a;l.Aa.apply(l,g?[a,d]:[d])};this.onHeaderClick=this.Tc;this.onColumnHeaderClick=this.Ub;this.ea=function(){this.Bb.dispose();this.all.dispose()}.bind(this)}}}(l,f,x,'<thead class="ko-grid-thead" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n    \x3c!--before:headers--\x3e\n    <tr class="ko-grid-tr ko-grid-headers"\n        data-bind="indexedRepeat: { forEach: headers.__rows, indexedBy: \'__rowId\', as: \'headerRow\' }"\n        data-repeat-bind="click: headers.__handleClick">\n\n        <th class="ko-grid-th"\n            data-bind="indexedRepeat: { forEach: headerRow(), indexedBy: \'id\', as: \'header\' }"\n            data-repeat-bind="__gridHeader: header"></th>\n    </tr>\n    \x3c!--after:headers--\x3e\n</thead>');
e=function(a,c,e,f,b){a=a.bindingHandlers.grid=a.bindingHandlers.grid||{};return a.core=a.core||{columns:c,data:e,headers:f,layout:b}}(l,v,r,x,function(a){function c(a,b,e,h){var m=a.element,n=m.querySelector(".ko-grid-table-scroller-padding"),y=m.querySelector(".ko-grid-table-scroller"),t=m.querySelector(".ko-grid-thead"),l=m.querySelector(".ko-grid-tfoot"),k=!1;return function(a){if(!k)try{b(k=!0);var c=y.scrollLeft;a&&a();e.forEach(function(a){a.call(m)});f(m,function(){n.style.borderTopWidth=
Math.max(t.clientHeight,0)+"px";n.style.borderBottomWidth=Math.max(l.clientHeight,0)+"px"});y.scrollLeft=c;h.forEach(function(a){a.call(m)})}finally{b(!1),k=!1}}}function e(a){a=a.element;var b=a.querySelector(".ko-grid-table-scroller"),c=a.querySelector(".ko-grid-thead"),f=a.querySelector(".ko-grid-tfoot");b.addEventListener("scroll",function(){var a=-b.scrollLeft+"px";c.style.left=a;f.style.left=a})}function f(a,c){if(a.offsetWidth&&a.offsetHeight)c();else{var e=a.parentNode,h=b.createComment("placeholder");
e.replaceChild(h,a);var m=a.style.position;a.style.position="absolute";a.style.visibility="hidden";b.body.appendChild(a);try{c()}finally{e.replaceChild(a,h),a.style.position=m,a.style.visibility="visible"}}}var b=window.document;return{W:function(){},i:function(d,g,f){function h(a){a&&a()}var m=a.observable(!1);this.recalculate=this.oa=function(a){h(a)};var u=a.computed(function(){m()||(f.g.u().forEach(function(a){a.width()}),h())}),y=[],w=[];this.Hb=function(a){y.push(a)};this.Fb=function(a){w.push(a)};
this.beforeRelayout=this.Hb;this.afterRelayout=this.Fb;this.Ia=function(){e.call(this,f);h=c(f,m,y,w);f.jb(h)}.bind(this);this.determineCellDimensions=this.Zd=function(a){var c=b.createElement("div");c.className="ko-grid-td ko-grid-cell";c.appendChild("string"===typeof a?b.createTextNode(a):a);c.style.position="absolute";c.style.visibility="hidden";b.body.appendChild(c);try{return{width:c.offsetWidth,height:c.offsetHeight}}finally{b.body.removeChild(c)}};this.ea=function(){u.dispose()}}}}(l));(function(a,
c){function e(a,b){if(c.a.v(d,a))throw Error("Extension id or alias already in use: `"+a+"`.");d[a]=b;b.yb.push(a);return b}function f(a,b){this.Xc=a;this.I=b.I||[];this.X=b.X||function(){};this.i=b.i;this.yb=[]}var b=a.bindingHandlers.grid=a.bindingHandlers.grid||{},d=b.extensions=b.extensions||{};b.r=function(a,b){return e(a,new f(a,b))};b.hb=function(a){if(!c.a.v(d,a))throw Error("No known extension id or alias: `"+a+"`.");return d[a]};b.t=function(a,c){return e(a,b.hb(c))};b.zc=function(a,c){var d=
b.hb(c);a.forEach(function(a){return e(a,d)});return d};f.prototype={get me(){return this.yb.slice()},Ec:function(a,b){var c=this.jc(a,function(a){throw Error("Conflicting configurations "+a.map(function(a){return"`"+a+"`"}).join(", ")+" (configuration: `"+b+"`).");});if(!c)throw Error("The extension `"+this.Xc+"` must be configured (configuration: `"+b+"`)");return a[c]},Ee:function(a){var b=this.jc(a,function(a){throw Error("Conflicting binding values "+a.map(function(a){return"`"+a+"`"}).join(", ")+
".");});return a[b]},jc:function(a,b){var d=this.yb.filter(function(b){return c.a.v(a,b)});1<d.length&&b(d);return d[0]}};return d})(l,f);return function(a){return a}(function(a,c,f){function w(b,c){function d(){var a=u[b];c(a.Yd,a.De,a.ae)}u[b]?d():a([b],function(a){function c(d){d=g.hb(d);var m=d.Xc,h=d.Ec(p,b);if(!f.m.contains(n,m)){if(f.m.contains(w,m))throw Error("Dependency-Cycle: .. -> "+w.join(" -> ")+" -> "+m+" -> ..");w.push(m);d.I.forEach(c);d.X(e,h,a);if(w.pop()!==m)throw Error("Assertion error.");
n.push(m)}}var e=new h('<div class="ko-grid">\n    \x3c!--before:grid--\x3e\n    <div class="ko-grid-table-container">\n        \x3c!--before:table--\x3e\n        <div class="ko-grid-table-scroller-padding">\n            <div class="ko-grid-table-scroller">\n                <table class="ko-grid-table" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n                    \x3c!--columns--\x3e\n                    \x3c!--head--\x3e\n                    <tfoot class="ko-grid-tfoot" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\x3c!--tfoot--\x3e</tfoot>\n                    \x3c!--body--\x3e\n                </table>\n            </div>\n        </div>\n        \x3c!--after:table--\x3e\n    </div>\n    \x3c!--after:grid--\x3e\n</div>');
l.forEach(function(b){b.W(e,a)});var p=a.extensions,n=[],w=[];Object.keys(p).forEach(c);var t="ko-grid-template-"+b;m.b(t,e.Vd());u[b]={Yd:a,De:t,ae:n};d()})}function b(a,b){this.Ud=b;this.primaryKey=this.b=b.primaryKey;this.rootElement=this.aa=a;this.element=this.element=null;this.ea=function(){};this.R=function(){};this.jb=function(a){if(!this.R)throw Error("Illegal state: postApplyBindings-callbacks have been called already.");var b=this.R;this.R=function(){b();a()}}.bind(this)}var d=window.document,
g=c.bindingHandlers.grid=c.bindingHandlers.grid||{},p=["columns","headers","data","layout"],l=p.map(function(a){return e[a]}),m=new c.nativeTemplateEngine;m.b=function(a,b){var c=d.createElement("script");c.id=a;c.type="text/html";c.text=b;d.querySelector("head").appendChild(c)};c.bindingHandlers.grid.init=function(a,d,h,u,l){var k=d(),q=k.config;w(q,function(d,h,u){var w=[],t=new b(a,k);c.utils.domNodeDisposal.addDisposeCallback(a,function(){t.ea();w.forEach(function(a){a()})});f.a.V(e,function(a,
b){var c=new b.i(k,d,t);t[a]=c;t.g=t.columns;t.headers=t.headers;t.data=t.data;t.ka=t.layout;"function"===typeof c.ea&&w.push(c.ea.bind(c))});var r=d.extensions,v=k.extensions||{},D=t.extensions=t.f={};for(u.forEach(function(a){a=g.hb(a);var b=a.Ec(r,q),c=a.Ee(v)||{};if((!1!==b.enabled||!0===c.enabled)&&!1!==c.enabled){a.I.forEach(function(a){if(!D[a])throw Error("Dependency '"+a+"' was disabled.");});var e=new a.i(c,b,t,k,d);a.me.forEach(function(a){D[a]=e});"function"===typeof e.dispose&&w.push(e.dispose.bind(e))}});a.firstChild;)c.removeNode(a.firstChild);
u=l.createChildContext(t,"grid");c.renderTemplate(h,u,{templateEngine:m},a);var B=a.querySelector(".ko-grid");t.element=B;t.element=B;f.a.V(r,function(a){B.className+=" with-"+f.Ca.xc(a)});p.forEach(function(a){t[a].Ia&&t[a].Ia()});t.R();t.R=null});return{controlsDescendantBindings:!0}};c.bindingHandlers.grid.update=function(){};var u={};c.bindingHandlers._gridWidth={init:function(){},update:function(a,b){var c=b();a.style.width=c;a.style.maxWidth=c}};return g}(X,l,f))}(J,G,H,E,z,I,K,C);ca=function(x,
v,r,k,f,q,c,l,h){return function(c){return c}(function(c,a,f){function h(a,b){return a.data.source.ca(function(b){return b.N(a.data.h)}).then(function(c){var g={count:0};b.forEach(function(a){g[a]={minimum:Number.POSITIVE_INFINITY,maximum:Number.NEGATIVE_INFINITY,sum:0}});return c.reduce(function(c,d){++g.count;b.forEach(function(b){var c=g[b];b=a.data.Wa(d[b]);c.minimum=Math.min(c.minimum,b);c.maximum=Math.max(c.maximum,b);c.sum+=b});return c},g)})}c="ko-grid-aggregate".substr(0,-1).substr(0,-1);
f.r(c,{X:function(a){a.pb("tfoot").Xb("aggregates",'<tr class="ko-grid-tr ko-grid-aggregate-row" data-bind="indexedRepeat: {  forEach: extensions.aggregate.__aggregateRows,  indexedBy: \'id\',  as: \'aggregateRow\'}">  <td class="ko-grid-tf ko-grid-aggregate"    data-bind="indexedRepeat: {      forEach: columns.displayed,      indexedBy: \'id\',      as: \'column\'    }"    data-repeat-bind="      __gridAggregate: aggregateRow()[column().id],      _gridWidth: column().width()"></td></tr>')},i:function(c,
b,d){var g=a.observable([]);this.__aggregateRows=g;if(Array.isArray(c)){var e=[];c.forEach(function(a){Object.keys(a).forEach(function(a){a=d.g.ha(a).C;0>e.indexOf(a)&&e.push(a)})});var f=b.statisticsComputer||h,m=0,u=a.computed(function(){d.data.h();d.data.view.values();return f(d,e).then(function(a){var b=a.count;g(c.map(function(c){var g={id:""+ ++m};d.g.u().forEach(function(d){var e=d.id,f=d.C,h=c[e];if(h){if(b)if(f="average"===h?a[f].sum/b:a[f][h],1<=Math.abs(f))f=f.toLocaleString();else var m=
-Math.floor(Math.log(f)/Math.log(10)),f=f.toLocaleString(void 0,{maximumFractionDigits:m+1});else f="N/A";d={ia:d,Gb:h,value:f}}else d={ia:d};g[e]=d});return g}));d.ka.oa()})});this.dispose=function(){u.dispose()}}}});a.bindingHandlers.__gridAggregate={init:function(c){for(;c.firstChild;)a.removeNode(c.firstChild);c.appendChild(window.document.createTextNode(""));return{controlsDescendantBindings:!0}},update:function(a,b){var c=b();a.className=["ko-grid-tf ko-grid-aggregate"+(c.Gb?" "+c.Gb:"")].concat(c.ia.Gc()).join(" ");
a.firstChild.nodeValue=c.Gb?c.value:""}};return f.t("aggregate",c)}({},h,q))}(J,G,H,E,z,L,I,K,C);V=function(x,v,r,k,f,q){return function(c){return c}(function(c,f){f.r("ko-grid-column-sizing",{i:function(){this.isResizable=this.Pa=function(c){return c.sb}}});return f.t("columnSizing","ko-grid-column-sizing")}({},q))}(J,G,H,E,z,L,I,K,C);Z=function(x,v,r,k,f,q,c,l,h,e){return function(a){return a}(function(a,c,e,f){var b=window.document,d=window.requestAnimationFrame.bind(window),g=window.cancelAnimationFrame.bind(window);
f.r("ko-grid-column-resizing",{I:["ko-grid-column-sizing"],i:function(a,f,h){function u(a){a.forEach(function(a){!t[a.id]&&a.g.filter(l).length&&(t[a.id]=a.element.subscribe(function(a){if(a){var c=b.createElement("div");c.classList.add("ko-grid-column-resizer");a.appendChild(c)}}))})}var l=h.f["ko-grid-column-sizing"].Pa,t={},k=h.headers.all.subscribe(u);u(h.headers.all());var w=!1;this.isResizeInProgress=this.Nc=function(){return w};h.aa.addEventListener("mousedown",function(a){function f(){for(var a=
q+x-B,a=Math.max(0,a-10*k.length),b=0;b<k.length;++b){var c=Math.round(r[b]*a);k[b].width(10+c+"px");a-=c}}function p(b){x=b.pageX;z&&g(z);z=d(f);a.preventDefault()}function u(){z&&g(z);b.removeEventListener("mousemove",p);b.removeEventListener("mouseup",u);b.body.removeChild(t);a.target.classList.remove("active");w=!1;h.ka.oa()}if(e.element.matches(a.target,".ko-grid-column-resizer")){a.preventDefault();var t=b.createElement("div");t.id="ko-grid-column-resize-in-progress";b.body.appendChild(t);a.target.classList.add("active");
w=!0;for(var k=c.contextFor(a.target).header().g.filter(l),q=0,r=[],v=k.length-1;0<=v;--v){var D=k[v].qa(),q=q+D;r.unshift(D/q)}var B=a.pageX,x=B,z=null;b.addEventListener("mousemove",p);b.addEventListener("mouseup",u)}},!0);h.aa.addEventListener("click",function(a){e.element.matches(a.target,".ko-grid-column-resizer")&&a.preventDefault()},!0);this.dispose=function(){k.dispose();Object.keys(t).forEach(function(a){t[a].dispose()})}}});return f.t("columnResizing","ko-grid-column-resizing")}({},e,x,
h))}(J,G,H,E,z,V,I,K,L,C);P=function(x,v,r,k,f,q,c,l,h){return function(c){return c}(function(c,a,f,h){h.r("ko-grid-view-modes",{i:function(c,b,d){c=function(a){return function(b,c){var e="string"===typeof b?[b]:f.m.Dc(b),h=this.fa();e.forEach(function(b){if(f.m.contains(h,b)===a)throw Error("Mode `"+b+"` is already "+(a?"active":"inactive")+".");});d.ka.oa(function(){this.fa.valueWillMutate();var b=d.element.classList;if(a)Array.prototype.push.apply(h,e),b.add.apply(b,e);else{var p=h.filter(function(a){return!f.m.contains(e,
a)});h.length=0;Array.prototype.push.apply(h,p);b.remove.apply(b,e)}h.sort();c&&c();this.fa.valueHasMutated()}.bind(this))}.bind(this)}.bind(this);this.fa=a.observableArray([]);this.Mb=c(!0);this.Oc=c(!1);this.activeModes=this.fa;this.enver=this.Mb;this.leave=this.Oc}});return h.t("viewModes","ko-grid-view-modes")}({},h,f,q))}(J,G,H,E,z,L,I,K,C);W=function(x,v,r,k,f,q,c,l,h){return function(c){return c}(function(c,a,f){function h(b,c,g){function e(a){return c()+"."+a}var f={};this.read=function(a){return b.read(e(a))};
this.b=function(a,c){return b.b(e(a),c)};this.bind=function(b,c){if(a.a.v(f,b))throw Error("The key `"+b+"` is already bound.");var d=c.subscribe(function(a){g()||this.b(b,a)}.bind(this)),e=f[b]={mc:function(){var a=this.read(b);void 0===a?this.b(b,c()):c(a)}.bind(this),key:b,observable:c,dispose:function(){d.dispose();delete f[b]}};e.mc();return e}.bind(this);this.nc=function(){a.a.V(f,function(a,b){b.mc()})};this.Ed=function(){a.a.V(f,function(a,b){b.dispose();delete f[a]})}}function l(){this.read=
function(a){a=window.localStorage.getItem(a);return null===a?void 0:JSON.parse(a)};this.b=function(a,c){void 0!==c&&window.localStorage.setItem(a,JSON.stringify(c))}}f.r("ko-grid-view-state-storage",{I:["ko-grid-view-modes"],i:function(b,c,e){var f=this,n="koGrid."+a.Ca.yc(e.aa.id);b=c.keyValueStore||new l;var m=!1;f.Rb=new h(b,function(){return n},function(){return!1});f.Ra=new h(b,function(){return n+"["+e.f["ko-grid-view-modes"].fa().join(";")+"]"},function(){return m});var k=e.f["ko-grid-view-modes"].fa.subscribe(function(){m=
!0},null,"beforeChange"),q=e.f["ko-grid-view-modes"].fa.subscribe(function(){m=!1;f.Ra.nc()});e.jb(function(){return[f.Rb,f.Ra].forEach(function(a){return a.nc()})});f.dispose=function(){k.dispose();q.dispose();[f.Rb,f.Ra].forEach(function(a){return a.Ed()})}}});return f.t("viewStateStorage","ko-grid-view-state-storage")}({},f,h))}(J,G,H,E,z,P,I,K,L,C);da=function(x,v,r,k,f,q,c,l,h,e,a,n,M){return function(a){return a}(function(a,b,c,e){e.r("ko-grid-column-scaling",{I:["ko-grid-view-state-storage",
"ko-grid-column-sizing"],i:function(a,e,g){function f(a){var b=0,e=0,h=0,p={};g.g.u().forEach(function(a){var c=k(a),d;c&&n(a)?(d=l()[a.id].width,e+=d):(d=a.qa(),h+=c?0:d);b+=d;p[a.id]={width:d,cb:0}});if(b>=a)return p;var u=a-b,w=e||b-h;return c.a.Rc(p,function(a,b){var c=g.g.ha(b);if(!k(c)||e&&!n(c))return a;c=Math.round(a.width/w*u);u-=c;w-=a.width;return{width:a.width,cb:c}})}function h(a){a=f(a);c.a.V(a,function(a,b){g.g.ha(a).width(b.width+b.cb+"px")});l(a)}function n(a){var b=l()[a.id];return b&&
b.width+b.cb===a.qa()}var l=b.observable({});g.f["ko-grid-view-state-storage"].Ra.bind("borrowedPixels",l);var k=g.f["ko-grid-column-sizing"].Pa;g.ka.Hb(function(){if(!g.f["ko-grid-column-resizing"]||!g.f["ko-grid-column-resizing"].Nc()){var a=this.querySelector(".ko-grid-table-scroller").clientWidth,b=g.g.wc(),c=0;g.g.u().forEach(function(a){c+=n(a)?l()[a.id].cb:0});(a>b||a<b&&c)&&h(a)}})}});return e.t("columnScaling","ko-grid-column-scaling")}({},n,f,M))}(J,G,H,E,z,Z,W,I,K,V,P,C,L);ea=function(x,
v,r,k,f,q,c,l,h,e,a,n){return function(a){return a}(function(a,c,b){b.r("ko-grid-column-width-persistence",{I:["ko-grid-view-state-storage","ko-grid-column-sizing"],i:function(a,b,e){function f(a){return a.filter(function(a){return!c.a.v(n,a.key)}).forEach(function(a){n[a.key]=!0;l(a)&&h.bind("column["+a.id+"].width",a.width)})}var h=e.f["ko-grid-view-state-storage"].Ra,l=e.f["ko-grid-column-sizing"].Pa,n={},k=e.g.all.subscribe(f);f(e.g.all());this.dispose=function(){k.dispose()}}});return b.t("columnWidthPersistence",
"ko-grid-column-width-persistence")}({},f,n))}(J,G,H,E,z,V,W,I,K,P,C,L);fa=function(x,v,r,k,f,q){return function(c){return c}(function(c,f){function h(c){var f=c.g.u().filter(function(a){return!!a.C}),b=c.data.Wa;c.data.source.ca(function(a){return a.N(c.data.h).ba(c.data.n)}).then(function(a){return a.map(function(a){return"<tr>"+f.map(function(c){return"<td>"+b(a[c.C])+"</td>"}).join("")+"</tr>"}).reduce(function(a,b){return a+b},"")}).then(function(b){b=['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">  <head></head>  <body>    <table>      <thead>',
"        <tr>"+f.map(function(a){return"<th>"+a.label()+"</th>"}).join("")+"</tr>","      </thead>      <tbody>",b,"      </tbody>    </table>  </body></html>"].join("");(window.navigator.b?window.navigator.b.bind(window.navigator):function(a,b){var c=n.createObjectURL(a),d=e.createElement("a");d.href=c;d.download=b;var f=e.createEvent("MouseEvents");f.initEvent("click",!0,!0);d.dispatchEvent(f);window.setTimeout(function(){return n.revokeObjectURL(c)})})(new a([b],{type:"application/vnd.ms-excel;charset=utf-8"}),
"excel-export.xls")})}var e=window.document,a=window.Blob,n=window.URL;f.r("ko-grid-export",{I:["ko-grid-toolbar"],X:function(a){a.Pb("left-toolbar").O(' <button class="ko-grid-toolbar-button ko-grid-excel-export">Excel Export</button> ')},i:function(a,c,b){b.aa.addEventListener("click",function(a){a.target.classList.contains("ko-grid-excel-export")&&h(b)})}});return f.t("export","ko-grid-export")}({},q))}(J,G,H,E,z,L,I,K,C);ga=function(x,v,r,k,f,q,c,l,h,e,a){return function(a){return a}(function(a,
c,e,b,d){function g(a,b){function c(a){return"*"+a}var d=b.toLowerCase()!==b;return 0<=b.indexOf("*")?f(a,b,d):f(a,"*"+b.replace(/([A-Z])/g,c)+"*",d)}function f(a,b,c){b="^"+b.split("*").map(h).join(".*")+"$";var d=new RegExp(b,c?"":"i"),g=a.Ba;return e.s.ce(function(a){return d.test(g(a))},function(){return e.s.ad(d).stringifyable})}function h(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var m=e.s.rc;b.r("ko-grid-filtering",{I:[],X:function(a){return a.Eb("headers").O("filters",d)},i:function(a,
b,d){function f(a){var b=a.id;if(!h[b]){var e=c.observable("");d.f["ko-grid-view-state-storage"]&&d.f["ko-grid-view-state-storage"].Rb.bind("filters["+b+"]",e);h[b]={text:e,h:c.pureComputed(function(){var b=e();return b.length?g(a,b):m})}}return h[b]}var h={};this.__forColumn=f;a=c.pureComputed(function(){var a=d.g.u().filter(function(a){return f(a).h()!==m}).map(function(a){return f(a).h().la(e.ya.Yb(a.C))});return e.s.va(a)});var n=b.ob&&b.ob.Oe||300,l=b.ob&&!1===b.ob.enabled?a:a.extend({ob:n}),
k=c.observable(!0);this.__applied=c.pureComputed(function(){k(k()||d.data.rows.fb());return k()&&!d.data.view.La()});d.data.s.push(c.pureComputed(function(){k(!1);return l()}));this.dispose=function(){l.dispose()}}});return b.t("filtering","ko-grid-filtering")}({},e,r,a,'<tr class="ko-grid-tr ko-grid-filter-row" data-bind="css: { applied: extensions.filtering.__applied }">\n    <td class="ko-grid-th ko-grid-filter-cell" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\'  }">\n        <input class="ko-grid-filter" type="text" data-bind="value: extensions.filtering.__forColumn(column()).text, valueUpdate: [\'keypress\', \'keyup\']"/>\n    </td>\n</tr>'))}(J,
G,H,E,z,W,I,K,P,C,L);ha=function(x,v,r,k,f,q,c,l,h,e){return function(a){return a}(function(a,c,e){var f=window.document.documentElement;e.r("ko-grid-full-screen",{I:["ko-grid-toolbar","ko-grid-view-modes"],X:function(a){a.Pb("left-toolbar").O(' <label class="ko-grid-toolbar-button ko-grid-full-screen-label" data-bind="css: { pressed: extensions.fullScreen.__state }">  <input type="checkbox" tabIndex="-1" class="ko-grid-full-screen-toggle" data-bind="checked: extensions.fullScreen.__state" />  Full Screen</label> ')},
i:function(a,d,e){var h=c.observable(!1);this.__state=h;this.Mb=function(){return h(!0)};var k=e.aa.classList.contains("fixed-height"),m=h.subscribe(function(a){a?(f.classList.add("contains-full-screen-element"),e.f["ko-grid-view-modes"].Mb("full-screen",function(){e.aa.classList.add("fixed-height")})):(f.classList.remove("contains-full-screen-element"),e.f["ko-grid-view-modes"].Oc("full-screen",function(){k||e.aa.classList.remove("fixed-height")}))});this.dispose=function(){return m.dispose()}}});
return e.zc(["fullscreen","fullScreen"],"ko-grid-full-screen")}({},e,h))}(J,G,H,E,z,P,I,K,L,C);ia=function(x,v,r,k,f,q,c,l,h){return function(c){return c}(function(c,a,f){f.r("ko-grid-links",{i:function(c,e,b){Object.keys(c).forEach(function(d){var e=b.g.ha(d),f=c[d].uri,h=c[d].label,m="function"===typeof f?f:function(c){return b.data.Sb(a.unwrap(c[f]))},k="function"===typeof h?h:function(c){return b.data.Sb(a.unwrap(c[h||e.C]))};e.Wb(function(){return{W:function(a){var b=window.document.createElement("a");
b.appendChild(window.document.createTextNode(""));a.appendChild(b)},update:function(a,b,c){a.firstChild.firstChild.nodeValue=k(c);a.firstChild.href=m(c)}}})})}});return f.t("links","ko-grid-links")}({},h,q))}(J,G,H,E,z,L,I,K,C);ja=function(x,v,r,k,f,q){return function(c){return c}(function(c,f,h){var e=window.requestAnimationFrame.bind(window);window.cancelAnimationFrame.bind(window);h.r("ko-grid-resize-detection",{i:function(a,c,h){function k(){b||(b=e(function(){b=null;h.ka.oa()}))}var b,d=(a=window.$)?
a(f.element.Ib(h.aa,".ui-resizable")):{on:function(){},off:function(){}};window.addEventListener("resize",k);d.on("resize resizestop",k);this.dispose=function(){window.removeEventListener("resize",k);d.off("resize resizestop",k)}}});return h.t("resizeDetection","ko-grid-resize-detection")}({},x,q))}(J,G,H,E,z,L,I,K,C);ka=function(x,v,r,k,f,q){return function(c){return c}(function(c,f,h){f.r("ko-grid-sorting",{i:function(c,a,f){function k(a){a===b?(d="ascending"===d?"descending":"ascending",g=g.reverse()):
(b&&b.za.removeAll(["ascending-order","descending-order"]),b=a,d="ascending",g=l(a));a.za(b.za().filter(function(a){return"ascending-order"!==a&&"descending-order"!==a}).concat(["ascending"===d?"ascending-order":"descending-order"]));f.data.n(g)}function l(a){function b(a){return(a=f.data.Wa(a[c]))&&"function"===typeof a.valueOf?a.valueOf():a}var c=a.C;h.Qc(b,function(){return h.ya.Yb(a.C).stringifyable});return h.U.pe.la(b)}var b,d,g;(c=c.initiallyBy)&&k(f.g.ha(c));f.headers.Ub(function(a,b){a.defaultPrevented||
(a.preventDefault(),k(b.ia))});var p=f.data.n.subscribe(function(a){b&&(a!==g&&(b.za.removeAll(["ascending-order","descending-order"]),b=d=g=null),f.ka.oa())});this.dispose=function(){p.dispose()}}});return f.t("sorting","ko-grid-sorting")}({},q,r))}(J,G,H,E,z,L,I,K,C);la=function(x,v,r,k,f,q){return function(c){return c}(function(c,f){f.r("ko-grid-toolbar",{X:function(c){c.pb("grid").append("toolbar",'<div class="ko-grid-toolbar">  <div class="ko-grid-left-toolbar">\x3c!--left-toolbar--\x3e</div>  <div class="ko-grid-right-toolbar">\x3c!--right-toolbar--\x3e</div></div>')},
i:function(){}});return f.t("toolbar","ko-grid-toolbar")}({},q))}(J,G,H,E,z,L,I,K,C);z=function(x,v,r,k,f,q,c,l,h){return function(c){return c}(function(c,a,f){f.r("ko-grid-virtualization",{X:function(a){a.sc("body").O('<tbody class="ko-grid-virtualization-before-spacer"><tr data-bind="style: { height: extensions.virtualization.__beforeHeight() + \'px\' }"><td></td></tr></tbody>');a.Eb("body").O('<tbody class="ko-grid-virtualization-after-spacer"><tr data-bind="style: { height: extensions.virtualization.__afterHeight() + \'px\' }"><td></td></tr></tbody>')},
i:function(c,e,b){function d(){b.data.l(Math.ceil((l.clientHeight-1)/r)+1);h()}function f(){var a=Math.floor(b.data.offset()+(l.scrollTop-k())/r);b.data.offset(a);h()}function h(){var a=l.scrollTop,c=Math.max(0,(b.data.view.Na()-b.data.offset()-b.data.l())*r),d=l.clientHeight,e=n.getBoundingClientRect(),e=q.getBoundingClientRect().top-e.bottom;k(a-a%r);m(Math.max(0,c+e-d))}var k=a.observable(),m=a.observable();this.__beforeHeight=k;this.__afterHeight=m;var l,n,q;b.jb(function(){l=b.element.querySelector(".ko-grid-table-scroller");
n=b.element.querySelector(".ko-grid-virtualization-before-spacer");q=b.element.querySelector(".ko-grid-virtualization-after-spacer");b.data.view.Na.subscribe(h);b.ka.Fb(d);l.addEventListener("scroll",f)});var r=25}});return f.t("virtualization","ko-grid-virtualization")}({},h,q))}(J,G,H,E,z,L,I,K,C);return function(x){return x}({dataSource:I,grid:L,extensions:{aggregate:ca,columnResizing:Z,columnScaling:da,columnSizing:V,columnWidthPersistence:ea,"export":fa,filtering:ga,fullScreen:ha,links:ia,resizeDetection:ja,
sorting:ka,toolbar:la,viewModes:P,viewStateStorage:W,virtualization:z}})});