/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
(function(L){"function"===typeof define&&define.amd?define(["require","knockout"],L):window["ko-grid-bundle"]=L(function(w,z){if(!Array.isArray(w)||1!==w.length||"string"!==typeof w[0]||"function"!==typeof z)throw Error("Assertion error.");var E=window.ko.bindingHandlers.grid.config=window.ko.bindingHandlers.grid.config||{};z(E[w[0]])},window.ko)})(function(L,w){var z,E,I,J,K,Q,R;z=function(){return function(q){return q}(function(q,n,c,k){return{p:q,d:n,e:c,hc:k}}(function(){function q(c,k){return c&&
"function"===typeof c.valueOf&&k&&"function"===typeof k.valueOf?c.valueOf()<=k.valueOf()?c.valueOf()<k.valueOf()?-1:0:1:c<=k?c<k?-1:0:1}function n(c,k){var t=c.length,l=Array(t),x=Array(t),a;for(a=0;a<t;++a)l[a]=a,x[a]=c[a];a=c;c=x;x=a;l.sort(function(a,d){return k(c[a],c[d])||a-d});for(a=0;a<t;++a)x[a]=c[l[a]];return x}return{contains:function(c,k){return 0<=c.indexOf(k)},La:function(c,k){return Array.prototype.concat.apply([],c.map(k))},Aa:function(c,k){var t=k||q;window.chrome?t=n(c,t):(c.sort(t),
t=c);return t}}}(),function(){function q(n){return function(){return n}}return{Ec:q(!0),vc:q(!1),g:q(void 0),Ac:q(null),oc:q(0),tc:q,Na:function(n){return n}}}(),function(){function q(n,c){return Object.prototype.hasOwnProperty.call(n,c)}return{rc:function(n,c){return n===c||!(!n||"function"!==typeof n.valueOf||!c||"function"!==typeof c.valueOf||n.valueOf()!==c.valueOf())},extend:function(n){Array.prototype.slice.call(arguments,1).forEach(function(c){for(var k=Object.keys(c),t=0,l=k.length;t<l;t++){var x=
k[t],a=Object.getOwnPropertyDescriptor(c,x);void 0!==a&&a.enumerable&&Object.defineProperty(n,x,a)}});return n},ra:function(n,c){for(var k in n)q(n,k)&&c(k,n[k])},Z:q}}(),{wb:function(q){return q.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})},uc:function(q){return q.replace(/-([a-z])/g,function(n){return n[1].toUpperCase()})},format:function(q){var n=arguments;return q.replace(/{(\d+)}/g,function(c,k){var t=parseInt(k,10)+1;return typeof n.length<=t?c:n[t]})}}))}();E=function(q){return function(n){return n}(function(n){function c(l){var c=
{get length(){return this.length},contains:function(a){return 0<=this.$a(a)},filter:function(a){for(var r=[],d=0;d<this.length;++d){var e=this.get(d);a(e,d,this)&&r.push(e)}return new k(r)},forEach:function(a){for(var r=0,d=this.length;r<d;++r)a(this.get(r),r,this)},get:function(a){return this.get(a)},map:function(a){for(var r=Array(this.length),d=0;d<this.length;++d)r[d]=a(this.get(d),d,this);return new k(r)},readOnly:function(){return new t(this)},slice:function(a,r){var d=this.length;a=0>=arguments.length?
0:0<=a?a:d+a;r=1>=arguments.length?d:0<=r?r:d+r;for(var d=r-a,e=Array(d),g=0;g<d;++g)e[g]=this.get(a+g);return new k(e)},G:function(){var a=Array(this.length);this.forEach(function(r,d){a[d]=r});return a},$a:function(a){for(var r=0;r<this.length;++r)if(this.get(r)===a)return r;return-1}};return n.e.extend(c,{get length(){return this.length},contains:c.contains,filter:c.filter,forEach:c.forEach,get:function(a){return this.get(a)},map:c.map,readOnly:c.readOnly,slice:c.slice,toArray:c.G,tryFirstIndexOf:c.$a},
l)}function k(l){this.ga=l}function t(l){this.Ca=l}k.prototype=c({get length(){return this.ga.length},get:function(l){return this.ga[l]},G:function(){return this.ga.slice()}});t.prototype=c({get length(){return this.Ca.length},get:function(l){return this.Ca.get(l)}});return{Ub:function(l){return new k(l||[])},Qb:c}}(q))}(z);E=function(q,n,c,k){var t,l,x,a;t=function(){function a(r,e,g){this.K=r||[];this.R=e||[];this.P=g||[]}a.prototype={get size(){return this.K.length+this.R.length+this.P.length},
get empty(){return!this.size},v:function(a){this.empty||a(this)}};return a}();l={};x=function(a,d,e,g,f){function b(b,h,m){this.parent=b;this.a=h||new e(this.b);this.t=m||a.observable(new g);this.Ha=a.observable(this.a.readOnly());this.C=null}b.prototype={get b(){return this.parent.b},get m(){return this.parent.m},get O(){return this.Ha},get N(){this.C||(this.C=a.observable(this.a.map(this.m.U)));return this.C},get values(){return this.O},get xa(){return this.N},da:function(a){this.Ha.valueHasMutated();
this.C&&(a.K.forEach(this.m.U),this.C(this.a.map(this.m.Rb)),a.P.forEach(this.m.aa))},za:function(){this.C&&this.a.forEach(this.m.aa)},Y:function(a){return new f.fb(this,a)},$:function(a){return new f.gb(this,a)},W:function(a,e){return new f.eb(this,a,e)},dispose:function(){this.dispose()}};Object.defineProperty(b.prototype,"values",{enumerable:!0,get:function(){return this.O}});Object.defineProperty(b.prototype,"observables",{enumerable:!0,get:function(){return this.N}});b.prototype.filteredBy=b.prototype.Y;
b.prototype.orderedBy=b.prototype.$;b.prototype.clipped=b.prototype.W;return b}(k,c,q,t,l);a=function(a,d,e){function g(a,b,r,h){e.call(this,{b:a,m:b},r,h);this.M=h.subscribe(function(a){this.da(a)}.bind(this))}g.prototype=d.e.extend({},e.prototype,{dispose:function(){this.M.dispose();this.za()}});return g}(k,c,x);(function(a,d,e,g,f){function b(b,h){g.call(this,b);this.L=a.computed(function(){var m=this.a.G(),y=this.parent.a.filter(a.unwrap(h)).G(),m=new e(y,[],m);this.a.clear();this.a.J(y);this.da(m);
m.v(this.t)}.bind(this));this.M=b.t.subscribe(function(m){var y;y=this.b;for(var v=this.a,b=a.unwrap(h),f=m.K.filter(b),A=[],g=m.P.filter(b),u=0,d=m.R.length;u<d;u++){var l=m.R[u],t=v.vb(y(l));b(l)?t?A.push(l):f.push(l):t&&g.push(l)}y=new e(f,A,g);y.empty||(this.a.removeAll(y.P),this.a.ab(y.R),this.a.J(y.K),this.da(m),y.v(this.t))}.bind(this))}b.prototype=d.e.extend({},g.prototype,{dispose:function(){this.L.dispose();this.M.dispose();this.za()}});return f.fb=b})(k,c,t,x,l);(function(a,d,e,g){function f(b,
f){e.call(this,b);this.a.J(b.a.G());this.L=a.computed(function(){this.a.xb(a.unwrap(f))&&this.t.valueHasMutated()}.bind(this));this.M=b.t.subscribe(function(a){var m=this.a.kc(a.R);this.a.removeAll(a.P.concat(m));this.a.Kb(a.K.concat(m));this.da(a);this.t.valueHasMutated()}.bind(this))}f.prototype=d.e.extend({},e.prototype,{filteredBy:function(){throw Error("Filtering an ordered view is not supported.");},orderedBy:function(){throw Error("Ordering an ordered view is not supported.");},dispose:function(){this.L.dispose();
this.M.dispose();this.za()}});return g.gb=f})(k,c,x,l);(function(a,d,e,g){function f(b,f,h){var m=b.m;this.Da=m;this.H=a.observable(e.Ub());this.w=null;var y=b.b;this.L=a.computed(function(){b.t();var e=b.a,p=Math.min(e.length,a.unwrap(f)),g=Math.min(e.length,p+a.unwrap(h)),A=this.H.peek(),e=e.slice(p,g);a:if(A.length!==e.length)p=!0;else{for(p=A.length-1;0<=p;--p)if(y(A.get(p))!==y(e.get(p))){p=!0;break a}p=!1}p&&(this.H(e),this.w&&(this.w(this.H.peek().map(m.U)),A.forEach(m.aa)))}.bind(this))}f.prototype=
d.d.Na({get O(){return this.H},get N(){this.w||(this.w=a.observable(this.values().map(this.Da.U)));return this.w},get values(){return this.O},get xa(){return this.N},Y:function(){throw Error("Filtering a clipped view is not supported.");},$:function(){throw Error("Ordering a clipped view is not supported.");},W:function(){throw Error("Clipping a clipped view is not supported.");},dispose:function(){this.L.dispose();this.w&&this.H().forEach(this.Da.aa)}});Object.defineProperty(f.prototype,"values",
{enumerable:!0,get:function(){return this.O}});Object.defineProperty(f.prototype,"observables",{enumerable:!0,get:function(){return this.N}});f.prototype.filteredBy=f.prototype.Y;f.prototype.orderedBy=f.prototype.$;f.prototype.clipped=f.prototype.W;f.prototype.dispose=f.prototype.dispose;return g.eb=f})(k,c,n,l);return function(a){return a}(function(a,d,e){return{ClientSideDataSource:a,DefaultObservableStateTransitioner:d,ObservableEntries:e}}(function(a,d,e,g,f){return function(b,u){var h=new e(b),
m=a.observable(new f);this.openView=this.Qa=function(){return new g.hb(b,u,h,m)};this.addEntries=function(a){h.J(a);(new f(a)).v(m)};this.updateEntries=function(a){h.ab(a);(new f([],a)).v(m);u.bb(a)};this.addOrUpdateEntries=function(a){var e=[],b=[];a.forEach(function(a){(h.contains(a)?b:e).push()});(new f(e,b)).v(m)};this.removeEntries=function(a){h.removeAll(a);(new f([],[],a)).v(m)};this.replaceEntries=function(a){var e=h.G();h.clear();h.J(a);(new f(a,[],e)).v(m);u.bb(a)};this.dispose=function(){}}}(k,
c,q,{hb:a},t),function(a){return function(){var d={};Array.prototype.slice.call(arguments).forEach(function(a){d[a]=!0});this.constructor=function(e){var g={};Object.keys(e).forEach(function(f){g[f]=d[f]?e[f]:a.observable(e[f])});return g};this.cb=function(a,g){Object.keys(g).filter(function(a){return!d[a]}).forEach(function(f){a[f](g[f])});return a};this.yb=function(){}}}(k),function(a){function d(e){this.observable=e;this.$b=a.observable(e);this.Wa=1}return function(e,g){function f(a){var e=b(a);
if(!e)throw Error("Es existierte keine Referenz zum Objekt mit Id '"+a+"' oder es wurden bereits alle freigegeben.");return e}function b(a){if("string"!==typeof a)throw u(a);return Object.prototype.hasOwnProperty.call(h,a)?h[a]:null}function u(a){throw Error("Ids m\u00fcssen Strings sein. Unerwartete Id '"+a+"' des Typs '"+typeof a+"'.");}g=g||{constructor:function(e){var b={};Object.keys(e).forEach(function(h){b[h]=a.observable(e[h])});return b},cb:function(a,e){Object.keys(e).forEach(function(b){a[b](e[b])});
return a},yb:function(){}};var h={};this.U=function(a){var b=e(a);if("string"!==typeof b)throw u(b);Object.prototype.hasOwnProperty.call(h,b)?(b=h[b],++b.Wa):(a=new d(g.constructor(a)),b=h[b]=a);return b.observable};this.aa=function(a){a=e(a);0===--f(a).Wa&&delete h[a]};this.Fb=function(a){f(a).$b(null);delete h[a]};this.Rb=function(a){return f(e(a)).observable};this.lc=function(a,e){return e(f(a).observable)};this.fa=function(a,b){return this.lc(e(a),b)}.bind(this);this.nc=function(a,e){var h=b(a);
h&&e(h.observable)};this.mc=function(a,b){return this.nc(e(a),b)}.bind(this);this.bb=function(a){a.forEach(function(a){this.mc(a,function(e){g.cb(e,a)})}.bind(this))}.bind(this);this.dispose=function(){Object.keys(h).forEach(this.Fb)}.bind(this)}}(k)))}(function(q,n){return function(c){return c}(function(c,k){function t(a){if("string"!==typeof a)throw Error("Ids must be strings. (given: `"+a+"`, type: `"+typeof a+"`)");return a}function l(a,g){return c.e.Z(a,t(g))?a[g]:-1}function x(a,g){var f=l(a,
g);if(0>f)throw Error("Es existiert kein Eintrag mit Id '"+g+"'.");return f}function a(e,g,f,b,u){if(b>=u)return b;var h=Math.floor((b+u)/2);return 0>g(f,e[h])?a(e,g,f,b,h):a(e,g,f,h+1,u)}function r(a,g,f,b,u){function h(b,h){var d=m.length,A=g.slice(b,h);m=m.concat(A);A.forEach(function(b){f[a(b)]=d;++d})}var m=[],d=0;b.forEach(function(a){h(d,a);d=a;u(m)});h(d,g.length);return m}function d(a){this.b=function(g){return t(a(g))};this.elements=[];this.i={};this.u=null}d.prototype=k.Qb({get length(){return this.elements.length},
get:function(a){return this.elements[a]},wc:function(a){a=x(this.i,a);return this.elements[a]},clear:function(){this.elements=[];this.i={}},contains:function(a){a=(0,this.b)(a);return 0<=l(this.i,a)},vb:function(a){return 0<=l(this.i,a)},xb:function(a){var g=this.b,f=this.elements,b=this.i;this.u=a;c.p.Aa(f,a);a=!1;for(var d=0;d<f.length;++d){var h=g(f[d]);a=a||b[h]!==d;b[h]=d}return a},cc:function(a){if(a.length){var d=this.b,f=this.elements,b=this.i;a=a.map(function(a){return x(b,a)+1});a.sort(function(a,
b){return a-b});this.elements=r(d,f,b,a,function(a){a=a.pop();a=d(a);delete b[a]})}},removeAll:function(a){this.cc(a.map(this.b))},ab:function(a){if(this.u)throw Error("`updateAll` must not be called on an ordered `IndexedTable`. Use a combination of order-preserving `tryUpdateAll`, `removeAll` and `insertAll` instead.");if(a.length){var d=this.b,f=this.elements,b=this.i;a.forEach(function(a){var h=x(b,d(a));f[h]=a})}},kc:function(a){if(!this.u)throw Error("`tryUpdateAll` is designed for ordered `IndexedTable`s. For unordered ones, use `updateAll` instead.");
if(!a.length)return[];var d=this.b,f=this.elements,b=this.i,r=this.u,h=[];a.forEach(function(a){var e=x(b,d(a));0!==r(a,f[e])?h.push(a):f[e]=a});return h},J:function(a){if(this.u)throw Error("`addAll` must not be called on an ordered `IndexedTable`. Use order-preserving `insertAll` instead.");if(a.length){var d=this.b,f=this.elements,b=this.i;a.forEach(function(a){var h=d(a);if(c.e.Z(b,h))throw Error("The list already contains an element with id `"+h+"`. Did you mean to call `updateAll`?.");b[h]=
f.push(a)-1})}},Kb:function(d){if(!this.u)throw Error("`insertAll` is designed for ordered `IndexedTable`s. For unordered ones, use `addAll` instead.");if(d.length){var g=this.b,f=this.elements,b=this.i,l=this.u;c.p.Aa(d,l);var h=0,m=[];d.forEach(function(b){b=a(f,l,b,h,f.length);m.push(b);h=b});h=0;this.elements=r(g,f,b,m,function(a){var f=d[h],p=g(f),m=a.length;a.push(f);b[p]=m;++h})}}});return d}(n,q))}(E,z),E,z,w);I=function(){return function(q){return q}(function(){function q(t,l){var c=(" "+
t+" ").replace(" "+l+" "," ");return c.substring(" "===c[0]?1:0," "===c[c.length-1]?c.length-1:c.length)}function n(c,l){return!!(c.compareDocumentPosition(l)&16)}var c=window.Element,k=c.prototype.webkitMatchesSelector||c.prototype.mozMatchesSelector||c.prototype.msMatchesSelector;return{Ab:function(c,l){for(var k=0;l;){if(l===c)return k;l=l.parentNode;++k}throw Error("The given node is not part of the subtree.");},Mb:function(c,l){return c===l||n(c,l)},Dc:n,element:{sb:function(c,l){do{if(k.call(c,
l))return c;c=c.parentElement}while(c);return null},matches:function(c,l){return k.call(c,l)}},sc:{add:function(c,l){return q(c,l)+" "+l},yc:function(c,l){return 0<=(" "+c+" ").indexOf(" "+l+" ")},remove:q}}}())}();J=function(q){var n,c,k;n=function(){function c(a){this.length=function(){return a.length};this.get=function(c){return a[c]}}function l(a){this.length=function(){return a.length()};this.get=function(c){return a.get(c)}}function k(a){this.length=function(){return a.length};this.get=function(c){return a.get(c)}}
return{Ib:function(a){if(Array.isArray(a))a=c;else a:switch(typeof a.length){case "function":a=l;break a;case "number":a=k;break a;default:throw Error("Unsupported type: The `forEach` value must be an array or a list with a `length` property or method.");}return a}}}();c=function(c){function l(a){if("function"===typeof a)return a;if("string"===typeof a)return function(d){return d[a]};throw Error("A repeat-binding must specify and indexedBy of type string (property name) or function (custom selector).");
}function k(a){c.cleanNode(a);window.setTimeout(function(){c.cleanNode(a)},1);var d=a.cloneNode(!0);d.removeAttribute("data-bind");"string"===typeof a.getAttribute("data-repeat-bind")&&(d.setAttribute("data-bind",a.getAttribute("data-repeat-bind")),d.removeAttribute("data-repeat-bind"));return d}var a=window.document;return function(c,d){var e=c.getAttribute("data-bind");this.b=l(d.indexedBy);this.Ob=d.as||"$item";this.Hb=d.at||"$index";this.ob=!1!==d.allowElementRecycling;this.Ia=!0===d.allowDeviation;
this.ec=d.onDeviation||function(){};this.fc=d.onSynchronization||function(){};this.parent=c.parentNode;this.ca=a.createComment("[repeat("+e+")");this.pa=a.createComment("repeat("+e+")]");this.Nb=k(c);this.Bb=this.ca}}(q);k=function(){function c(){this.T=0;this.j={}}c.prototype={add:function(c,k){if(Object.prototype.hasOwnProperty.call(this.j,c))throw Error("Key `"+c+"` is already taken.");++this.T;this.j[c]=k},get:function(c){return this.j[c]},remove:function(c){if(!Object.prototype.hasOwnProperty.call(this.j,
c))throw Error("No entry for key  `"+c+"` present.");delete this.j[c];--this.T},clear:function(){this.j={};this.T=0},get size(){return this.T},forEach:function(c){for(var k in this.j)Object.prototype.hasOwnProperty.call(this.j,k)&&c(k,this.j[k])}};return c}();return function(c){return c}(function(c,l,k,a){return c.bindingHandlers.indexedRepeat={init:function(r,d,e,g,f){d=d();e=new k(r,d);g=e.Bb;e.parent.replaceChild(e.pa,r);e.parent.insertBefore(e.ca,e.pa);var b=new a(e,f);e.Ia&&c.utils.domNodeDisposal.addDisposeCallback(g,
function(){b.lb()});var u=d.forEach,h=l.Ib(u());return{controlsDescendantBindings:!0,subscribable:c.computed(function(){var a=new h(u());b.gc(a)},null,{disposeWhenNodeIsRemoved:g})}}}}(q,n,c,function(c,l){function k(a,c){this.element=a;this.qb=c}function a(a,c,d,b){this.index=a;this.item=c;this.id=d;this.Ua=b}var r=window.requestAnimationFrame,d=window.cancelAnimationFrame;return function(e,g){function f(){b((new Date).getTime()+40)}function b(a){for(;u();)if(++F,(new Date).getTime()>a){n();z=r(f);
return}m()}function u(){if(F<G.length()){var b=F,d=G.get(F),f=b?A(G.get(b-1)):null,m=A(d),v=H.get(m);if(v)if(v.element.style.display="",v.qb[N](b),b=C.get(m))C.remove(m),O.insertBefore(b,D.nextSibling),D=b;else{for(;v.element!==D.nextSibling;)S(D.nextSibling);D=v.element}else w.push(new a(b,d,m,f))}else if(B)if(w.length)e.ob&&B.length?(m=B.pop(),v=w.shift(),m.style.display="",p(m,v.Ua),b=c.contextFor(m),b[M](v.item),b[N](v.index),H.add(v.id,new k(m,b))):(m=w.shift(),v=U.cloneNode(!0),b={},b[N]=c.observable(m.index),
b[M]=c.observable(m.item),b=g.extend(b),H.add(m.id,new k(v,b)),c.applyBindings(b,v),p(v,m.Ua),++P);else return!1;else h();return!0}function h(){B=[];for(var a=G.length()-w.length,a=P-C.size-a;0<a;--a)S(D.nextSibling);C.forEach(function(a,b){H.remove(a);B.push(b)});C.clear()}function m(){for(var a=0;a<B.length;++a)c.removeNode(B[a]);P=G.length();v();q()}function y(){d(z);z=null;for(var a=0;null!==B&&a<B.length;++a){var b=B[a];H.add(A(c.contextFor(b)[M]()),new k(b,c.contextFor(b)))}v()}function v(){F=
0;B=C=w=D=null}function p(a,b){var c=(b?H.get(b).element:V).nextSibling;O.insertBefore(a,c)}function S(a){C.add(A(c.contextFor(a)[M]()),a);a.style.display="none";O.insertBefore(a,W)}var A=e.b,M=e.Ob,N=e.Hb,T=e.Ia,n=e.ec,q=e.fc,O=e.parent,V=e.ca,W=e.pa,U=e.Nb,G=null,H=new l,P=0,F=0,D=null,z=null,w=null,C=null,B=null;this.gc=function(a){z&&y();F=0;D=e.ca;w=[];C=new l;G=a;if(T)b((new Date).getTime()+15);else{for(;u();)++F;m()}};this.lb=y}}(q,k)))}(w);K=function(q,n,c,k){var t,l,x;t=function(){var a=
/^[a-z]+(-[a-z]+)*$/,c=/\x3c!--(?:(before|after):)?([a-z]+(-[a-z]+)*)--\x3e*/g;return function(d){function e(a,c){c=c||function(a,b){return b+a};return function(d){var p=g(d,a);return{ua:function(a,d){var m=d?a:null,e=(d=d?d:a)?m:null,v=d,m=c;e&&b(e,2);f(v);e=e?g(e,3)+v+g(e,4):v;m=m(p,e);h=h.replace(p,m)}}}}function g(a,b){function c(b){if(u[a]!==b)throw Error("Operation is not defined for placeholder `"+a+"`.");}if(!u[a])throw Error("Unknown placeholder id `"+a+"`.");var d="\x3c!--"+a+"--\x3e",h=
"\x3c!--before:"+a+"--\x3e",f="\x3c!--after:"+a+"--\x3e";switch(b){case 1:return c(1),delete u[a],d;case 2:return c(1),d;case 3:return c(2),h;case 4:return c(2),f;case 5:case 6:return 1===u[a]?"\x3c!--"+a+"--\x3e":5===b?f:h}throw Error("Assertion error. Unkown operator: `"+b+"`");}function f(a){for(var d;d=c.exec(a);){var h=d[1],f="before"===h;d=d[2];if(h&&1!==(a.match(new RegExp((f?"after":"before")+":"+d,"g"))||[]).length)throw Error("Multiple or unmatched before-/after-placeholders for placeholder id `"+
d+"`.");h&&!f||b(d,h?2:1)}}function b(b,c){if(!a.test(b))throw Error("Invalid placeholder id `"+b+"`");if(u[b])throw Error("Placeholder id `"+b+"` is already taken.");u[b]=c}var u={},h=d;f(h);this.replace=function(a){return{fa:e(1,function(a,b){return b})(a).ua}};this.jc=function(){return{append:e(5)("tfoot").ua,bc:e(6,function(a,b){return a+b})("tfoot").ua}};this.rb=function(){return h.replace(c,"")}}}();c=function(a,c,d){function e(a){return null===a?"":""+a}function g(c,b,d){this.id=this.id=d.id;
this.property=this.n=d.property||this.id;this.k=!d.hidden;this.visible=this.visible=function(){return this.k}.bind(this);this.label=this.label=a.observable(d.label);this.width=this.width=a.observable(d.width);this.widthInPixels=this.Ba=function(){var a=this.width();if("px"!==a.substr(-2))throw Error("The only currently supported column width values are absolute pixel lengths.");return parseInt(a.substring(0,a.length-2),10)}.bind(this);this.D=a.observableArray(d.headerClasses||d.classes||[]);this.Ja=
a.observableArray(d.cellClasses||d.classes||[]);this.Ma=a.observableArray(d.footerClasses||d.classes||[]);this.headerClasses=this.D;this.cellClasses=this.Ja;this.footerClasses=this.Ma;this.metadata=this.Tb=b.columnMetadataProvider?b.columnMetadataProvider(c,d):{};this.renderValue=this.ba=b.cellValueRenderer?b.cellValueRenderer.bind(void 0,this):e;this.ac=function(a){this.ba=a(this.ba)}.bind(this);this.Sa=function(a){a=a({l:this.B,update:this.Ga});if(!a||!a.l||!a.update)throw Error("The cell value binding must define an `init` as well as an `update` method.");
this.B=a.l;this.Ga=a.update}.bind(this);this.overrideValueRendering=this.ac;this.overrideValueBinding=this.Sa}a.bindingHandlers.__gridColumn={init:c.d.g,update:function(a,b){var d=b();a.style.width=d.width()}};return{l:function(a){a.replace("columns").fa(d)},h:function(d,b,c){function h(a){a=new g(c,b,a);b.columnInitializer&&b.columnInitializer(a);return a}var e=[];this.all=this.all=a.observableArray(d.columns.map(h));this.byId=this.V=function(a){var b=this.Za(a);if(!b)throw Error("The column id `"+
a+"` is already taken.");return b}.bind(this);this.tryById=this.Za=function(a){var b=this.all().filter(function(b){return b.id===a});if(1<b.length)throw Error("Assertion error: Multiple columns with id `"+a+"`.");return b[0]}.bind(this);var l=a.observable(this.all().filter(function(a){return a.k}));this.displayed=this.f=function(){return l()};this.show=function(a){this.Q(function(b){return b.k||b===a})}.bind(this);this.Gb=function(a){this.Q(function(b){return b.k&&b!==a})}.bind(this);this.show=this.show;
this.hide=this.Gb;this.reorder=this.dc=function(a){var b=this.all().slice(),d=[];a.forEach(function(a){b.splice(b.indexOf(a),1);d.push(a)});if(b.length)throw Error("The new column order must contain all columns.");this.all(d);this.Q(function(a){return a.k})}.bind(this);this.showOnlyThoseWhich=this.Q=function(a){var b=this.all();a=b.filter(a);b.forEach(function(a){a.k=!1});a.forEach(function(a){a.k=!0});l(a)}.bind(this);this._combinedWidthInPixels=this.Fa=a.computed(function(){for(var a=0,b=this.f(),
d=0;d<b.length;++d)a+=b[d].Ba();return a}.bind(this));e.push(this.Fa);this.add=this.add=function(a){a=h({id:"#"+a.id,label:a.label,hidden:a.hidden||!1,width:a.width});this.all.unshift(a);this.Q(function(a){return a.k});return a}.bind(this);this.o=function(){e.forEach(function(a){a.dispose()})}}}}(k,n,'<colgroup class="ko-grid-colgroup">\n    <col class="ko-grid-col" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\' }" data-repeat-bind="__gridColumn: column()">\n</colgroup>');
l=function(a,c){function d(d){var c=d.defaultPrevented;a.e.extend(this,d,{preventDefault:function(){c=!0;return d.preventDefault()},Bc:function(){c=!0},get defaultPrevented(){return c}})}function e(a,d){this.sa=a;this.Ya=d}return function(g){function f(d,e,f){function g(a){a=Array.prototype.slice.call(d.querySelectorAll(a)).filter(function(a){return c.Mb(a,e.target)});return a.length?a[a.length-1]:void 0}var l=c.Ab.bind(null,d),p=b.map(function(a){var b=a.Ya?g(a.Ya):d;return{sa:a.sa,match:b,depth:b?
l(b):-1}}).filter(function(a){return!!a.match});a.p.Aa(p,function(a,b){return b.depth-a.depth});p.forEach(function(a){a.sa.apply(d,f)})}g=g||function(a){return[a]};var b=[];this.F=function(a,d){var c=1<arguments.length?a:void 0;d=1<arguments.length?d:a;b.push(new e(d,c))};this.Xa=function(a){return{Ka:function(b){var e=c.element.sb(b.target,a);e&&(b=new d(b),f(e,b,g(b,e)))}}}}}(n,q);q=function(a,c,d,e){function g(a){this.Ea(function(b){b();this.A=a.ja.querySelector(".ko-grid-tbody")}.bind(this));
return function(){this.A=null}.bind(this)}function f(){var b=[],d=a.pureComputed(function(){var b=this.Ta().map(a.unwrap);return function(a){for(var d=0;d<b.length;d++)if(!b[d](a))return!1;return!0}}.bind(this)),c=a.pureComputed(function(){return this.s()}.bind(this)),e={};this.rows=this.rows=e;e.all=a.observableArray([]);e.qa=a.observableArray([]);e.filtered=e.qa;e.ya=a.observableArray([]);e.ordered=e.ya;e.f=a.observableArray([]);e.displayed=e.f;e.oa=a.observable(!1).extend({zc:"always"});e.displayedSynchronized=
e.oa;e.__handleDisplayedRowsDeviate=function(){this.rows.oa(!1)}.bind(this);e.__handleDisplayedRowsSynchronized=function(){this.rows.oa(!0)}.bind(this);this.ib(function(a){a();a=this.source.Qa();var f=a.Y(d),h=this.rows.qc=f.$(c),g=h.W(this.offset,this.Oa);b.push(a,f,h,g);b.push(a.values.subscribe(function(a){this.rows.all(a)}.bind(this)),f.values.subscribe(function(a){this.rows.qa(a)}.bind(this)),h.values.subscribe(function(a){this.rows.ya(a)}.bind(this)),g.xa.subscribe(function(a){this.rows.f(a)}.bind(this)));
e.all(a.values());e.qa(f.values());e.ya(h.values());e.f(g.xa())}.bind(this));var f=[];e.__classify=function(a){var b=f.map(function(b){return b(a)});return Array.prototype.concat.apply([],b)};e.Lb=function(a){f.push(a)};e.installClassifier=e.Lb;return function(){b.forEach(function(a){a.dispose()})}}function b(){function b(d,c){var e=a.contextFor(c),f=e.row(),e=e.column();return[d,f[e.n],f,e]}function e(a){return function(b){a.Xa(".ko-grid-cell").Ka(b);return!b.defaultPrevented}}var f=new d(b),h=new d(b),
g=new d(b),m=new d(b);this.Yb=f.F.bind(f);this.Vb=h.F.bind(h);this.Xb=g.F.bind(g);this.Wb=m.F.bind(m);this["onCellMouseDown "]=this.Yb;this["onCellClick "]=this.Vb;this["onCellDoubleClick "]=this.Xb;this["onCellContextMenu "]=this.Wb;this.Ea(function(a){a();this.A.addEventListener("mousedown",e(f));this.A.addEventListener("click",e(h));this.A.addEventListener("dblclick",e(g));this.A.addEventListener("contextmenu",e(m))}.bind(this));return c.d.g}function l(b){function d(a,b){for(var c=a.firstChild,
e=-1;c;){if(c.nodeType===m&&"TD"===c.tagName&&0<=(" "+c.className+" ").indexOf("td")&&++e===b)return c;c=c.nextSibling}throw Error("Column `"+b+"` does not exist.");}var e=function(a){for(var b=this.A.firstChild,d=-1;b;){if(b.nodeType===m&&"TR"===b.tagName&&0<=(" "+b.className+" ").indexOf("ko-grid-row")&&++d===a)return b;b=b.nextSibling}throw Error("Row `"+a+"` does not exist.");}.bind(this);this.lookupCell=this.Sb=function(c,f){var g=this.rows.f().indexOf(c),m=b.c.f().indexOf(f),p=d(e(g),m);return{element:p,
hijack:function(b){function d(){for(p.removeAttribute("data-hijacked");p.firstChild;)a.removeNode(p.firstChild);var b=a.contextFor(p).Cc();f.B?f.B(p,b,f):p.appendChild(v.createTextNode(""));h(p,b(),f)}if(p.hasAttribute("data-hijacked"))throw Error("Illegal state: This cell is already hijacked.");for(;p.firstChild;)a.removeNode(p.firstChild);p.className+=" "+b;p.setAttribute("data-hijacked","hijacked "+b);return{dispose:d,release:d}}}}.bind(this);return c.d.g}function h(b,d,c){var e=d[c.n],f=e&&a.unwrap(e),
h=b.getAttribute("data-hijacked"),g=c.Ja.peek().join(" ");b.className="ko-grid-td ko-grid-cell "+g+(h?" "+h:"");h||(c.B?c.Ga(b,e,d,c):b.lastChild.nodeValue=c.ba(f))}var m=window.Node.ELEMENT_NODE,k=c.d.oc,v=window.document,p={pc:k,l:function(a){a.replace("body").fa(e)},h:function(d,e,h){var p=[];this.source=d.dataSource;this.valueSelector=this.ea=d.valueSelector||e.valueSelector||c.d.Na;this.observableValueSelector=this.wa=d.observableValueSelector||e.observableValueSelector||this.ea;this.predicates=
this.Ta=a.observableArray(d.filters||[]);this.comparator=this.s=a.observable(k);this.offset=this.offset=a.observable(0);this.limit=this.Oa=a.observable(Number.POSITIVE_INFINITY);this.S=c.d.g;this.ib=function(a){var b=this.S;this.S=function(){a(b)}}.bind(this);this.I=c.d.g;this.Ea=function(a){var b=this.I;this.I=function(){a(b)}}.bind(this);p.push(g.call(this,h));p.push(f.call(this));p.push(b.call(this));p.push(l.call(this,h));this.o=function(){p.forEach(function(a){a()})}}.bind(this)};a.bindingHandlers.__gridRow=
{init:c.d.g,update:function(a,b){var d=b(),c=d.classify,e=d.row(),d=1===d.index()%2?["ko-grid-tr","ko-grid-row","alternate"]:["ko-grid-tr","ko-grid-row"],c=c(e);a.className=d.concat(c).join(" ")}};a.bindingHandlers.__gridCell={init:function(b,d){for(var c=d(),e=c.row,c=c.column,f=c();b.firstChild;)a.removeNode(b.firstChild);f.B?f.B(b,e,c):b.appendChild(v.createTextNode(""));return{controlsDescendantBindings:!0}},update:function(a,b){var d=b(),c=d.row(),d=d.column.peek();h(a,c,d)}};return p}(k,n,l,
'<tbody class="ko-grid-tbody" data-bind="_gridWidth: columns._combinedWidthInPixels() + \'px\'">\n    \x3c!--before:tbody--\x3e\n    <tr class="ko-grid-tr ko-grid-row"\n        data-bind="indexedRepeat: {\n            forEach: data.rows.displayed,\n            indexedBy: function(r) { return grid.data.observableValueSelector(ko.unwrap(r[grid.primaryKey])); },\n            as: \'row\',\n            at: \'rowIndex\',\n            allowDeviation: true,\n            onDeviation: data.rows.__handleDisplayedRowsDeviate,\n            onSynchronization: data.rows.__handleDisplayedRowsSynchronized }"\n        data-repeat-bind="__gridRow: { classify: grid.data.rows.__classify, row: row, index: rowIndex }">\n\n        <td data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\', allowElementRecycling: false }"\n            data-repeat-bind="__gridCell: { row: row, column: column }"></td>\n    </tr>\n    \x3c!--after:tbody--\x3e\n</tbody>');
l=function(a,c,d,e){function g(b){this.id=this.id="column-header-"+b.id;this.element=this.element=a.observable(null);this.rowSpan=this.rowSpan=a.observable(1);this.columnSpan=this.r=a.observable(1);this.label=this.label=b.label;this.column=this.q=b;this.columns=this.c=[b];this.ha=function(a){this.rowSpan(a)}.bind(this)}function f(b){this.id=this.id="column-group-header-"+(b.id||"@__"+ ++k);this.element=this.element=a.observable(null);this.kb=b;this.rowSpan=this.rowSpan=a.observable(b.height);this.columnSpan=
this.r=a.observable(1);this.label=this.label=a.observable(b.label);this.columns=this.c=[];this.ha=function(a){this.c=[a];this.r(1)}.bind(this)}function b(a){function b(a){a.tb.forEach(function(b){var c=d[b];if(!c)d[b]=a;else if(c!==a)throw Error("Column `"+b+"` is element of column group `"+c.label+"` as well as `"+a.label+"`.");});a.X&&b(a.X)}var d={};c.p.La(a,l.bind(this,null)).forEach(function(a){b(a)});return d}function l(a,b){var d=h(b),e=b.elements.filter(function(a){return"string"!==typeof a}),
f=b.elements.filter(function(a){return"string"===typeof a}),d={id:b.id,label:b.label,X:a,depth:a?a.depth+1:0,height:a?a.Ra-d:1,Ra:d,tb:f};return e.length?c.p.La(e,l.bind(this,d)):d}function h(a){a=a.elements.filter(function(a){return"string"!==typeof a});return 1+Math.max.apply(Math,[0].concat(a.map(h)))}var m=window.document,k=0,v={l:function(a){a.replace("head").fa("headers",e)},h:function(c,e,h){function m(a,b,d){if(!a)return[];if(b[a.depth]&&b[a.depth].kb===a){var c=a;do{var e=b[c.depth];e.c.push(d);
e.r(e.r()+1);c=c.X}while(c);return[]}b.length=a.depth;var c=m(a.X,b,d),h=e=a.depth;a=l(v,new f(a));a.ha(d);c[e]=b[h]=a;return c}function l(a,b){var d=b.id;return a[d]=a[d]||b}var k=b(c.columnGroups||[]),v={},r={},u=[];this.__rows=this.ia=a.computed(function(){var b=h.c.f(),d=0;b.forEach(function(a){a=k[a.id];d=Math.max(d,a?a.depth+a.Ra:0)});u.length=d+1;for(var c=0;c<u.length;++c)u[c]=u[c]||a.observableArray(),u[c].__rowId="header-row-"+c,u[c].valueWillMutate(),u[c]().length=0;var e=[];b.forEach(function(a){var b=
k[a.id],c=b?b.depth+b.height:0;e.length=c;var f=l(r,new g(a));f.ha(d-c+1);u[c]().push(f);a=m(b,e,a);for(b=0;b<a.length;++b)a[b]&&u[b]().push(a[b])});u.forEach(function(a){a.valueHasMutated()});return u});this.all=this.all=a.computed(function(){var a=[];this.ia().forEach(function(b){Array.prototype.push.apply(a,b())});return a}.bind(this));this.forColumn=this.Eb=function(a){a="column-header-"+a.id;if(!Object.prototype.hasOwnProperty.call(r,a))throw Error("Es existiert kein Header f\u00fcr die gegebene Spalte.");
return r[a]};var n=new d(function(b,d){return[b,a.contextFor(d).header()]});this.__handleClick=function(a,b){n.Xa(".ko-grid-column-header, .ko-grid-column-group-header").Ka(b);return!b.defaultPrevented};this.Zb=n.F.bind(n);this.Pa=function(a,b){function d(a,c){var e=arguments;c instanceof g&&b.apply(this,e)}var c=1<arguments.length;b=c?b:a;n.F.apply(n,c?[a,d]:[d])};this.onHeaderClick=this.Zb;this.onColumnHeaderClick=this.Pa;this.o=function(){this.ia.dispose();this.all.dispose()}.bind(this)}.bind(this)};
a.bindingHandlers.__gridHeader={init:function(b,d){var c=d()();c.element(b);for(a.utils.domNodeDisposal.addDisposeCallback(b,function(){c.element(null)});b.firstChild;)a.removeNode(b.firstChild);b.appendChild(m.createTextNode(""));return{controlsDescendantBindings:!0}},update:function(a,b){var d=b()(),c=d.id.replace(/[\s]/g,"_");a.className=d.q?"ko-grid-th ko-grid-column-header "+c+" "+d.q.D().join(" "):"ko-grid-th ko-grid-column-group-header "+c;c=d.c.map(function(a){return a.Ba()}).reduce(function(a,
b){return a+b})+"px";a.style.width=c;a.style.maxWidth=c;a.rowSpan=d.rowSpan();a.colSpan=d.r();a.firstChild.nodeValue=d.label()}};return v}(k,n,l,'<thead class="ko-grid-thead" data-bind="_gridWidth: columns._combinedWidthInPixels() + \'px\'">\n    \x3c!--before:thead--\x3e\n    <tr class="ko-grid-tr ko-grid-headers"\n        data-bind="indexedRepeat: { forEach: headers.__rows, indexedBy: \'__rowId\', as: \'headerRow\' }"\n        data-repeat-bind="click: headers.__handleClick">\n\n        <th class="ko-grid-th"\n            data-bind="indexedRepeat: { forEach: headerRow(), indexedBy: \'id\', as: \'header\' }"\n            data-repeat-bind="__gridHeader: header"></th>\n    </tr>\n    \x3c!--after:thead--\x3e\n</thead>');
x=function(a,c,d,e,g){a=a.bindingHandlers.grid=a.bindingHandlers.grid||{};return a.core=a.core||{columns:c,data:d,headers:e,layout:g}}(k,c,q,l,function(a,c){function d(a,d,c,e){var f=a.ja.querySelector(".ko-grid"),l=f.querySelector(".ko-grid-table-scroller-padding"),k=f.querySelector(".ko-grid-table-scroller"),r=f.querySelector(".ko-grid-thead"),n=f.querySelector(".ko-grid-tfoot"),q=!1;return function(a){if(!q)try{d(q=!0);var b=k.scrollLeft;a&&a();c.forEach(function(a){a.call(f)});g(f,function(){l.style.borderTopWidth=
Math.max(r.clientHeight,0)+"px";l.style.borderBottomWidth=Math.max(n.clientHeight,0)+"px"});k.scrollLeft=b;e.forEach(function(a){a.call(f)})}finally{d(!1),q=!1}}}function e(a){a=a.ja.querySelector(".ko-grid");var d=a.querySelector(".ko-grid-table-scroller"),c=a.querySelector(".ko-grid-thead"),e=a.querySelector(".ko-grid-tfoot");d.addEventListener("scroll",function(){var a=-d.scrollLeft+"px";c.style.left=a;e.style.left=a})}function g(a,d){if(a.offsetParent)d();else{var c=a.parentNode,e=f.createComment("placeholder");
c.replaceChild(e,a);var g=a.style.position;a.style.position="absolute";a.style.visibility="hidden";f.body.appendChild(a);try{d()}finally{c.replaceChild(a,e),a.style.position=g,a.style.visibility="visible"}}}var f=window.document;return{l:c.d.g,h:function(b,c,h){function g(a){a&&a()}var l=a.observable(!1);this.recalculate=this.Va=function(a){g(a)};var k=a.computed(function(){l()||(h.c.f().forEach(function(a){a.width()}),g())}),p=[],r=[];this.pb=function(a){p.push(a)};this.nb=function(a){r.push(a)};
this.beforeRelayout=this.pb;this.afterRelayout=this.nb;this.I=function(){e.call(this,h);g=d(h,l,p,r);g()}.bind(this);this.determineCellDimensions=this.zb=function(a){var b=f.createElement("div");b.className="ko-grid-td ko-grid-cell";b.appendChild("string"===typeof a?f.createTextNode(a):a);b.style.position="absolute";b.style.visibility="hidden";f.body.appendChild(b);try{return{width:b.offsetWidth,height:b.offsetHeight}}finally{f.body.removeChild(b)}};this.o=function(){k.dispose()}}.bind(this)}}(k,
n));(function(a,c){function d(a,d){if(c.e.Z(f,a))throw Error("Extension id or alias already in use: `"+a+"`.");return f[a]=d}function e(a){this.na=a.na||[];this.ta=a.ta||c.d.g;this.h=a.h}var g=a.bindingHandlers.grid=a.bindingHandlers.grid||{},f=g.extensions=g.extensions||{};g.ma=function(a,c){d(a,new e(c))};g.va=function(a){if(!c.e.Z(f,a))throw Error("No known extension id or alias: `"+a+"`.");return f[a]};g.la=function(a,c){return d(a,g.va(c))};return f})(k,n);return function(a){return a}(function(a,
c,d){function e(c,e){function f(){var a=k[c];e(a.ub,a.ic,a.Db)}k[c]?f():a([c],function(a){function e(f){var h=b.va(f);if(!d.p.contains(p,f)){if(!h)throw Error("Extension  '"+f+"' is not defined/loaded.");if(d.p.contains(n,f))throw Error("Dependency-Cycle: .. -> "+n.join(" -> ")+" -> "+f+" -> ..");if(!l[f])throw Error("The extension '"+f+"' must be configured (configuration: '"+c+"')");n.push(f);h.na.forEach(e);h.ta(g,l[f],a);if(n.pop()!==f)throw Error("Assertion error.");p.push(f)}}var g=new t('<div class="ko-grid">\n    \x3c!--before:grid--\x3e\n    <div class="ko-grid-table-container">\n        \x3c!--before:table--\x3e\n        <div class="ko-grid-table-scroller-padding">\n            <div class="ko-grid-table-scroller">\n                <table class="ko-grid-table" data-bind="_gridWidth: columns._combinedWidthInPixels() + \'px\'">\n                    \x3c!--columns--\x3e\n                    \x3c!--head--\x3e\n                    <tfoot class="ko-grid-tfoot" data-bind="_gridWidth: columns._combinedWidthInPixels() + \'px\'">\x3c!--tfoot--\x3e</tfoot>\n                    \x3c!--body--\x3e\n                </table>\n            </div>\n        </div>\n        \x3c!--after:table--\x3e\n    </div>\n    \x3c!--after:grid--\x3e\n</div>');
h.forEach(function(b){b.l(g,a)});var l=a.extensions,p=[],n=[];d.e.ra(l,e);var r="grid-template-"+c;m.mb(r,g.rb());k[c]={ub:a,ic:r,Db:p};f()})}function g(a,b){this.elementId=this.Cb=a.id;this.primaryKey=this.primaryKey=b.primaryKey;this.ja=a;c.observableArray([]);this.o=d.d.g}var f=window.document,b=c.bindingHandlers.grid=c.bindingHandlers.grid||{},l=["columns","headers","data","layout"],h=l.map(function(a){return x[a]}),m=new c.nativeTemplateEngine;m.mb=function(a,b){var c=f.createElement("script");
c.id=a;c.type="text/html";c.text=b;f.querySelector("head").appendChild(c)};c.bindingHandlers.grid.init=function(a,f,h,k,n){var q=f();e(q.config,function(e,f,h){var k=[],p=new g(a,q);c.utils.domNodeDisposal.addDisposeCallback(a,function(){p.o();k.forEach(function(a){a()})});d.e.ra(x,function(a,b){var c=new b.h(q,e,p);p[a]=c;p.c=p.columns;p.headers=p.headers;p.data=p.data;p.Pb=p.layout;"function"===typeof c.o&&k.push(c.o.bind(c))});var t=e.extensions,y=q.extensions,A=p.extensions={};for(h.forEach(function(a){var c=
b.va(a),d=t[a],f=y?y[a]||{}:{};!1===d.enabled&&!0!==f.enabled||!1===f.enabled||(c.na.forEach(function(a){if(!A[a])throw Error("Dependency '"+a+"' was disabled.");}),c=new c.h(f,d,p,q,e),A[a]=c,"function"===typeof c.dispose&&k.push(c.dispose.bind(c)))});a.firstChild;)c.removeNode(a.firstChild);l.forEach(function(a){p[a].S&&p[a].S()});h=n.createChildContext(p,"grid");c.renderTemplate(f,h,{templateEngine:m},a);var w=a.querySelector(".ko-grid");d.e.ra(t,function(a){w.className+=" with-"+d.hc.wb(a)});
l.forEach(function(a){p[a].I&&p[a].I()})});return{controlsDescendantBindings:!0}};c.bindingHandlers.grid.update=d.d.g;var k={};c.bindingHandlers._gridWidth={init:d.d.g,update:function(a,b){var c=b();a.style.width=c;a.style.maxWidth=c}};return b}(L,k,n))}(I,z,J,w);Q=function(q,n,c,k,t){return function(c){return c}(function(c,k){k.ma("ko-grid-aggregate",{ta:function(a){a.jc().bc("aggregates",'<tr class="ko-grid-tr" data-bind="indexedRepeat: {  forEach: extensions.aggregate.__aggregateRows,  indexedBy: \'id\',  as: \'aggregateRow\'}">  <td class="ko-grid-tf ko-grid-aggregate"    data-bind="indexedRepeat: {      forEach: columns.displayed,      indexedBy: \'id\',      as: \'column\'    }"    data-repeat-bind="      __gridAggregate: aggregateRow()[column().id],      _gridWidth: column().width()"></td></tr>')},
h:function(a,k,d){var e=c.observable([]);this.__aggregateRows=e;if(Array.isArray(a)){var g=[];a.forEach(function(a){Object.keys(a).forEach(function(a){a=d.c.V(a).n;0>g.indexOf(a)&&g.push(a)})});var f=0,b=c.computed(function(){var b={},c=d.data.rows.all(),l=c.length;g.forEach(function(a){b[a]={minimum:Number.POSITIVE_INFINITY,maximum:Number.NEGATIVE_INFINITY,sum:0}});c.forEach(function(a){g.forEach(function(c){var e=b[c];c=d.data.ea(a[c]);e.minimum=Math.min(e.minimum,c);e.maximum=Math.max(e.maximum,
c);e.sum+=c})});e(a.map(function(a){var c={id:""+ ++f};d.c.f().forEach(function(d){var e=d.id,f=d.n,h=a[e];if(h){if(l)if(f="average"===h?b[f].sum/l:b[f][h],1<=Math.abs(f))f=f.toLocaleString();else var g=-Math.floor(Math.log(f)/Math.log(10)),f=f.toLocaleString(void 0,{maximumFractionDigits:g+1});else f="N/A";d={q:d,ka:h,value:f}}else d={q:d};c[e]=d});return c}))});this.dispose=function(){b.dispose()}}}});c.bindingHandlers.__gridAggregate={init:function(a){for(;a.firstChild;)c.removeNode(a.firstChild);
a.appendChild(window.document.createTextNode(""));return{controlsDescendantBindings:!0}},update:function(a,c){var d=c();a.className=["ko-grid-tf ko-grid-aggregate"+(d.ka?" "+d.ka:"")].concat(d.q.Ma()).join(" ");a.firstChild.nodeValue=d.ka?d.value:""}};return k.la("aggregate","ko-grid-aggregate")}(t,c))}(I,z,K,J,w);R=function(q,n,c,k,t){return function(c){return c}(function(c,k){k.ma("ko-grid-links",{h:function(a,k,d){Object.keys(a).forEach(function(e){var g=d.c.V(e),f=a[e].uri,b=a[e].label,k="function"===
typeof f?f:function(a){return d.data.wa(c.unwrap(a[f]))},h="function"===typeof b?b:function(a){return d.data.wa(c.unwrap(a[b||g.n]))};g.Sa(function(){return{l:function(a){var b=window.document.createElement("a");b.appendChild(window.document.createTextNode(""));a.appendChild(b)},update:function(a,b,c){a.firstChild.firstChild.nodeValue=h(c);a.firstChild.href=k(c)}}})})}});return k.la("links","ko-grid-links")}(t,c))}(I,z,K,J,w);z=function(q,n,c){return function(c){return c}(function(c){function n(c,
k){this.s=c;this.jb=k||new n(function(a,k){return c(k,a)},this)}n.prototype={reverse:function(){return this.jb}};c.ma("ko-grid-sorting",{h:function(c,k,a){function q(d){if(d===g)f="ascending"===f?"descending":"ascending",b=b.reverse();else{g&&g.D.removeAll(["ascending-order","descending-order"]);g=d;var k=c.xc;k?f="descending"===k?"descending":"ascending":f="ascending";b=new n(e(d));"descending"===f&&(b=b.reverse())}k=g.D().filter(function(a){return"ascending-order"!==a&&"descending-order"!==a});
k.push("ascending"===f?"ascending-order":"descending-order");d.D(k);a.data.s(b.s)}function d(b){return(b=a.data.ea(b))&&"function"===typeof b.valueOf?b.valueOf():b}function e(a){return function(b,c){var e=d(b[a.n]),f=d(c[a.n]);return null===e&&null===f?0:null===e?-1:null===f?1:"string"===typeof e&&"string"===typeof f?e.localeCompare(f):e<=f?e<f?-1:0:1}}var g,f,b;c.Jb&&q(a.c.V(c.Jb));a.headers.Pa(function(a,b){a.defaultPrevented||(a.preventDefault(),q(b.q))});var u=a.data.s.subscribe(function(c){g&&
(c!==b.s&&(g.D.removeAll(["ascending-order","descending-order"]),g=f=b=null),a.Pb.Va())});this.dispose=function(){u.dispose()}}});return c.la("sorting","ko-grid-sorting")}(c))}(I,z,K,J,w);return function(q){return q}({dataSource:E,grid:K,extensions:{aggregate:Q,links:R,sorting:z}})});
