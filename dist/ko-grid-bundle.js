/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
var A;
(function(X){"function"===typeof define&&define.amd?define(["require","knockout"],X):window["ko-grid-bundle"]=X(function(D,B){if(!Array.isArray(D)||1!==D.length||"string"!==typeof D[0]||"function"!==typeof B)throw Error("Assertion error.");var E=window.ko.bindingHandlers.grid.config=window.ko.bindingHandlers.grid.config||{};B(E[D[0]])},window.ko)})(function(X,D){var B,E,F,G,H,ca,I,J,K,da,Y,V,Z,Q,T,ea,fa,ga,ha,ia,ja,aa,ka,la,ma,na,oa,pa;B=function(){var y;y=function(){function v(u,n){return Object.prototype.hasOwnProperty.call(u,n)}
return{ve:function(u,n){if(u===n)return!0;var g=!!n&&"function"===typeof n.valueOf;return!!u&&"function"===typeof u.valueOf&&g&&u.valueOf()===n.valueOf()},extend:function(u,n){Array.prototype.slice.call(arguments,1).forEach(function(g){for(var p=Object.keys(g),d=0,q=p.length;d<q;d++){var h=p[d],e=Object.getOwnPropertyDescriptor(g,h);void 0!==e&&e.enumerable&&Object.defineProperty(u,h,e)}});return u},ea:function(u,n){for(var g in u)v(u,g)&&n(g,u[g])},w:v,rd:function(u,n){var g={},p;for(p in u)v(u,
p)&&(g[p]=n(u[p],p,u));return g}}}();return function(v){return v}(function(v,u,n){return{o:v,c:u,La:n}}(function(v){function u(d){return d.filter(function(d,h,e){return e.lastIndexOf(d)===h})}function n(d,q){for(var h=d.length,e=-1,a=0;a<h;++a)if(q(d[a])){if(0<=e)throw Error("Multiple elements match the predicate.");e=a}return e}function g(d,q){return d&&"function"===typeof d.valueOf&&q&&"function"===typeof q.valueOf?d.valueOf()<=q.valueOf()?d.valueOf()<q.valueOf()?-1:0:1:d<=q?d<q?-1:0:1}function p(d,
q){var h=d.length,e=Array(h),a=Array(h),r;for(r=0;r<h;++r)e[r]=r,a[r]=d[r];r=d;d=a;a=r;e.sort(function(a,m){return q(d[a],d[m])||a-m});for(r=0;r<h;++r)a[r]=d[e[r]];return a}return{contains:function(d,q){return 0<=d.indexOf(q)},ad:function(d){if(50<d.length){for(var q=d.length,h={},e,a=0;a<q;++a)if(e=d[a],"string"===typeof e)if(v.w(h,e))break;else h[e]=!0;else if(d.lastIndexOf(e)!==a)break;if(!(a>=q)){for(var r=d.slice(0,a);a<q;++a)e=d[a],"string"===typeof e?v.w(h,e)||(h[e]=!0,r.push(e)):d.lastIndexOf(e)===
a&&r.push(e);d=r}}else d=u(d);return d},lc:function(d,q){return Array.prototype.concat.apply([],d.map(q))},Gd:function(d,q){var h=n(d,q);if(0>h)throw Error("None of the elements matches the predicate.");return d[h]},Hb:function(d,q){var h=n(d,q);return 0<=h?d[h]:null},Ib:function(d,q){var h=q||g;window.chrome?h=p(d,h):(d.sort(h),h=d);return h}}}(y),y,{Wc:function(v){return v.replace(/([A-Z])/g,function(u){return"-"+u.toLowerCase()})},Xc:function(v){return v.replace(/-([a-z])/g,function(u){return u[1].toUpperCase()})},
format:function(v){var u=arguments;return v.replace(/{(\d+)}/g,function(n,g){var p=parseInt(g,10)+1;return typeof u.length<=p?n:u[p]})}}))}();E=function(y){return function(v){return v}(function(v){function u(p){var d={get length(){return this.length},contains:function(d){return 0<=this.hb(d)},filter:function(d){for(var h=this.length,e=[],a=0;a<h;++a){var r=this.get(a);d(r,a,this)&&e.push(r)}return new n(e)},forEach:function(d){for(var h=this.length,e=0;e<h;++e)d(this.get(e),e,this)},get:function(d){return this.get(d)},
map:function(d){for(var h=this.length,e=Array(h),a=0;a<h;++a)e[a]=d(this.get(a),a,this);return new n(e)},readOnly:function(){return new g(this)},reduce:function(d,h){var e=1<arguments.length,a=this.length;if(!e&&0===a)throw new TypeError("An empty list can not be reduced, specify an initial value.");for(var r=e?h:this.get(0),e=e?0:1;e<a;++e)r=d(r,this.get(e));return r},slice:function(d,h){var e=this.length;d=0>=arguments.length?0:0<=d?d:e+d;h=1>=arguments.length?e:0<=h?h:e+h;for(var e=h-d,a=Array(e),
r=0;r<e;++r)a[r]=this.get(d+r);return new n(a)},Aa:function(){for(var d=this.length,h=Array(d),e=0;e<d;++e)h[e]=this.get(e);return h},hb:function(d){for(var h=this.length,e=0;e<h;++e)if(this.get(e)===d)return e;return-1}};return v.c.extend(d,{get length(){return this.length},contains:d.contains,filter:d.filter,forEach:d.forEach,get:function(d){return this.get(d)},map:d.map,readOnly:d.readOnly,reduce:d.reduce,slice:d.slice,toArray:d.Aa,tryFirstIndexOf:d.hb},p)}function n(p){this.Tb=p}function g(p){this.Qa=
p}n.prototype=u({get length(){return this.Tb.length},get:function(p){return this.Tb[p]},Aa:function(){return this.Tb.slice()}});g.prototype=u({get length(){return this.Qa.length},get:function(p){return this.Qa.get(p)}});return{bb:function(p){return new n(p||[])},pd:u}}(y))}(B);F=function(y,v){return function(u){return u}(function(u,n){function g(a){if("string"!==typeof a)throw Error("Ids must be strings. (given: `"+a+"`, type: `"+typeof a+"`)");return a}function p(a,r){return u.c.w(a,g(r))?a[r]:-1}
function d(a,r){var d=p(a,r);if(0>d)throw Error("No element with id `"+r+"`.");return d}function q(a,d,e,m,c){if(m>=c)return m;var b=Math.floor((m+c)/2);return 0>d(e,a[b])?q(a,d,e,m,b):q(a,d,e,b+1,c)}function h(a,d,e,m,c){function b(c,b){var k=f.length,w=d.slice(c,b);f=f.concat(w);w.forEach(function(c){e[a(c)]=k;++k})}var f=[],k=0;m.forEach(function(a){b(k,a);k=a;c(f)});b(k,d.length);return f}function e(a){this.S=function(d){return g(a(d))};this.C=[];this.I={};this.V=null}e.prototype=n.pd({get length(){return this.C.length},
get:function(a){return this.C[a]},gd:function(a){return this.C[d(this.I,a)]},gf:function(a){a=p(this.I,a);return 0<=a?this.C[a]:null},clear:function(){this.C=[];this.I={}},contains:function(a){a=(0,this.S)(a);return 0<=p(this.I,a)},gc:function(a){return 0<=p(this.I,a)},removeAll:function(a){this.Ed(a.map(this.S))},Ed:function(a){if(a.length){var r=this.S,e=this.C,m=this.I;a=a.map(function(c){return d(m,c)+1});a.sort(function(c,b){return c-b});this.C=h(r,e,m,a,function(c){c=c.pop();c=r(c);delete m[c]})}},
Hd:function(a){var d=this.S,e=this.C,m=this.I;this.V=a;u.o.Ib(e,a);a=!1;for(var c=0;c<e.length;++c){var b=d(e[c]);a=a||m[b]!==c;m[b]=c}return a},Mb:function(a){if(this.V)throw Error("`updateAll` must not be called on a sorted `IndexedTable`. Use a combination of order-preserving `tryUpdateAll`, `removeAll` and `insertAll` instead.");if(a.length){var r=this.S,e=this.C,m=this.I;a.forEach(function(c){var b=d(m,r(c));e[b]=c})}},Kd:function(a){if(!this.V)throw Error("`tryUpdateAll` is designed for sorted `IndexedTable`s. For unsorted ones, use `updateAll` instead.");
if(!a.length)return[];var r=this.S,e=this.C,m=this.I,c=this.V,b=[];a.forEach(function(f){var a=d(m,r(f));0!==c(f,e[a])?b.push(f):e[a]=f});return b},qa:function(a){if(this.V)throw Error("`addAll` must not be called on an sorted `IndexedTable`. Use order-preserving `insertAll` instead.");if(a.length){var d=this.S,e=this.C,m=this.I;a.forEach(function(c){var b=d(c);if(u.c.w(m,b))throw Error("The list already contains an element with id `"+b+"`. Did you mean to call `updateAll`?.");m[b]=e.push(c)-1})}},
md:function(a){if(!this.V)throw Error("`insertAll` is designed for sorted `IndexedTable`s. For unsorted ones, use `addAll` instead.");if(a.length){var d=this.S,e=this.C,m=this.I,c=this.V;u.o.Ib(a,c);var b=0,f=[];a.forEach(function(a){a=q(e,c,a,b,e.length);f.push(a);b=a});b=0;this.C=h(d,e,m,f,function(c){var f=a[b],l=d(f),x=c.length;c.push(f);m[l]=x;++b})}}});return e}(v,y))}(E,B);G=function(y){var v,u,n;v=function(g){return function(p,d){return g.c.extend(p,{get stringifyable(){return d()}})}}(y);
u=function(g,p){function d(){return 0}function q(a,d){return"string"===typeof a&&"string"===typeof d?a.localeCompare(d):a<=d?a<d?-1:0:1}function h(d,h){g.c.extend(d,{get onResultOf(){return this.va},get reverse(){return this.reverse},get callable(){return this.Ua}},{get va(){return function(a){return e(a,d)}},get reverse(){return function(){return h||a(d)}},get Ua(){return d}})}function e(a,d){function m(c,b){return d(a(c),a(b))}h(m);p(m,function(){return{type:"by-function-comparator","function":a.stringifyable,
comparator:d.stringifyable}});return m}function a(a){function d(m,c){return-a(m,c)}h(d,a);p(d,function(){return{type:"reversed-comparator",comparator:a.stringifyable}});return d}h(q);p(q,function(){return{type:"natural-comparator"}});h(d);p(d,function(){return{type:"indifferent-comparator"}});return{ld:d,Pe:q}}(y,v);n=function(g,p){function d(d){g.c.extend(d,{get callable(){return this.Ua}},{get Ua(){return d}})}return{xc:function(g){function h(d){return d[g]}d(h);p(h,function(){return{type:"property-accessor",
propertyName:g}});return h}}}(y,v);y=function(g,p){function d(){return!0}function q(){return!1}function h(d,c){g.c.extend(d,{get and(){return this.Ga},get negate(){return this.td},get onResultOf(){return this.va},get or(){return this.Db},get callable(){return this.Ua}},{get Ga(){return function(c){return e([d,c])}},get td(){return function(){return c||r(d)}},get va(){return function(c){return a(c,d)}},get Db(){return function(c){return M([d,c])}},get Ua(){return d}})}function e(a){function c(c){for(var f=
0,k=a.length;f<k;++f)if(!a[f](c))return!1;return!0}if(!a.length)return d;h(c);p(c,function(){return{type:"and-predicate",components:a.map(function(c){return c.stringifyable})}});return c}function a(a,c){function b(f){return c(a(f))}h(b);p(b,function(){return{type:"by-function-predicate","function":a.stringifyable,predicate:c.stringifyable}});return b}function r(a){function c(c){return!a(c)}h(c,a);p(c,function(){return{type:"negated-predicate",predicate:a.stringifyable}});return c}function M(a){function c(c){for(var f=
0,k=a.length;f<k;++f)if(a[f](c))return!0;return!1}if(!a.length)return q;h(c);p(c,function(){return{type:"or-predicate",components:a.map(function(a){return a.stringifyable})}});return c}h(q);p(q,function(){return{type:"always-false-predicate"}});h(d);p(d,function(){return{type:"always-true-predicate"}});return{a:q,Qc:d,Ga:e,Ee:function(a,c){function b(c){return a(c)}h(b);p(b,c);return b},Db:M,Cd:function(a){function c(c){return a.test(c)}h(c);p(c,function(){return{type:"regular-expression-predicate",
regularExpression:a.source,caseSensitive:!a.ignoreCase,multiline:a.multiline}});return c}}}(y,v);return function(g){return g}({ca:u,Ja:n,v:y,qd:v,df:function(g,p){return"function"===typeof p||"object"===typeof p?p.stringifyable||p:p}})}(B);H=function(y,v,u,n,g){var p,d,q,h,e,a,r,M,m;p=function(){function a(c,f,k){this.Ta=c||[];this.ib=f||[];this.eb=k||[]}a.prototype={get size(){return this.Ta.length+this.ib.length+this.eb.length},get empty(){return!this.size},xa:function(a){this.empty||a(this)}};
return a}();d={};q=function(a,b,f,k,z){function l(l,b,t){this.pb=l;this.r=b||new f(l.Ra);this.ma=t||a.observable(new k);this.ac=a.observable(this.r.readOnly());this.Ea=null;this.D=a.pureComputed(function(){this.ac();this.Ea||(this.Ea=this.r.map(this.O.P));return this.Ea}.bind(this));this.D.subscribe(function(){return this.Ea=null}.bind(this),null,"asleep")}l.prototype={get Ra(){return this.pb.Ra},get O(){return this.pb.O},get values(){return this.ac},get fa(){return this.D},rb:function(a){this.Ea&&
(a.Ta.forEach(this.O.P),this.Ea=this.r.map(this.O.Ne),a.eb.forEach(this.O.N));this.ac.valueHasMutated()},Zb:function(){this.D&&this.r.forEach(this.O.N)},Ya:function(){this.pb.Ya();this.ob()},R:function(a){return new z.Ud(this,a)},ka:function(a){return new z.fe(this,a)},Tc:function(a,c){return new z.Od(this,a,c)}};return l}(g,n,y,p,d);h=function(a,b,f){function k(a,c,b,w){f.call(this,{Ra:a,O:c},b,w);this.Oa=w.subscribe(function(a){this.rb(a)}.bind(this))}k.prototype=b.c.extend({},f.prototype,{Ya:function(){},
dispose:function(){this.Oa.dispose();this.Zb()}});return k}(g,n,q);(function(a,b,f,k,d){function l(l,b){k.call(this,l);var t=a.observable(a.unwrap(b));this.ob=function(){return t(a.unwrap(b))};this.Na=a.computed(function(){t();var l=a.unwrap(b);t(l);var C=this.r.Aa(),l=this.pb.r.filter(l).Aa(),C=new f(l,[],C);this.r.clear();this.r.qa(l);this.rb(C);C.xa(this.ma)}.bind(this));this.Oa=l.ma.subscribe(function(l){var t;t=this.Ra;for(var k=this.r,W=a.unwrap(b),O=l.Ta.filter(W),d=[],z=l.eb.filter(W),x=0,
e=l.ib.length;x<e;x++){var m=l.ib[x],r=k.gc(t(m));W(m)?r?d.push(m):O.push(m):r&&z.push(m)}t=new f(O,d,z);t.empty||(this.r.removeAll(t.eb),this.r.Mb(t.ib),this.r.qa(t.Ta),this.rb(l),t.xa(this.ma))}.bind(this))}l.prototype=b.c.extend({},k.prototype,{dispose:function(){this.Na.dispose();this.Oa.dispose();this.Zb()}});return d.Ud=l})(g,n,p,q,d);(function(a,b,f,k){function d(l,b){f.call(this,l);this.r.qa(l.r.Aa());var k=a.observable(a.unwrap(b));this.ob=function(){return k(a.unwrap(b))};this.Na=a.computed(function(){k();
var l=a.unwrap(b);k(l);this.r.Hd(l)&&this.ma.valueHasMutated()}.bind(this));this.Oa=l.ma.subscribe(function(a){var c=this.r.Kd(a.ib);this.r.removeAll(a.eb.concat(c));this.r.md(a.Ta.concat(c));this.rb(a);this.ma.valueHasMutated()}.bind(this))}d.prototype=b.c.extend({},f.prototype,{R:function(){throw Error("Filtering a sorted view is not supported.");},ka:function(){throw Error("Sorting a sorted view is not supported.");},dispose:function(){this.Na.dispose();this.Oa.dispose();this.Zb()}});return k.fe=
d})(g,n,q,d);(function(a,b,f,k){function d(l,b,k){function t(){return{offset:a.unwrap(b),i:a.unwrap(k)}}var z=l.O;this.Vb=l;this.h=a.observable(f.bb());this.D=null;var C=l.Ra,N=a.observable(t());this.ob=function(){var a=N(),c=t();a.offset===c.offset&&a.i===c.i||N(c)};this.Na=a.computed(function(){l.ma();N();var a=t();N(a);var c=l.r,b=Math.min(c.length,a.offset),f=Math.min(c.length,b+a.i),a=this.h.peek(),c=c.slice(b,f);a:if(a.length!==c.length)b=!0;else{for(b=a.length-1;0<=b;--b)if(C(a.get(b))!==C(c.get(b))){b=
!0;break a}b=!1}b&&(this.h(c),this.D&&(this.D(this.h.peek().map(z.P)),a.forEach(z.N)))}.bind(this))}d.prototype={get values(){return this.h},get fa(){this.D||(this.D=a.observable(this.values().map(this.Vb.O.P)));return this.D},Ya:function(){this.Vb.Ya();this.ob()},R:function(){throw Error("Filtering a clipped view is not supported.");},ka:function(){throw Error("Sorting a clipped view is not supported.");},Tc:function(){throw Error("Clipping a clipped view is not supported.");},dispose:function(){this.Na.dispose();
this.D&&this.h().forEach(this.Vb.O.N)}};return k.Od=d})(g,n,u,d);e={ce:h};d=function(a){function b(a,c,b){this.k=a;this.a=b?function(a,f){var t=c(f);try{return a(t)}finally{b(t)}}:function(a,b){return a(c(b))}}b.prototype={forEach:function(a){this.k.forEach(this.a.bind(null,a))},map:function(a){return new b(this,a)},reduce:function(a,c){return this.k.reduce(function(c,b){return a(c,this.a(function(a){return a},b))}.bind(this),c)}};var f=b.prototype;a.c.extend(f,{forEach:f.forEach,map:f.map,reduce:f.reduce});
return b}(n);a=function(a,b,f){function k(){return 0}function d(){return!0}function l(a,c){this.m=a;this.a=c}function x(a){this.k=a;this.a=null}function w(a,c,b){this.m=a;this.Fe=c;this.Ge=b;this.dd=!1;this.Q=this.a=this.k=this.ic=null}function t(a,c,b,l){this.e=a||d;this.l=c||k;this.offset=b||0;this.i=l||0===l?l:Number.POSITIVE_INFINITY;this.ia=Math.max(this.e===d?t.a:t.Fc,this.l===k?t.a:t.Q,0===this.offset&&this.i===Number.POSITIVE_INFINITY?t.a:t.k)}function e(a,c,b){this.key=a;this.view=c;this.X=
1;this.a=b}l.prototype={vd:function(a){return new x(this.Cb(a))},Cb:function(a){return new w(this.m,this.a,a)},Id:function(a){return this.Y(a).then(function(a){return new f(a,this.m.P.bind(this.m),this.m.N.bind(this.m))}.bind(this))},wa:function(){throw Error("`"+this.constructor+"` does not implement `openView`.");},Y:function(){throw Error("`"+this.constructor+"` does not implement `streamValues`.");},dispose:function(){throw Error("`"+this.constructor+"` does not implement `dispose`.");}};l.prototype=
b.c.extend({},{openEntryView:l.prototype.vd,openOptionalEntryView:l.prototype.Cb,streamObservables:l.prototype.Id},l.prototype);x.prototype={get value(){return this.k.value},get observable(){this.a||(this.a=this.k.ga.subscribe(function(){throw Error("Illegal state: A non-optional view for this entry is still open.");}));return this.k.observable},dispose:function(){this.a&&this.a.dispose();this.k.dispose()}};x.prototype=b.c.extend({},{get value(){return this.value},get observable(){return this.observable},
dispose:x.prototype.dispose},x.prototype);w.prototype={Ha:function(){if(this.dd)throw Error("Illegal state: Entry view was already disposed.");},get value(){this.Ha();return this.ic=this.Fe(this.Ge)},get observable(){this.Ha();return(this.k||this.ga)&&this.k},get ga(){this.Ha();if(this.a)return this.a;var b=this.m.re(this.value);this.k=b();this.a=a.observable({present:!0,observable:this.k});this.Q=b.subscribe(function(a){this.a({present:!!a,observable:a})}.bind(this));return this.a},dispose:function(){this.Ha();
this.dd=!0;this.Q&&(this.Q.dispose(),this.m.N(this.ic),this.ic=this.k=this.a=this.Q=null)}};w.prototype=b.c.extend({},{get value(){return this.value},get observable(){return this.observable},get optionalObservable(){return this.ga},dispose:w.prototype.dispose},w.prototype);t.a=0;t.Fc=1;t.Q=2;t.k=3;t.fd=function(a){return new t(a.e,a.l,a.offset,a.i)};t.prototype={Xa:function(a){return this.ia===a.ia&&this.e===a.e&&this.l===a.l&&this.offset===a.offset&&this.i===a.i},Ad:function(){if(0>=this.ia)throw Error("Unsupported operation.");
var a=[null,this.e,this.l].slice(0,this.ia);return new (t.bind.apply(t,a))},Oc:function(){return 0===this.ia?[this]:this.Ad().Oc().concat([this])},ue:function(a){var c=[[this.e],[this.l],[this.offset,this.i]][this.ia-1];return(0,[function(a){return a.R},function(a){return a.ka},function(a){return a.Tc}][this.ia-1])(a).apply(a,c)}};e.prototype={P:function(){if(0>=this.X)throw Error("Assertion error: Reference count at `"+this.X+"`.");++this.X;return this},N:function(){0===--this.X&&this.a();return this}};
l.kb=t;l.Ec=e;return l}(g,n,d);r=function(a,b){function f(a){this.Qa=a}f.prototype={forEach:function(a){this.Qa.forEach(a)},map:function(a){return new b(this,a)},reduce:function(a,c){return Promise.resolve(this.Qa.reduce(a,c))}};var k=f.prototype;a.c.extend(k,{forEach:k.forEach,map:k.map,reduce:k.reduce});return f}(n,d);d=function(a){function b(a){this.Pa=!1;(a&&a.observableProperties||[]).forEach(function(a){this.Pa=this.Pa||{};this.Pa[a]=!0}.bind(this))}b.prototype={constructor:function(b){var k=
this.Pa;if(!k)return b;var d={};Object.keys(b).forEach(function(l){d[l]=k&&k[l]?a.observable(b[l]):b[l]});return d},updater:function(a,c){var b=this.Pa;if(!b)return a;Object.keys(c).filter(function(a){return b&&b[a]}).forEach(function(b){return a[b](c[b])});return a},destructor:function(){}};return b}(g);M=function(a,b,f){function k(b){this.observable=b;this.ga=a.observable(b);this.Bd=1}return function(a,c){function d(a){if("string"!==typeof a)throw t(a);if(b.c.w(C,a))return C[a];throw Error("No entry for id `"+
a+"`.");}function w(b){var f=a(b);if("string"!==typeof f)throw t(f);Object.prototype.hasOwnProperty.call(C,f)?(f=C[f],++f.Bd):(b=new k(c.constructor(b)),f=C[f]=b);return f}function t(a){throw Error("Illegal argument: Ids must be strings ('"+a+"' is of type '"+typeof a+"').");}function e(a){var b=a.observable;a.ga(null);a.observable=null;c.destructor(b)}c=c||new f;var C={};this.P=function(a){return w(a).observable};this.re=function(a){return w(a).ga};this.N=function(c){c=a(c);var b=d(c);0===--b.Bd&&
(e(b),delete C[c])};this.Ne=function(c){return d(a(c)).observable};this.zd=function(f){f.forEach(function(f){var t=a(f);b.c.w(C,t)&&(t=C[t],t.observable||(t.observable=c.constructor(f),t.ga(t.observable)))})};this.Nb=function(f){f.forEach(function(f){var t=a(f);b.c.w(C,t)&&c.updater(C[t].observable,f)})};this.Ue=function(a){b.c.ea(C,function(b,f){var t=a(b);t?f.observable?c.updater(f.observable,t):(f.observable=c.constructor(t),f.ga(f.observable)):e(f)})};this.Zc=function(a){b.c.ea(C,function(c,b){a(c)&&
e(b)})};this.dispose=function(){this.Zc(function(){return!0})}.bind(this)}}(g,n,d);v=function(a,b,f){function k(a,c,b,f){this.me=a;this.V=c;this.le=b;this.ke=f}k.prototype=b.c.extend({get predicate(){return this.e},get comparator(){return this.l},get offset(){return this.offset},get limit(){return this.i}},{get e(){return this.me},get l(){return this.V},get offset(){return this.le},get i(){return this.ke},normalize:function(){return new k(this.e||f.v.Qc,this.l||f.ca.ld,this.offset||0,this.i||0===
this.i?this.i:Number.POSITIVE_INFINITY)},Ac:function(){return new k(a.unwrap(this.e),a.unwrap(this.l),a.unwrap(this.offset),a.unwrap(this.i))},Xa:function(a){return this.e===a.e&&this.l===a.l&&this.offset===a.offset&&this.i===a.i}});return k}(g,n,v);v=function(a,b){function f(a,c,f){b.call(this,a,c,f)}var k={rc:function(a){return new b(this.e,this.l,this.offset,a)}};f.prototype=a.c.extend({},b.prototype,k,{limitedTo:k.rc});return f}(n,v);v=function(a,b){function f(a,c){b.call(this,a,c)}var k={tc:function(a){return new b(this.e,
this.l,a)}};f.prototype=a.c.extend({},b.prototype,k,{offsetBy:k.tc});return f}(n,v);v=function(a,b){function f(a){b.call(this,a)}var k={ka:function(a){return new b(this.e,a)}};f.prototype=a.c.extend({},b.prototype,k,{sortedBy:k.ka});return f}(n,v);v=function(a,b){function f(){b.call(this)}var k={R:function(a){return new b(a)}};f.prototype=a.c.extend({},b.prototype,k,{filteredBy:k.R});return f}(n,v);m=function(a,b){function f(){b.call(this)}f.prototype=a.c.extend({},b.prototype);return f}(n,v);v=function(){function c(a,
b){b=b||new t(a);var c=new w(a);l.call(this,b,function(a){return c.gd(a)});this.mb=a;this.m=b;this.h=c;this.Da=f.observable(new x);this.u=[];var k=new d.ce(this.mb,this.m,this.h,this.Da);this.ne=this.Gc(new l.kb,k);this.aa=f.pureComputed(function(){return k.values().length})}function b(a,b){this.a=a;this.Q=b;this.aa=f.pureComputed(function(){return a.values().length});this.k=f.pureComputed(function(){return(k.o.Hb(b,function(a){return a.key.ia===l.kb.Fc})||b[0]).view.values().length})}var f=g,k=n,
d=e,l=a,x=p,w=y,t=M;c.prototype={get size(){return this.aa},Gc:function(a,b){var c=new l.Ec(a,b,function(){return this.u.splice(this.u.indexOf(c),1)}.bind(this));this.u.push(c);return c},je:function(a){var b=k.o.Hb(this.u,function(b){return a.Xa(b.key)});if(b)return b.P();var c=a.Ad(),b=k.o.Gd(this.u,function(a){return c.Xa(a.key)}).view,b=a.ue(b);return this.Gc(a,b)},qe:function(a){this.h.qa(a);(new x(a)).xa(this.Da);this.m.zd(a)},se:function(a){var b=[],c=[];a.forEach(function(a){return(this.h.contains(a)?
c:b).push(a)}.bind(this));this.h.qa(b);this.h.Mb(c);(new x(b,c)).xa(this.Da);this.m.zd(b);this.m.Nb(c)},wa:function(a){a=(a||function(a){return a})(new m);a=l.kb.fd(a).Oc().map(function(a){return this.je(a)}.bind(this));var c=a[a.length-1].view;c.Ya();return new b(c,a)},Ve:function(a){this.h.removeAll(a);(new x([],[],a)).xa(this.Da);this.m.Zc(function(a){return!this.h.gc(a)}.bind(this))},Xe:function(a){var b=this.h.Aa();this.h.clear();this.h.qa(a);(new x(a,[],b)).xa(this.Da);this.m.Ue(function(a){return this.h.gf(a)}.bind(this))},
Y:function(a){a=this.wa(a);try{return Promise.resolve(new r(a.values.peek().slice()))}finally{a.dispose()}},Nb:function(a){this.h.Mb(a);(new x([],a)).xa(this.Da);this.m.Nb(a)},dispose:function(){this.ne.N();this.m.dispose();if(this.u.length){var a=this.u.length,b=this.u.reduce(function(a,b){return a+b.X},0);window.console.warn("Some views were not or are not yet disposed ("+a+" views, "+b+" references).")}}};c.prototype=k.c.extend({},l.prototype,{get size(){return this.size},addEntries:c.prototype.qe,
dispose:c.prototype.dispose,addOrUpdateEntries:c.prototype.se,openView:c.prototype.wa,removeEntries:c.prototype.Ve,replaceEntries:c.prototype.Xe,streamValues:c.prototype.Y,updateEntries:c.prototype.Nb},c.prototype);var L=f.pureComputed(function(){return!1});b.prototype={get Va(){return L},get da(){return this.k},get $a(){return f.pureComputed(function(){return{}})},get fa(){return this.a.fa},get size(){return this.aa},get values(){return this.a.values},dispose:function(){this.Q.forEach(function(a){a.N()})}};
b.prototype=k.c.extend({get dirty(){return this.Va},get filteredSize(){return this.da},get metadata(){return this.$a},get observables(){return this.fa},get size(){return this.size},get values(){return this.values},dispose:b.prototype.dispose},b.prototype);return c}({});q=function(){function c(a,b,c){c=c||new l(a);var k={};d.call(this,c,function(a){if(!e(k,a))throw Error("No known entry with id `"+a+"`.");return k[a].value});this.mb=a;this.m=c;this.Jc=b;this.h=k;this.aa=f.observable(0);this.ie=f.pureComputed(function(){return this.aa()}.bind(this));
this.u=[]}function b(a,b,c){function l(a){if(a.e!==p||a.l!==M)return!1;for(var b=0,c=h.length;b<c;++b){var f=g[b];if(h[b]<=a.offset&&f>=a.offset+a.i)return!0}return!1}function d(a,b){if(a.e!==p||a.l!==M){var c=a.e,f=a.l;r=[];h=[];g=[];p=c;M=f}var f=c=a.offset,t=c+a.i,l,k,w;k=l=0;for(w=h.length;l<w;++l){var e=h[k]=h[l],O=g[k]=g[l];f<=O&&t>=e?(f=Math.min(e,f),t=Math.max(O,t)):++k}h.length=g.length=k;h.push(f);g.push(t>=x().filteredSize?Number.POSITIVE_INFINITY:t);l=0;for(w=b.length;l<w;++l)r[c+l]=b[l];
window.console.log("Cache ranges:");l=0;for(w=h.length;l<w;++l)window.console.log("["+h[l]+", "+g[l]+"]")}var e=f.observable(!1),O=f.observable(!1),x=f.observable({unfilteredSize:a.size.peek(),filteredSize:0}),z=k.bb(),m=f.observable(),r=[],h=[],g=[],p=null,M=null,q=f.pureComputed(function(){if(e.peek())return e();var c=b.Ac().normalize();if(l(c))return m(r.slice(c.offset,c.offset+c.i));O(!0);e(!0);window.setTimeout(function(){if(!c.Xa(b.Ac().normalize()))return e(!1);a.Jc.issue(c).then(function(b){var f=
[];b.values.reduce(function(a,b){return f.push(b)});m(f);delete b.values;a.aa(b.unfilteredSize);x(b);d(c,f)}).then(function(){O(!1);e(!1)},function(){e(!1)})})}),n=f.pureComputed(function(){q();var b=m(),b=k.bb(b);u?(u=b.map(function(b){a.Hc(b);return a.m.P(b)}),z.forEach(function(b){a.Kc(b);a.m.N(b)})):(b.forEach(a.Hc.bind(a)),z.forEach(a.Kc.bind(a)));return z=b});this.h=n;var u=null;this.D=f.pureComputed(function(){n();u||(u=z.map(a.m.P));return u});this.D.subscribe(function(){return u=null},null,
"asleep");this.k=f.pureComputed(function(){return O()});this.Ha=f.pureComputed(function(){return x()});this.a=f.pureComputed(function(){return x().filteredSize});this.aa=f.pureComputed(function(){return n().length});this.Q=function(){q.dispose();c()}}var f=g,k=u,d=a,l=M,e=n.c.w;c.prototype={get size(){return this.ie},Hc:function(a){var b=this.mb(a);e(this.h,b)?(b=this.h[b],++b.X,b.value=a):this.h[b]={X:1,value:a}},Kc:function(a){a=this.mb(a);if(!e(this.h,a))throw Error("Assertion error: Value with id `"+
a+"` was expected to be referenced.");0===--this.h[a].X&&delete this.h[a]},wa:function(a){a=(a||function(a){return a})(new m);var c=d.kb.fd(a),f=n.o.Hb(this.u,function(a){return c.Xa(a.key)});if(f)return f.P().view;a=new b(this,a,function(){return l.N()});var l=new d.Ec(c,a,function(){return this.u.splice(this.u.indexOf(l),1)}.bind(this));this.u.push(l);return a},Y:function(a){a=(a||function(a){return a})(new m);return this.Jc.issue(a.Ac().normalize()).then(function(a){return a.values})},dispose:function(){this.m.dispose();
if(this.u.length){var a=this.u.length,b=this.u.reduce(function(a,b){return a+b.X},0);window.console.warn("Some views were not or are not yet disposed ("+a+" views, "+b+" references).")}}};c.prototype=n.c.extend({},d.prototype,{get size(){return this.size},dispose:c.prototype.dispose,openView:c.prototype.wa,streamValues:c.prototype.Y},c.prototype);b.prototype={get Va(){return this.k},get da(){return this.a},get $a(){return this.Ha},get fa(){return this.D},get size(){return this.aa},get values(){return this.h},
dispose:function(){this.Q()}};b.prototype=n.c.extend({},{get dirty(){return this.Va},get filteredSize(){return this.da},get metadata(){return this.$a},get observables(){return this.fa},get size(){return this.size},get values(){return this.values},dispose:b.prototype.dispose},b.prototype);return c}({});return function(a){return a}(function(a,b,f,k,d){return{ClientSideDataSource:a,DefaultObservableStateTransitioner:b,ObservableEntries:f,ServerSideDataSource:k,streams:d}}(v,d,M,q,function(a,b){return{streamArray:function(f){return new b(a.bb(f))}}}(u,
r)))}(F,G,E,B,D);ca=function(y,v,u,n,g,p){return function(d){return d}(function(d){function g(h,e){return d.bindingHandlers[h]={init:function(a,h,g,m,c){var b=(m=d.unwrap(h()))&&m.from||g.has("from")&&g.get("from"),f=m&&m.as||g.has("as")&&g.get("as")||"entry";g={};g[f]=d.observable(null);var k=a.innerHTML,z=c.extend(g),l=!1;a.innerHTML="";var x=null,w=d.computed(function(){var c=d.unwrap(h()),w=(c=(c=d.unwrap(c&&c.identifiedBy||c))&&b.Cb(c))&&c.observable,m=!!(e||c&&w);if(m)z[f](w),l||(a.innerHTML=
k,d.applyBindingsToDescendants(z,a));else if(l)for(;a.firstChild;)d.removeNode(a.firstChild);x&&x.dispose();x=c;l=m});d.utils.domNodeDisposal.addDisposeCallback(a,function(){w.dispose();x&&x.dispose()});return{controlsDescendantBindings:!0}}}}g("optionalEntry",!0);return g("entry",!1)}(p))}(F,G,E,B,H,D);I=function(){return function(y){return y}(function(){function y(n,g){return!!(n.compareDocumentPosition(g)&16)}var v=window.Element,u=v.prototype.webkitMatchesSelector||v.prototype.mozMatchesSelector||
v.prototype.msMatchesSelector||v.prototype.matches;return{$c:function(n,g){for(var p=0;g;){if(g===n)return p;g=g.parentNode;++p}throw Error("The given node is not part of the subtree.");},qc:function(n,g){return n===g||y(n,g)},cf:y,element:{fc:function(n,g){do{if(u.call(n,g))return n;n=n.parentElement}while(n);return null},matches:function(n,g){return u.call(n,g)}}}}())}();J=function(y){var v,u,n;v=function(){function g(d){this.length=function(){return d.length};this.get=function(h){return d[h]}}
function p(d){this.length=function(){return d.length()};this.get=function(h){return d.get(h)}}function d(d){this.length=function(){return d.length};this.get=function(h){return d.get(h)}}return{Je:function(q){if(Array.isArray(q))q=g;else a:switch(typeof q.length){case "function":q=p;break a;case "number":q=d;break a;default:throw Error("Unsupported type: The `forEach` value must be an array or a list with a `length` property or method.");}return q}}}();u=function(g){function p(d){if("function"===typeof d)return d;
if("string"===typeof d)return function(e){return e[d]};throw Error("A repeat-binding must specify and indexedBy of type string (property name) or function (custom selector).");}function d(d){g.cleanNode(d);window.setTimeout(function(){g.cleanNode(d)},1);var e=d.cloneNode(!0);e.removeAttribute("data-bind");"string"===typeof d.getAttribute("data-repeat-bind")&&(e.setAttribute("data-bind",d.getAttribute("data-repeat-bind")),e.removeAttribute("data-repeat-bind"));return e}var q=window.document;return function(h,
e){var a=h.getAttribute("data-bind");this.S=p(e.indexedBy);this.Le=e.as||"$item";this.Ie=e.at||"$index";this.te=!1!==e.allowElementRecycling;this.$e=e.beforeElementRecycling||function(){};this.Ze=e.afterElementRecycled||function(){};this.Pc=!0===e.allowDeviation;this.Ye=e.onDeviation||function(){};this.af=e.onSynchronization||function(){};this.parent=h.parentNode;this.Jb=q.createComment("[repeat("+a+")");this.jc=q.createComment("repeat("+a+")]");this.Ke=d(h);this.Ce=this.Jb}}(y);n=function(){function g(){this.qb=
0;this.W={}}g.prototype={add:function(g,d){if(Object.prototype.hasOwnProperty.call(this.W,g))throw Error("Key `"+g+"` is already taken.");++this.qb;this.W[g]=d},get:function(g){return this.W[g]},remove:function(g){if(!Object.prototype.hasOwnProperty.call(this.W,g))throw Error("No entry for key  `"+g+"` present.");delete this.W[g];--this.qb},clear:function(){this.W={};this.qb=0},get size(){return this.qb},forEach:function(g){for(var d in this.W)Object.prototype.hasOwnProperty.call(this.W,d)&&g(d,this.W[d])}};
return g}();n=function(g,p){function d(a,d){this.element=a;this.we=d}function q(a,d,e,m){this.index=a;this.item=d;this.id=e;this.xd=m}var h=window.requestAnimationFrame.bind(window),e=window.cancelAnimationFrame.bind(window);return function(a,r){function M(){m((new Date).getTime()+40)}function m(a){for(;c();)if(++S,(new Date).getTime()>a){N();v=h(M);return}f()}function c(){if(S<n.length()){var c=S,f=n.get(S),k=c?w(n.get(c-1)):null,e=w(f),x=U.get(e);if(x)if(x.element.style.display="",x.we[L](c),c=
R.get(e))R.remove(e),O.insertBefore(c,u.nextSibling),u=c;else{for(;x.element!==u.nextSibling;)l(u.nextSibling);u=x.element}else y.push(new q(c,f,e,k))}else if(P)if(y.length)a.te&&P.length?(e=P.pop(),x=y.shift(),c=g.contextFor(e),a.$e(e,c),e.style.display="",z(e,x.xd),c[t](x.item),c[L](x.index),a.Ze(e,c),U.add(x.id,new d(e,c))):(e=y.shift(),x=sa.cloneNode(!0),c={},c[L]=g.observable(e.index),c[t]=g.observable(e.item),c=r.extend(c),U.add(e.id,new d(x,c)),g.applyBindings(c,x),z(x,e.xd),++ba);else{for(;P.length;)g.removeNode(P.pop());
return}else b();return!0}function b(){P=[];for(var a=n.length()-y.length,a=ba-R.size-a;0<a;--a)l(u.nextSibling);R.forEach(function(a,b){U.remove(a);P.push(b)});R.clear()}function f(){for(var a=0;a<P.length;++a)g.removeNode(P[a]);ba=n.length();k();W()}function k(){S=0;P=R=y=u=null}function z(a,b){var c=(b?U.get(b).element:qa).nextSibling;O.insertBefore(a,c)}function l(a){R.add(w(g.contextFor(a)[t]()),a);a.style.display="none";O.insertBefore(a,ra)}function x(){if(v){e(v);v=null;for(var a=0;null!==P&&
a<P.length;++a){var b=P[a];U.add(w(g.contextFor(b)[t]()),new d(b,g.contextFor(b)))}k()}}var w=a.S,t=a.Le,L=a.Ie,C=a.Pc,N=a.Ye,W=a.af,O=a.parent,qa=a.Jb,ra=a.jc,sa=a.Ke,n=null,U=new p,ba=0,S=0,u=null,v=null,y=null,R=null,P=null;this.bf=function(b){x();S=0;u=a.Jb;y=[];R=new p;n=b;if(C)m((new Date).getTime()+15);else{for(;c();)++S;f()}};this.pe=x}}(y,n);return function(g){return g}(function(g,p,d,n){return g.bindingHandlers.indexedRepeat={init:function(h,e,a,r,M){e=e();a=new d(h,e);r=a.Ce;a.parent.replaceChild(a.jc,
h);a.parent.insertBefore(a.Jb,a.jc);var m=new n(a,M);a.Pc&&g.utils.domNodeDisposal.addDisposeCallback(r,function(){m.pe()});var c=e.forEach,b=p.Je(c());return{controlsDescendantBindings:!0,subscribable:g.computed(function(){var a=new b(c());g.ignoreDependencies(m.bf,m,[a])},null,{disposeWhenNodeIsRemoved:r})}}}}(y,v,u,n))}(D);K=function(y,v,u,n,g,p,d,q){var h,e;y=function(a,d){function e(a){var b={key:["char","charCode","key","keyCode"],mouse:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" ")},
b="altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp type view which".split(" ").concat(b[a.type.substr(0,3)]||[]).concat(b[a.type.substr(0,5)]||[]);this.k=a;this.a=a.defaultPrevented;b.forEach(function(b){return Object.defineProperty(this,b,{get:function(){return a[b]}})}.bind(this))}function m(a,b){this.nc=a;this.Fd=b}e.prototype={preventDefault:function(){this.a=!0;return this.k.preventDefault()},Fb:function(){this.a=!0},get defaultPrevented(){return this.a}};
e.prototype=a.c.extend({},{get defaultPrevented(){return this.defaultPrevented},preventDefault:e.prototype.preventDefault,preventApplicationButAllowBrowserDefault:e.prototype.Fb},e.prototype);return function(c){function b(b,c,l){function e(a){a=Array.prototype.slice.call(b.querySelectorAll(a)).filter(function(a){return d.qc(a,c.target)});return a.length?a[a.length-1]:void 0}var w=d.$c.bind(null,b),t=f.map(function(a){var c=a.Fd?e(a.Fd):b;return{nc:a.nc,match:c,depth:c?w(c):-1}}).filter(function(a){return!!a.match});
a.o.Ib(t,function(a,b){return b.depth-a.depth});t.forEach(function(a){a.nc.apply(b,l)})}c=c||function(a){return[a]};var f=[];this.ya=function(a,b){var c=1<arguments.length?a:void 0;b=1<arguments.length?b:a;f.push(new m(b,c));return{dispose:function(){b&&(f.splice(f.indexOf(b),1),b=null)}}};this.yc=function(a){return{hc:function(f){var l=d.element.fc(f.target,a);l&&(f=new e(f),b(l,f,c(f,l)))}}}}}(g,y);h=function(){var a=/^[a-z]+(-[a-z]+)*$/,d=/\x3c!--(?:(before|after):)?([a-z]+(-[a-z]+)*)--\x3e*/g;
return function(e){function m(a,d){d=d||function(a,b){return b+a};return function(k){var t=c(k,a);return{L:function(a,l){var k=l?a:null,e=(l=l?l:a)?k:null,w=l,k=d;e&&f(e,2);b(w);e=e?c(e,3)+w+c(e,4):w;k=k(t,e);z=z.replace(t,k)}}}}function c(a,b){function c(b){if(k[a]!==b)throw Error("Operation is not defined for placeholder `"+a+"`.");}if(!k[a])throw Error("Unknown placeholder id `"+a+"`.");var f="\x3c!--"+a+"--\x3e",d="\x3c!--before:"+a+"--\x3e",e="\x3c!--after:"+a+"--\x3e";switch(b){case 1:return c(1),
delete k[a],f;case 2:return c(1),f;case 3:return c(2),d;case 4:return c(2),e;case 5:case 6:return 1===k[a]?f:5===b?e:d}throw Error("Assertion error. Unkown operator: `"+b+"`");}function b(a){for(var b;b=d.exec(a);){var c=b[1],k="before"===c;b=b[2];if(c&&1!==(a.match(new RegExp((k?"after":"before")+":"+b,"g"))||[]).length)throw Error("Multiple or unmatched before-/after-placeholders for placeholder id `"+b+"`.");c&&!k||f(b,c?2:1)}}function f(b,c){if(!a.test(b))throw Error("Invalid placeholder id `"+
b+"`");if(k[b])throw Error("Placeholder id `"+b+"` is already taken.");k[b]=c}var k={},z=e;b(z);this.pc=m(2);this.dc=m(3);this.sb=m(4,function(a,b){return a+b});this.replace=function(a){return{Bc:m(1,function(a,b){return b})(a).L}};this.gb=function(a){return{append:m(5)(a).L,wc:m(6,function(a,b){return a+b})(a).L}};this.ye=function(){return z.replace(d,"")}}}();v=function(a,d,e){function m(a){return null===a?"":""+a}function c(b,c,k){this.id=this.id=k.id;this.property=this.G=k.property||this.id;this.userDefined=
this.Ob=!1!==k.Ob;this.ba=!k.hidden;(function(){return this.ba}).bind(this);this.visible=this.visible;this.label=this.label=a.observable(k.label);this.width=this.width=a.observable(k.width);this.widthInPixels=this.Ca=function(){var a=this.width();if("px"!==a.substr(-2))throw Error("The only currently supported column width values are absolute pixel lengths.");return parseInt(a.substring(0,a.length-2),10)}.bind(this);this.Ka=a.observableArray(k.headerClasses||k.classes||[]);this.Rc=a.observableArray(k.cellClasses||
k.classes||[]);this.ed=a.observableArray(k.footerClasses||k.classes||[]);this.headerClasses=this.Ka;this.cellClasses=this.Rc;this.footerClasses=this.ed;this.metadata=this.$a=c.columnMetadataSupplier?c.columnMetadataSupplier(b.xe,k):{};this.renderValue=this.za=c.cellValueRenderer?c.cellValueRenderer.bind(void 0,this):m;this.a=function(a){this.za=a(this.za)}.bind(this);this.Eb=function(a){a=this.Nc(a,{n:this.Yb,update:this.$b});if(!a||!a.n||!a.update)throw Error("The cell value binding must define an `init` as well as an `update` method.");
this.Yb=a.n;this.$b=a.update}.bind(this);this.Nc=function(a,b){var c=a(d.c.extend({n:b.n,update:b.update},{init:b.n,update:b.update}));return{n:c.n||c.init,update:c.update||c.update}};this.overrideValueRendering=this.a;this.overrideValueBinding=this.Eb}a.bindingHandlers.__gridColumn={init:function(){},update:function(a,c){var d=c();a.style.width=d.width()}};return{n:function(a){a.replace("columns").Bc(e)},g:function(b,f,d){function e(a){a=new c(d,f,a);f.columnInitializer&&f.columnInitializer(a);return a}
var l=[];this.all=this.all=a.observableArray(b.columns.map(e));this.byId=this.ra=function(a){var b=this.Jd(a);if(!b)throw Error("The column id `"+a+"` is undefined.");return b}.bind(this);this.tryById=this.Jd=function(a){var b=this.all().filter(function(b){return b.id===a});if(1<b.length)throw Error("Assertion error: Multiple columns with id `"+a+"`.");return b[0]}.bind(this);var m=a.observable(this.all().filter(function(a){return a.ba}));this.displayed=this.s=function(){return m()};this.show=function(a){this.fb(function(b){return b.ba||
b===a})}.bind(this);this.He=function(a){this.fb(function(b){return b.ba&&b!==a})}.bind(this);this.show=this.show;this.hide=this.He;this.reorder=this.We=function(a){var b=this.all().slice(),c=[];a.forEach(function(a){b.splice(b.indexOf(a),1);c.push(a)});if(b.length)throw Error("The new column order must contain all columns.");this.all(c);this.fb(function(a){return a.ba})}.bind(this);this.showOnlyThoseWhich=this.fb=function(a){var b=this.all();a=b.filter(a);b.forEach(function(a){a.ba=!1});a.forEach(function(a){a.ba=
!0});m(a)}.bind(this);this.combinedWidth=this.Vc=a.pureComputed(function(){for(var a=0,b=this.s(),c=0;c<b.length;++c)a+=b[c].Ca();return a}.bind(this));this.add=this.add=function(a){a=e({Ob:!1,id:"$"+a.id,label:a.label,hidden:a.hidden||!1,width:a.width});this.all.unshift(a);this.fb(function(a){return a.ba});return a}.bind(this);this.na=function(){l.forEach(function(a){a.dispose()})}}}}(q,g,'<colgroup class="ko-grid-colgroup">\n    <col class="ko-grid-col" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\' }" data-repeat-bind="__gridColumn: column()">\n</colgroup>');
u=function(a,d,e,m,c){function b(a){this.Z(function(b){b();this.Fa=a.element.querySelector(".ko-grid-tbody")}.bind(this));return function(){this.Fa=null}.bind(this)}function f(){var b=[],c={};this.rows=this.rows=c;c.s=a.observableArray([]);c.displayed=c.s;c.Wa=a.observable(!1).extend({uf:"always"});c.displayedSynchronized=c.Wa;c.__handleDisplayedRowsDeviate=function(){this.rows.Wa(!1)}.bind(this);c.__handleDisplayedRowsSynchronized=function(){this.rows.Wa(!0)}.bind(this);var f=this.view;c.__dirty=
f.Va;b.push(f.fa.subscribe(function(a){c.s(a)}));c.s(f.fa());var d=[];c.__classify=function(a){var b=d.map(function(b){return b(a)});return Array.prototype.concat.apply([],b)};c.oc=function(a){d.push(a)};c.installClassifier=c.oc;return function(){b.forEach(function(a){a.dispose()})}}function k(){function b(c,f){var d=a.contextFor(f),k=d.row(),d=d.column();return[c,k[d.G],k,d]}function c(a){return function(b){a.yc(".ko-grid-cell").hc(b);return!b.defaultPrevented}}var f=new m(b),d=new m(b),k=new m(b),
l=new m(b);this.Re=f.ya.bind(f);this.cb=d.ya.bind(d);this.uc=k.ya.bind(k);this.Qe=l.ya.bind(l);this["onCellMouseDown "]=this.Re;this["onCellClick "]=this.cb;this["onCellDoubleClick "]=this.uc;this["onCellContextMenu "]=this.Qe;this.Z(function(a){a();this.Fa.addEventListener("mousedown",c(f));this.Fa.addEventListener("click",c(d));this.Fa.addEventListener("dblclick",c(k));this.Fa.addEventListener("contextmenu",c(l))}.bind(this));return function(){}}function g(b){function c(a,b){for(var f=a.firstChild,
d=-1;f;){if(f.nodeType===C&&"TD"===f.tagName&&0<=(" "+f.className+" ").indexOf("td")&&++d===b)return f;f=f.nextSibling}throw Error("Column `"+b+"` does not exist.");}var f=function(a){for(var b=this.Fa.firstChild,c=-1;b;){if(b.nodeType===C&&"TR"===b.tagName&&0<=(" "+b.className+" ").indexOf("ko-grid-row")&&++c===a)return b;b=b.nextSibling}throw Error("Row `"+a+"` does not exist.");}.bind(this),k=0,e={};this.rows.__handleElementRecycling=function(a,b){m(a,b,function(a,b,c){a["__@__hijacked"]=null;
l(a,b,c)})};this.rows.__handleElementRecycled=function(a,b){m(a,b,function(a,b,c,f){f.element=a;f.zc=b;a["__@__hijacked"]=f;l(a,b,c);x(a,b,c)})};var m=function(c,f,l){if(k){var t=f.row();f=this.ua(a.unwrap(t[b.primaryKey]));d.c.w(e,f)&&e[f].forEach(function(a){var f=a.J,d=b.f.s().indexOf(f);l(c.children[d],t,f,a)})}}.bind(this);this.lookupCell=this.sc=function(m,g){function h(a){function b(){1===f.length?delete e[C]:f.splice(f.indexOf(c),1);--k;c.element["__@__hijacked"]===c&&(c.element["__@__hijacked"]=
null,l(c.element,c.zc,c.J),x(c.element,c.zc,c.J))}if(L["__@__hijacked"])throw Error("Illegal state: This cell is already hijacked.");a=g.Nc(a||function(a){return a},{n:g.Yb||w,update:g.$b||t});var c=L["__@__hijacked"]={element:L,zc:m,J:g,n:a.n,update:a.update},f=e[C]=e[C]||[];f.push(c);++k;l(L,m,g);x(L,m,g);return d.c.extend({Dd:b,dispose:b},{dispose:b,release:b})}var C=this.ua(a.unwrap(m[b.primaryKey])),N=this.rows.s().hb(m),z=b.f.s().indexOf(g),L=c(f(N),z);return d.c.extend({element:L,hd:h},{element:L,
hijack:h})}.bind(this);return function(){}}function l(b,c,f){for(var d=b["__@__hijacked"];b.firstChild;)a.removeNode(b.firstChild);(d&&d.n||f.Yb||w)(b,c,f)}function x(a,b,c){var f=b[c.G],d=a["__@__hijacked"],k=c.Rc.peek().join(" ");a.className="ko-grid-td ko-grid-cell "+k;(d&&d.update||c.$b||t)(a,f,b,c)}function w(a){a.insertBefore(N.createTextNode(""),a.firstChild)}function t(b,c,f,d){for(b=b.firstChild;b.nodeType!==h;)b=b.nextSibling;b.nodeValue=d.za(a.unwrap(c))}var h=window.Node.TEXT_NODE,C=window.Node.ELEMENT_NODE,
N=window.document;a.bindingHandlers.__gridRow={init:function(){},update:function(a,b){var c=b(),f=c.classify,d=c.row(),c=1===c.index()%2?["ko-grid-tr","ko-grid-row","alternate"]:["ko-grid-tr","ko-grid-row"],f=f(d);a.className=c.concat(f).join(" ")}};a.bindingHandlers.__gridCell={init:function(a,b){var c=b();l(a,c.row,c.column());return{controlsDescendantBindings:!0}},update:function(a,b){var c=b(),f=c.row(),c=c.column.peek();x(a,f,c)}};return{n:function(a){a.replace("body").Bc("body",c);a.gb("table").wc("<div class=\"ko-grid-load-indicator\" data-bind=\"style: { display: data.rows.__dirty() ? 'block' : 'none' }\">Loading&hellip;</div>")},
g:function(c,d,l){var t=[];this.source=c.dataSource;this.valueSelector=this.Ba=c.valueSelector||d.valueSelector||function(a){return a};this.observableValueSelector=this.ua=c.observableValueSelector||d.observableValueSelector||this.Ba;this.predicates=this.v=a.observableArray(c.filters||[]);this.predicate=this.e=a.pureComputed(function(){return e.v.Ga(this.v().map(a.unwrap))}.bind(this));this.comparator=this.l=a.observable(e.ca.ld);this.offset=this.offset=a.observable(0);this.limit=this.i=a.observable(Number.POSITIVE_INFINITY);
c=this.source.wa(function(a){return a.R(this.e).ka(this.l).tc(this.offset).rc(this.i)}.bind(this));t.push(c.dispose.bind(c));this.view=this.view=c;this.Sa=function(){};this.Z=function(a){var b=this.Sa;this.Sa=function(){a(b)}}.bind(this);t.push(b.call(this,l));t.push(f.call(this));t.push(k.call(this));t.push(g.call(this,l));this.na=function(){t.forEach(function(a){a()})}}}}(q,g,u,y,'<tbody class="ko-grid-tbody" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n    <tr class="ko-grid-tr ko-grid-row"\n        data-bind="indexedRepeat: {\n            forEach: data.rows.displayed,\n            indexedBy: function(r) { return grid.data.observableValueSelector(ko.unwrap(r[grid.primaryKey])); },\n            as: \'row\',\n            at: \'rowIndex\',\n            beforeElementRecycling: data.rows.__handleElementRecycling,\n            afterElementRecycled: data.rows.__handleElementRecycled,\n            allowDeviation: true,\n            onDeviation: data.rows.__handleDisplayedRowsDeviate,\n            onSynchronization: data.rows.__handleDisplayedRowsSynchronized }"\n        data-repeat-bind="__gridRow: { classify: grid.data.rows.__classify, row: row, index: rowIndex }">\n\n        <td data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\', allowElementRecycling: false }"\n            data-repeat-bind="__gridCell: { row: row, column: column }"></td>\n    </tr>\n</tbody>');
n=function(a,d,e,m){function c(b){this.id=this.id="column-header-"+b.id;this.element=this.element=a.observable(null);this.rowSpan=this.rowSpan=a.observable(1);this.columnSpan=this.sa=a.observable(1);this.label=this.label=b.label;this.column=this.J=b;this.columns=this.f=[b];this.Wb=function(a){this.rowSpan(a)}.bind(this)}function b(b){this.id=this.id="column-group-header-"+(b.id||"@__"+ ++w);this.element=this.element=a.observable(null);this.oe=b;this.rowSpan=this.rowSpan=a.observable(b.height);this.columnSpan=
this.sa=a.observable(1);this.label=this.label=a.observable(b.label);this.columns=this.f=[];this.Wb=function(a){this.f=[a];this.sa(1)}.bind(this)}function f(a){function b(a){a.ze.forEach(function(b){var f=c[b];if(!f)c[b]=a;else if(f!==a)throw Error("Column `"+b+"` is element of column group `"+f.label+"` as well as `"+a.label+"`.");});a.vb&&b(a.vb)}var c={};d.o.lc(a,k.bind(this,null)).forEach(function(a){b(a)});return c}function k(a,b){var c=g(b),f=b.elements.filter(function(a){return"string"!==typeof a}),
l=b.elements.filter(function(a){return"string"===typeof a}),c={id:b.id,label:b.label,vb:a,depth:a?a.depth+1:0,height:a?a.wd-c:1,wd:c,ze:l};return f.length?d.o.lc(f,k.bind(this,c)):c}function g(a){a=a.elements.filter(function(a){return"string"!==typeof a});return 1+Math.max.apply(Math,[0].concat(a.map(g)))}var l=window.document,x=window.Node,w=0;a.bindingHandlers.__gridHeader={init:function(b,c){var f=c()();f.element(b);a.utils.domNodeDisposal.addDisposeCallback(b,function(){f.element(null)});for(var d=
b.firstChild;d;){var k=d;k.nodeType===x.TEXT_NODE&&a.removeNode(k);d=d.nextSibling}b.insertBefore(l.createTextNode(""),b.firstChild);return{controlsDescendantBindings:!0}},update:function(a,b){var c=b()(),f=c.id.replace(/[\s]/g,"_");a.className=c.J?"ko-grid-th ko-grid-column-header "+f+" "+c.J.Ka().join(" "):"ko-grid-th ko-grid-column-group-header "+f;f=c.f.map(function(a){return a.Ca()}).reduce(function(a,b){return a+b})+"px";a.style.width=f;a.style.maxWidth=f;a.rowSpan=c.rowSpan();a.colSpan=c.sa();
for(f=a.firstChild;f.nodeType!==x.TEXT_NODE;)f=f.nextSibling;f.nodeValue=c.label()}};return{n:function(a){a.replace("head").Bc(m)},g:function(d,k,l){function m(a,c,f){if(!a)return[];if(c[a.depth]&&c[a.depth].oe===a){var d=a;do{var k=c[d.depth];k.f.push(f);k.sa(k.sa()+1);d=d.vb}while(d);return[]}c.length=a.depth;var d=m(a.vb,c,f),l=k=a.depth;a=g(x,new b(a));a.Wb(f);d[k]=c[l]=a;return d}function g(a,b){var c=b.id;return a[c]=a[c]||b}var w=f(d.columnGroups||[]),x={},h={},r=[];this.__rows=this.Xb=a.computed(function(){var b=
l.f.s(),f=0;b.forEach(function(a){a=w[a.id];f=Math.max(f,a?a.depth+a.wd:0)});r.length=f+1;for(var d=0;d<r.length;++d)r[d]=r[d]||a.observableArray(),r[d].__rowId="header-row-"+d,r[d].valueWillMutate(),r[d]().length=0;var k=[];b.forEach(function(a){var b=w[a.id],d=b?b.depth+b.height:0;k.length=d;var l=g(h,new c(a));l.Wb(f-d+1);r[d]().push(l);a=m(b,k,a);for(b=0;b<a.length;++b)a[b]&&r[b]().push(a[b])});r.forEach(function(a){a.valueHasMutated()});return r});this.all=this.all=a.computed(function(){var a=
[];this.Xb().forEach(function(b){Array.prototype.push.apply(a,b())});return a}.bind(this));this.forColumn=this.mc=function(a){a="column-header-"+a.id;if(!Object.prototype.hasOwnProperty.call(h,a))throw Error("Es existiert kein Header f\u00fcr die gegebene Spalte.");return h[a]};var z=new e(function(b,c){return[b,a.contextFor(c).header()]});this.__handleClick=function(a,b){z.yc(".ko-grid-column-header, .ko-grid-column-group-header").hc(b);return!b.defaultPrevented};this.ud=z.ya.bind(z);this.Ab=function(a,
b){function f(a,d){d instanceof c&&b.apply(this,arguments)}var d=1<arguments.length;b=d?b:a;z.ya.apply(z,d?[a,f]:[f])};this.onHeaderClick=this.ud;this.onColumnHeaderClick=this.Ab;this.na=function(){this.Xb.dispose();this.all.dispose()}.bind(this)}}}(q,g,y,'<thead class="ko-grid-thead" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n    \x3c!--before:headers--\x3e\n    <tr class="ko-grid-tr ko-grid-headers"\n        data-bind="indexedRepeat: { forEach: headers.__rows, indexedBy: \'__rowId\', as: \'headerRow\' }"\n        data-repeat-bind="click: headers.__handleClick">\n\n        <th class="ko-grid-th"\n            data-bind="indexedRepeat: { forEach: headerRow(), indexedBy: \'id\', as: \'header\' }"\n            data-repeat-bind="__gridHeader: header"></th>\n    </tr>\n    \x3c!--after:headers--\x3e\n</thead>');
e=function(a,d,e,m,c){a=a.bindingHandlers.grid=a.bindingHandlers.grid||{};return a.core=a.core||{columns:d,data:e,headers:m,layout:c}}(q,v,u,n,function(a){function d(a,c,k,e){var l=a.element,g=l.querySelector(".ko-grid-table-scroller-padding"),w=l.querySelector(".ko-grid-table-scroller"),t=l.querySelector(".ko-grid-thead"),h=l.querySelector(".ko-grid-tfoot"),r=!1;return function(a){if(!r)try{c(r=!0);var b=w.scrollLeft;a&&a();k.forEach(function(a){a.call(l)});m(l,function(){g.style.borderTopWidth=
Math.max(t.clientHeight,0)+"px";g.style.borderBottomWidth=Math.max(h.clientHeight,0)+"px"});w.scrollLeft=b;e.forEach(function(a){a.call(l)})}finally{c(!1),r=!1}}}function e(a){a=a.element;var c=a.querySelector(".ko-grid-table-scroller"),d=a.querySelector(".ko-grid-thead"),m=a.querySelector(".ko-grid-tfoot");c.addEventListener("scroll",function(){var a=-c.scrollLeft+"px";d.style.left=a;m.style.left=a})}function m(a,f){if(a.offsetWidth&&a.offsetHeight)f();else{var d=a.parentNode,e=c.createComment("placeholder");
d.replaceChild(e,a);var l=a.style.position;a.style.position="absolute";a.style.visibility="hidden";c.body.appendChild(a);try{f()}finally{d.replaceChild(a,e),a.style.position=l,a.style.visibility="visible"}}}var c=window.document;return{n:function(){},g:function(b,f,k){function m(a){a&&a()}var l=a.observable(!1);this.recalculate=this.ja=function(a){m(a)};var g=a.computed(function(){l()||(k.f.s().forEach(function(a){a.width()}),m())}),w=[],t=[];this.ec=function(a){w.push(a)};this.tb=function(a){t.push(a)};
this.beforeRelayout=this.ec;this.afterRelayout=this.tb;this.Sa=function(){e.call(this,k);m=d(k,l,w,t);k.ha(m)}.bind(this);this.determineCellDimensions=this.wb=function(a){var b=c.createElement("div");b.className="ko-grid-td ko-grid-cell";b.appendChild("string"===typeof a?c.createTextNode(a):a);b.style.position="absolute";b.style.visibility="hidden";c.body.appendChild(b);try{return{width:b.offsetWidth,height:b.offsetHeight}}finally{c.body.removeChild(b)}};this.na=function(){g.dispose()}}}}(q));(function(a,
d){function e(a,c){if(d.c.w(b,a))throw Error("Extension id or alias already in use: `"+a+"`.");b[a]=c;c.Ub.push(a);return c}function m(a,b){this.yd=a;this.F=b.F||[];this.K=b.K||function(){};this.g=b.g;this.Ub=[]}var c=a.bindingHandlers.grid=a.bindingHandlers.grid||{},b=c.extensions=c.extensions||{};c.p=function(a,b){return e(a,new m(a,b))};c.yb=function(a){if(!d.c.w(b,a))throw Error("No known extension id or alias: `"+a+"`.");return b[a]};c.q=function(a,b){return e(a,c.yb(b))};c.Yc=function(a,b){var d=
c.yb(b);a.forEach(function(a){return e(a,d)});return d};m.prototype={get Me(){return this.Ub.slice()},cd:function(a,b){var c=this.Ic(a,function(a){throw Error("Conflicting configurations "+a.map(function(a){return"`"+a+"`"}).join(", ")+" (configuration: `"+b+"`).");});if(!c)throw Error("The extension `"+this.yd+"` must be configured (configuration: `"+b+"`)");return a[c]},ff:function(a){var b=this.Ic(a,function(a){throw Error("Conflicting binding values "+a.map(function(a){return"`"+a+"`"}).join(", ")+
".");});return a[b]},Ic:function(a,b){var c=this.Ub.filter(function(b){return d.c.w(a,b)});1<c.length&&b(c);return c[0]}};return b})(q,g);return function(a){return a}(function(a,d,g,m){function c(b,c){function d(){var a=w[b];c(a.Be,a.ef,a.De)}w[b]?d():a([b],function(a){function c(d){d=k.yb(d);var l=d.yd,w=d.cd(e,b);if(!g.o.contains(m,l)){if(g.o.contains(r,l))throw Error("Dependency-Cycle: .. -> "+r.join(" -> ")+" -> "+l+" -> ..");r.push(l);d.F.forEach(c);d.K(f,w,a);if(r.pop()!==l)throw Error("Assertion error.");
m.push(l)}}var f=new h('<div class="ko-grid">\n    \x3c!--before:grid--\x3e\n    <div class="ko-grid-table-container">\n        \x3c!--before:table--\x3e\n        <div class="ko-grid-table-scroller-padding">\n            <div class="ko-grid-table-scroller">\n                <table class="ko-grid-table" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\n                    \x3c!--columns--\x3e\n                    \x3c!--head--\x3e\n                    <tfoot class="ko-grid-tfoot" data-bind="_gridWidth: columns.combinedWidth() + \'px\'">\x3c!--tfoot--\x3e</tfoot>\n                    \x3c!--body--\x3e\n                </table>\n            </div>\n        </div>\n        \x3c!--after:table--\x3e\n    </div>\n    \x3c!--after:grid--\x3e\n</div>');
l.forEach(function(b){b.n(f,a)});var e=a.extensions,m=[],r=[];Object.keys(e).forEach(c);var z="ko-grid-template-"+b;x.a(z,f.ye());w[b]={Be:a,ef:z,De:m};d()})}function b(a,b){this.xe=b;this.primaryKey=this.primaryKey=b.primaryKey;this.rootElement=this.B=a;this.element=this.element=null;this.na=function(){};this.Z=function(){};this.ha=function(a){if(!this.Z)throw Error("Illegal state: postApplyBindings-callbacks have been called already.");var b=this.Z;this.Z=function(){b();a()}}.bind(this);var c=new m;
this.Bb=c.ya.bind(c);this["onKeyDown "]=this.Bb;a.addEventListener("keydown",function(a){c.yc(".ko-grid").hc(a);return!a.defaultPrevented})}var f=window.document,k=d.bindingHandlers.grid=d.bindingHandlers.grid||{},z=["columns","headers","data","layout"],l=z.map(function(a){return e[a]}),x=new d.nativeTemplateEngine;x.a=function(a,b){var c=f.createElement("script");c.id=a;c.type="text/html";c.text=b;f.querySelector("head").appendChild(c)};d.bindingHandlers.grid.init=function(a,f,l,m,w){function h(a){return"function"===
typeof a?a.apply(void 0,Array.prototype.slice.call(arguments,1)):a}var p=f(),n=p.config;c(n,function(c,f,l){var m=[],q=new b(a,p);d.utils.domNodeDisposal.addDisposeCallback(a,function(){q.na();m.forEach(function(a){a()})});g.c.ea(e,function(a,b){var d=new b.g(p,c,q);q[a]=d;q.f=q.columns;q.headers=q.headers;q.data=q.data;q.M=q.layout;"function"===typeof d.na&&m.push(d.na.bind(d))});var u=c.extensions,C=p.extensions||{},N=q.extensions=q.d={};for(l.forEach(function(a){a=k.yb(a);var b=a.ff(C)||{},d=h(a.cd(u,
n),b,p);if((!1!==d.enabled||!0===b.enabled)&&!1!==b.enabled){a.F.forEach(function(a){if(!N[a])throw Error("Dependency '"+a+"' was disabled.");});var f=new a.g(b,d,q,p,c);a.Me.forEach(function(a){N[a]=f});"function"===typeof f.dispose&&m.push(f.dispose.bind(f))}});a.firstChild;)d.removeNode(a.firstChild);l=w.createChildContext(q,"grid");d.renderTemplate(f,l,{templateEngine:x},a);var v=a.querySelector(".ko-grid");q.element=v;q.element=v;g.c.ea(u,function(a){v.className+=" with-"+g.La.Wc(a)});z.forEach(function(a){q[a].Sa&&
q[a].Sa()});q.Z();q.Z=null});return{controlsDescendantBindings:!0}};d.bindingHandlers.grid.update=function(){};var w={};d.bindingHandlers._gridWidth={init:function(){},update:function(a,b){var c=b();a.style.width=c;a.style.maxWidth=c}};return k}(X,q,g,y))}(I,F,G,E,B,H,J,D);da=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g){function h(a,c){return a.data.source.Y(function(b){return b.R(a.data.e)}).then(function(b){var d={count:0};c.forEach(function(a){d[a]={minimum:Number.POSITIVE_INFINITY,
maximum:Number.NEGATIVE_INFINITY,sum:0}});return b.reduce(function(b,e){++d.count;c.forEach(function(b){var c=d[b];b=a.data.Ba(e[b]);c.minimum=Math.min(c.minimum,b);c.maximum=Math.max(c.maximum,b);c.sum+=b});return b},d)})}d="ko-grid-aggregate".substr(0,-1).substr(0,-1);g.p(d,{K:function(a){a.gb("tfoot").wc("aggregates",'<tr class="ko-grid-tr ko-grid-aggregate-row" data-bind="indexedRepeat: {  forEach: extensions.aggregate.__aggregateRows,  indexedBy: \'id\',  as: \'aggregateRow\'}">  <td class="ko-grid-tf ko-grid-aggregate"    data-bind="indexedRepeat: {      forEach: columns.displayed,      indexedBy: \'id\',      as: \'column\'    }"    data-repeat-bind="      __gridAggregate: aggregateRow()[column().id],      _gridWidth: column().width()"></td></tr>')},
g:function(d,c,b){var f=a.observable([]);this.__aggregateRows=f;if(Array.isArray(d)){var e=[];d.forEach(function(a){Object.keys(a).forEach(function(a){a=b.f.ra(a).G;0>e.indexOf(a)&&e.push(a)})});var g=c.statisticsComputer||h,l=0,x=a.computed(function(){b.data.e();b.data.view.values();return g(b,e).then(function(a){var c=a.count;f(d.map(function(d){var f={id:""+ ++l};b.f.s().forEach(function(b){var l=b.id,e=b.G,k=d[l];if(k){if(c)if(e="average"===k?a[e].sum/c:a[e][k],1<=Math.abs(e))e=e.toLocaleString();
else var m=-Math.floor(Math.log(e)/Math.log(10)),e=e.toLocaleString(void 0,{maximumFractionDigits:m+1});else e="N/A";b={J:b,cc:k,value:e}}else b={J:b};f[l]=b});return f}));b.M.ja()})});this.dispose=function(){x.dispose()}}}});a.bindingHandlers.__gridAggregate={init:function(d){for(;d.firstChild;)a.removeNode(d.firstChild);d.appendChild(window.document.createTextNode(""));return{controlsDescendantBindings:!0}},update:function(a,c){var b=c();a.className=["ko-grid-tf ko-grid-aggregate"+(b.cc?" "+b.cc:
"")].concat(b.J.ed()).join(" ");a.firstChild.nodeValue=b.cc?b.value:""}};return g.q("aggregate",d)}({},h,p))}(I,G,F,E,B,K,H,J,D);Y=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g,h){var m=[38,37,39,40,9,13];h.p("ko-grid-cell-navigation",{K:function(a){a.dc("table").L('<textarea class="ko-grid-focus-parking" tabIndex="-1" style="position: absolute; z-index: 10; overflow: hidden; box-sizing: border-box; width: 1em; height: 1em; top: -3em; left: -3em; resize: none; border: none;"></textarea>')},
g:function(c,b,d){function e(a,b,c){c=!!c;var l=d.data.rows.s(),k=d.f.s();a=l.hb(q)+a;b=k.indexOf(p)+b;c&&0>b?(--a,b=k.length-1):c&&b>=k.length&&(a+=1,b=0);b=Math.max(0,Math.min(k.length-1,b));a=Math.max(0,Math.min(l.length-1,a));h(l.get(a),k[b])}function h(b,c){var e=d.data.sc(b,c);b===q&&c===p||l(b,c,e);if(!g.qc(d.B,window.document.activeElement)){var k=e.element.querySelector("input, select, textarea");k||(t.value=c.za(a.unwrap(b[c.G])),t.setSelectionRange(0,t.value.length),k=t);k.focus()}var k=
e.element,e=w.getBoundingClientRect(),m=k.getBoundingClientRect(),k=Math.min(0,m.left-e.left-7)||Math.max(0,m.right-e.right+7+(w.offsetWidth-w.clientWidth)),e=Math.min(0,m.top-e.top-7)||Math.max(0,m.bottom-e.bottom+7+(w.offsetHeight-w.clientHeight));w.scrollLeft+=k;w.scrollTop+=e}function l(a,b,c){n&&n.Dd();n=c.hd(function(c){return x.reduce(function(c,d){return d(a,b,c)||c},{n:function(a,b,d){var f=arguments;q=b;p=d;c.n.apply(this,f);a.classList.add("focused")},update:function(a){c.update.apply(this,
arguments);a.classList.add("focused")}})})}var x=[];this.onCellFocused=this.vc=function(a){return x.push(a)};var w=null,t=null,q=null,p=null,n=null;d.ha(function(){w=d.element.querySelector(".ko-grid-table-scroller");t=d.element.querySelector(".ko-grid-focus-parking")});d.data.cb(function(a,b,c,d){return h(c,d)});d.Bb(function(a){if(!(a.defaultPrevented||0>m.indexOf(a.keyCode))){a.preventDefault();var b=a.shiftKey?-1:1;switch(a.keyCode){case 38:return e(-1,0);case 37:return e(0,-1);case 39:return e(0,
1);case 40:return e(1,0);case 9:return e(0,b,!0);case 13:return e(b,0)}}})}});return h.q("cellNavigation","ko-grid-cell-navigation")}({},h,y,p))}(I,F,G,E,B,K,H,J,D);V=function(y,v,u,n,g,p){return function(d){return d}(function(d,g){g.p("ko-grid-column-sizing",{g:function(){this.isResizable=this.Za=function(d){return d.Ob}}});return g.q("columnSizing","ko-grid-column-sizing")}({},p))}(I,G,F,E,B,K,H,J,D);Z=function(y,v,u,n,g,p,d,q,h,e){return function(a){return a}(function(a,d,e,m){var c=window.document,
b=window.requestAnimationFrame.bind(window),f=window.cancelAnimationFrame.bind(window);m.p("ko-grid-column-resizing",{F:["ko-grid-column-sizing"],g:function(a,m,l){function g(a){a.forEach(function(a){!t[a.id]&&a.f.filter(h).length&&(t[a.id]=a.element.subscribe(function(a){if(a){var b=c.createElement("div");b.classList.add("ko-grid-column-resizer");a.appendChild(b)}}))})}var h=l.d["ko-grid-column-sizing"].Za,t={},p=l.headers.all.subscribe(g);g(l.headers.all());var q=!1;this.isResizeInProgress=this.nd=
function(){return q};l.B.addEventListener("mousedown",function(a){function k(){for(var a=p+y-v,a=Math.max(0,a-10*x.length),b=0;b<x.length;++b){var c=Math.round(n[b]*a);x[b].width(10+c+"px");a-=c}}function g(c){y=c.pageX;L&&f(L);L=b(k);a.preventDefault()}function m(){L&&f(L);c.removeEventListener("mousemove",g);c.removeEventListener("mouseup",m);c.body.removeChild(t);a.target.classList.remove("active");q=!1;l.M.ja()}if(e.element.matches(a.target,".ko-grid-column-resizer")){a.preventDefault();var t=
c.createElement("div");t.id="ko-grid-column-resize-in-progress";c.body.appendChild(t);a.target.classList.add("active");q=!0;for(var x=d.contextFor(a.target).header().f.filter(h),p=0,n=[],z=x.length-1;0<=z;--z){var u=x[z].Ca(),p=p+u;n.unshift(u/p)}var v=a.pageX,y=v,L=null;c.addEventListener("mousemove",g);c.addEventListener("mouseup",m)}},!0);l.B.addEventListener("click",function(a){e.element.matches(a.target,".ko-grid-column-resizer")&&a.preventDefault()},!0);this.dispose=function(){p.dispose();Object.keys(t).forEach(function(a){t[a].dispose()})}}});
return m.q("columnResizing","ko-grid-column-resizing")}({},e,y,h))}(I,G,F,E,B,V,H,J,K,D);Q=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g,h){h.p("ko-grid-view-modes",{g:function(d,c,b){d=function(a){return function(c,d){var e="string"===typeof c?[c]:g.o.ad(c),m=this.oa();e.forEach(function(b){if(g.o.contains(m,b)===a)throw Error("Mode `"+b+"` is already "+(a?"active":"inactive")+".");});b.M.ja(function(){this.oa.valueWillMutate();var c=b.element.classList;if(a)Array.prototype.push.apply(m,
e),c.add.apply(c,e);else{var k=m.filter(function(a){return!g.o.contains(e,a)});m.length=0;Array.prototype.push.apply(m,k);c.remove.apply(c,e)}m.sort();d&&d();this.oa.valueHasMutated()}.bind(this))}.bind(this)}.bind(this);this.oa=a.observableArray([]);this.kc=d(!0);this.od=d(!1);this.activeModes=this.oa;this.enver=this.kc;this.leave=this.od}});return h.q("viewModes","ko-grid-view-modes")}({},h,g,p))}(I,G,F,E,B,K,H,J,D);T=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g){function h(c,
b,d){function e(a){return b()+"."+a}var g={};this.read=function(a){return c.read(e(a))};this.a=function(a,b){return c.a(e(a),b)};this.bind=function(b,c){if(a.c.w(g,b))throw Error("The key `"+b+"` is already bound.");var e=c.subscribe(function(a){d()||this.a(b,a)}.bind(this)),k=g[b]={Lc:function(){var a=this.read(b);void 0===a?this.a(b,c()):c(a)}.bind(this),key:b,observable:c,dispose:function(){e.dispose();delete g[b]}};k.Lc();return k}.bind(this);this.Mc=function(){a.c.ea(g,function(a,b){b.Lc()})};
this.he=function(){a.c.ea(g,function(a,b){b.dispose();delete g[a]})}}function m(){this.read=function(a){a=window.localStorage.getItem(a);return null===a?void 0:JSON.parse(a)};this.a=function(a,b){void 0!==b&&window.localStorage.setItem(a,JSON.stringify(b))}}g.p("ko-grid-view-state-storage",{F:["ko-grid-view-modes"],g:function(c,b,d){var e=this,g="koGrid."+a.La.Xc(d.B.id);c=b.keyValueStore||new m;var l=!1;e.zb=new h(c,function(){return g},function(){return!1});e.ab=new h(c,function(){return g+"["+
d.d["ko-grid-view-modes"].oa().join(";")+"]"},function(){return l});var x=d.d["ko-grid-view-modes"].oa.subscribe(function(){l=!0},null,"beforeChange"),w=d.d["ko-grid-view-modes"].oa.subscribe(function(){l=!1;e.ab.Mc()});d.ha(function(){return[e.zb,e.ab].forEach(function(a){return a.Mc()})});e.dispose=function(){x.dispose();w.dispose();[e.zb,e.ab].forEach(function(a){return a.he()})}}});return g.q("viewStateStorage","ko-grid-view-state-storage")}({},g,h))}(I,G,F,E,B,Q,H,J,K,D);ea=function(y,v,u,n,
g,p,d,q,h,e,a,r,M){return function(a){return a}(function(a,c,b,d){d.p("ko-grid-column-scaling",{F:["ko-grid-view-state-storage","ko-grid-column-sizing"],g:function(a,d,f){function e(a){var c=0,d=0,k=0,g={};f.f.s().forEach(function(a){var b=p(a),f;b&&m(a)?(f=h()[a.id].width,d+=f):(f=a.Ca(),k+=b?0:f);c+=f;g[a.id]={width:f,ub:0}});if(c>=a)return g;var w=a-c,x=d||c-k;return b.c.rd(g,function(a,b){var c=f.f.ra(b);if(!p(c)||d&&!m(c))return a;c=Math.round(a.width/x*w);w-=c;x-=a.width;return{width:a.width,
ub:c}})}function g(a){a=e(a);b.c.ea(a,function(a,b){f.f.ra(a).width(b.width+b.ub+"px")});h(a)}function m(a){var b=h()[a.id];return b&&b.width+b.ub===a.Ca()}var h=c.observable({});f.d["ko-grid-view-state-storage"].ab.bind("borrowedPixels",h);var p=f.d["ko-grid-column-sizing"].Za;f.M.ec(function(){if(!f.d["ko-grid-column-resizing"]||!f.d["ko-grid-column-resizing"].nd()){var a=this.querySelector(".ko-grid-table-scroller").clientWidth,b=f.f.Vc(),c=0;f.f.s().forEach(function(a){c+=m(a)?h()[a.id].ub:0});
(a>b||a<b&&c)&&g(a)}})}});return d.q("columnScaling","ko-grid-column-scaling")}({},r,g,M))}(G,I,F,E,B,Z,T,H,J,V,Q,D,K);fa=function(y,v,u,n,g,p,d,q,h,e,a,r){return function(a){return a}(function(a,d,c){c.p("ko-grid-column-width-persistence",{F:["ko-grid-view-state-storage","ko-grid-column-sizing"],g:function(a,c,e){function g(a){return a.filter(function(a){return!d.c.w(w,a.key)}).forEach(function(a){w[a.key]=!0;h(a)&&l.bind("column["+a.id+"].width",a.width)})}var l=e.d["ko-grid-view-state-storage"].ab,
h=e.d["ko-grid-column-sizing"].Za,w={},t=e.f.all.subscribe(g);g(e.f.all());this.dispose=function(){t.dispose()}}});return c.q("columnWidthPersistence","ko-grid-column-width-persistence")}({},g,r))}(I,G,F,E,B,V,T,H,J,Q,D,K);ga=function(y,v,u,n,g,p,d,q,h,e){return function(a){return a}(function(a,d,e){function g(a){this.a=a}var c=[[37,40],[9,9],[13,13],[27,27],[16,16],[112,112],[114,123],[113,113]],b=c.length-1,f={dispose:function(){}};e.p("ko-grid-editing",{F:["ko-grid-cell-navigation"],g:function(a,
d,e){function h(){u=!0;n.style.top="0";n.style.left="0";n.style.right="0";n.style.bottom="0";n.style.width=""}var w=a.createEditor||d.createEditor||function(){return null},t=a.saveChange||d.saveChange||function(){return window.console.warn("No `saveChange` strategy provided.")},p=null,q=null,n=null,r=null,u=!1,v=f;e.data.uc(function(){r&&(h(),r.bc())});e.d["ko-grid-cell-navigation"].vc(function(a,d,k){v.dispose();v=f;if(a=w(a,d))return n=window.document.createElement("div"),n.style.position="absolute",
n.style.top="0",n.style.left="-8px",n.style.right="",n.style.bottom="0",n.style.width="7px",n.style.overflow="hidden",r=new g(a),a=r.element,n.appendChild(a),a.classList.add("ko-grid-editor"),a.style.boxSizing="border-box",a.style.width="100%",a.style.height="100%",u=!1,v=e.Bb(".ko-grid-editor",function(a){var d=a.keyCode,f;a:{f=u?4:0;for(var e=u?c.length:b;f<e;++f){var k=c[f];if(k[0]<=d&&k[1]>=d){f=!0;break a}}f=!1}if(!f){if(27===a.keyCode)a.preventDefault(),r.Rd(),u=!1,n.style.top="0",n.style.left=
"-8px",n.style.right="",n.style.bottom="0",n.style.width="7px",r.bc();else{if(!a.ctrlKey&&13===d||9===d){r.hf&&t(p,q,r.value);return}u||a.ctrlKey||a.altKey||h()}a.Fb()}}),{n:function(a,b,c){var d=arguments;p=b;q=c;k.n.apply(this,d);a.appendChild(n);u?r.focus():r.bc()},update:k.update}})}});g.prototype={get element(){return this.a.element},get value(){return this.a.value},set value(a){this.a.value=a},get hf(){return this.a.valueChanged},bc:function(){this.a.activate()},focus:function(){this.a.focus()},
Rd:function(){this.a.reset()}};return e.q(["editing"],"ko-grid-editing")}({},e,h))}(I,F,G,E,B,Y,H,J,K,D);ha=function(y,v,u,n,g,p){return function(d){return d}(function(d,g){function h(d){var g=d.f.s().filter(function(a){return!!a.G}),c=d.data.Ba;d.data.source.Y(function(a){return a.R(d.data.e).ka(d.data.l)}).then(function(a){return a.map(function(a){return"<tr>"+g.map(function(b){return"<td>"+c(a[b.G])+"</td>"}).join("")+"</tr>"}).reduce(function(a,b){return a+b},"")}).then(function(b){b=['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">  <head></head>  <body>    <table>      <thead>',
"        <tr>"+g.map(function(a){return"<th>"+a.label()+"</th>"}).join("")+"</tr>","      </thead>      <tbody>",b,"      </tbody>    </table>  </body></html>"].join("");(window.navigator.a?window.navigator.a.bind(window.navigator):function(a,b){var c=n.createObjectURL(a),d=e.createElement("a");d.href=c;d.download=b;var g=e.createEvent("MouseEvents");g.initEvent("click",!0,!0);d.dispatchEvent(g);window.setTimeout(function(){return n.revokeObjectURL(c)})})(new a([b],{type:"application/vnd.ms-excel;charset=utf-8"}),
"excel-export.xls")})}var e=window.document,a=window.Blob,n=window.URL;g.p("ko-grid-export",{F:["ko-grid-toolbar"],K:function(a){a.pc("left-toolbar").L(' <button class="ko-grid-toolbar-button ko-grid-excel-export">Excel Export</button> ')},g:function(a,d,c){c.B.addEventListener("click",function(a){a.target.classList.contains("ko-grid-excel-export")&&h(c)})}});return g.q("export","ko-grid-export")}({},p))}(I,G,F,E,B,K,H,J,D);ia=function(y,v,u,n,g,p,d,q,h,e,a){return function(a){return a}(function(a,
d,e,c,b){function f(a,b){function c(a){return"*"+a}var d=b.toLowerCase()!==b;return 0<=b.indexOf("*")?k(a,b,d):k(a,"*"+b.replace(/([A-Z])/g,c)+"*",d)}function k(a,b,c){b="^"+b.split("*").map(g).join(".*")+"$";var d=new RegExp(b,c?"":"i"),f=a.za;return e.v.Ee(function(a){return d.test(f(a))},function(){return e.v.Cd(d).stringifyable})}function g(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var l=e.v.Qc;c.p("ko-grid-filtering",{F:[],K:function(a){return a.sb("headers").L("filters",b)},g:function(a,
b,c){function k(a){var b=a.id;if(!g[b]){var e=d.observable("");c.d["ko-grid-view-state-storage"]&&c.d["ko-grid-view-state-storage"].zb.bind("filters["+b+"]",e);g[b]={text:e,e:d.pureComputed(function(){var b=e();return b.length?f(a,b):l})}}return g[b]}var g={};this.__forColumn=k;a=d.pureComputed(function(){var a=c.f.s().filter(function(a){return k(a).e()!==l}).map(function(a){return k(a).e().va(e.Ja.xc(a.G))});return e.v.Ga(a)});var h=b.Lb&&b.Lb.sf||300,n=b.Lb&&!1===b.Lb.enabled?a:a.extend({Lb:h}),
p=d.observable(!0);this.__applied=d.pureComputed(function(){p(p()||c.data.rows.Wa()&&!c.data.view.Va());return p()});c.data.v.push(d.pureComputed(function(){p(!1);return n()}));this.dispose=function(){n.dispose()}}});return c.q("filtering","ko-grid-filtering")}({},e,u,a,'<tr class="ko-grid-tr ko-grid-filter-row" data-bind="css: { applied: extensions.filtering.__applied }">\n    <td class="ko-grid-th ko-grid-filter-cell" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\' }" data-repeat-bind="if: column().userDefined">\n        <input class="ko-grid-filter" type="text" data-bind="value: extensions.filtering.__forColumn(column()).text, valueUpdate: [\'input\']"/>\n    </td>\n</tr>'))}(I,
F,G,E,B,T,H,J,Q,D,K);ja=function(y,v,u,n,g,p,d,q,h,e){return function(a){return a}(function(a,d,e){var g=window.document.documentElement;e.p("ko-grid-full-screen",{F:["ko-grid-toolbar","ko-grid-view-modes"],K:function(a){a.pc("left-toolbar").L(' <label class="ko-grid-toolbar-button ko-grid-full-screen-label" data-bind="css: { pressed: extensions.fullScreen.__state }">  <input type="checkbox" tabIndex="-1" class="ko-grid-full-screen-toggle" data-bind="checked: extensions.fullScreen.__state" />  Full Screen</label> ')},
g:function(a,b,f){var e=d.observable(!1);this.__state=e;this.kc=function(){return e(!0)};var h=f.B.classList.contains("fixed-height"),l=e.subscribe(function(a){a?(g.classList.add("contains-full-screen-element"),f.d["ko-grid-view-modes"].kc("full-screen",function(){f.B.classList.add("fixed-height")})):(g.classList.remove("contains-full-screen-element"),f.d["ko-grid-view-modes"].od("full-screen",function(){h||f.B.classList.remove("fixed-height")}))});this.dispose=function(){return l.dispose()}}});return e.Yc(["fullscreen",
"fullScreen"],"ko-grid-full-screen")}({},e,h))}(I,G,F,E,B,Q,H,J,K,D);aa=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g,h){function m(b,d,e){function g(){var a=n.querySelectorAll("tbody tr").length,b=n.clientHeight,a=Math.floor(b/(a||1))||p;q(m.clientHeight-(b-(b-b%a)));r(a)}function l(a){"fit"===a?e.element.classList.add("with-fitted-page-size"):e.element.classList.remove("with-fitted-page-size")}var h=c(b,d,["pageSize","desired"],["pageSize"]);b=c(b,d,["pageSize","maximum"])||
50;var m,n;e.ha(function(){m=e.element.querySelector(".ko-grid-table-scroller");n=e.element.querySelector(".ko-grid-table")});this.sd=this.maximumStepSize=a.observable(2);this.Gb=this.rowCount=a.pureComputed(function(){return e.data.view.da()});d={};d.ta=d.desired=a.observable(h);d.Oe=d.maximum=a.observable(b);d.pa=d.actual=a.pureComputed(function(){var a=this.A.ta();"fit"===a&&(a=Math.floor(q()/r()),a=Math.max(1,a));return Math.min(this.A.Oe(),a)}.bind(this));this.A=this.pageSize=d;this.T=this.pageIndex=
a.observable(0);this.Se=this.pageCount=a.pureComputed(function(){var a=Math.max(0,Math.floor((this.Gb()-1)/this.A.pa()));this.T(Math.min(this.T(),a));return a+1}.bind(this));var p=e.M.wb("|").height,q=a.observable(5*p),r=a.observable(p);e.M.tb(g);e.ha(function(){return e.data.rows.Wa.subscribe(function(a){a&&g()})});var u=this.T.subscribe(function(a){return e.data.offset(a*this.A.pa())}.bind(this)),v=this.A.pa.subscribe(function(a){e.data.offset(this.T()*a);e.data.i(a)}.bind(this));e.data.offset(this.T()*
this.A.pa());e.data.i(this.A.pa());var y=this.A.ta.subscribe(l);e.ha(function(){return l(this.A.ta())}.bind(this));this.dispose=function(){this.Gb.dispose();u.dispose();v.dispose();y.dispose()}.bind(this)}function c(a,c,d){for(var e=2;e<arguments.length;++e)for(var g=0;2>g;++g){var h=arguments[e].reduce(function(a,b){return a&&a[b]},arguments[g]);if(void 0!==h&&"object"!==typeof h)return h}}g.p("ko-grid-paging",{F:["ko-grid-toolbar"],K:function(a){return a.gb("right-toolbar").append("paging",h)},
g:m});m.prototype={get __adjacentPageIndizes(){return a.pureComputed(function(){for(var a=Math.max(0,this.T()-this.sd()),c=Math.min(this.Se()-1,this.T()+this.sd())-a+1,d=Array(c),e=0;e<c;++e)d[e]=a+e;return d}.bind(this))},get __message(){return a.pureComputed(function(){var a=this.T()*this.A.pa()+1,c=Math.min(this.Gb(),(this.T()+1)*this.A.pa());return a+"\u2013"+c+" of "+this.Gb()}.bind(this))},__handleClick:function(a,c){"BUTTON"===c.target.tagName&&this.T(parseInt(c.target.textContent,10)-1)}};
return g.q("paging","ko-grid-paging")}({},h,p,'\x3c!-- ko with: extensions.paging --\x3e\n<div class="ko-grid-paging" data-bind="if: pageCount() > 1, click: __handleClick">\n    <span data-bind="text: __message"></span>\n    <button class="ko-grid-toolbar-button ko-grid-paging-button" data-bind="visible: pageIndex() - maximumStepSize() > 0">1</button>\n    <span data-bind="visible: pageIndex() - maximumStepSize() > 1">&hellip;</span>\n    <button data-bind="indexedRepeat: {\n                forEach: __adjacentPageIndizes,\n                indexedBy: function(i) { return \'\' + i; },\n                as: \'i\'\n            }"\n            data-repeat-bind="text: i() + 1, css: {\n                \'pressed\': pageIndex() == i(),\n                \'ko-grid-toolbar-button\': true,\n                \'current-page\': pageIndex() == i(),\n                \'ko-grid-paging-button\': true\n            }">\n    </button>\n    <span data-bind="visible: pageIndex() + maximumStepSize() + 2 < pageCount()">&hellip;</span>\n    <button class="ko-grid-toolbar-button ko-grid-paging-button" tabIndex="-1" data-bind="visible: pageIndex() + maximumStepSize() + 1 < pageCount(), text: pageCount">?</button>\n</div>\n\x3c!-- /ko --\x3e\n'))}(I,
F,G,E,B,K,H,J,D);ka=function(y,v,u,n,g,p,d,q,h,e,a,r){return function(a){return a}(function(a,d,c,b){var e=window.document,g=window.requestAnimationFrame.bind(window),h=window.cancelAnimationFrame.bind(window);c.p("ko-grid-height-adjuster",{F:["ko-grid-view-state-storage"],K:function(a){return a.sb("grid").L("height-adjuster",b)},g:function(a,b,c){this.nb=c.B.classList.contains("fixed-height")?c.B.style.height:"auto";this.lb=void 0;this.la=d.observable(this.nb);var e=this.la.subscribe(function(a){var b=
c.d["ko-grid-paging"];"auto"===a?(c.B.classList.remove("fixed-height"),b&&"fit"===b.A.ta()&&(this.lb=b.A.ta(),b.A.ta(Number.POSITIVE_INFINITY))):this.lb&&(c.B.classList.add("fixed-height"),b.A.ta(this.lb),this.lb=void 0);c.B.style.height=a;c.M.ja()}.bind(this));c.d["ko-grid-view-state-storage"].zb.bind("height",this.la);this.dispose=function(){e.dispose()}}});d.bindingHandlers.__gridHeightAdjuster={init:function(a,b,c,d,m){var n=m.grid,p=b();b();a.addEventListener("click",function(a){return a.preventDefault()});
a.addEventListener("mousedown",function(a){function b(){p.la(Math.max(m,l+q-t)+"px")}function c(d){q=d.pageY;r&&h(r);r=g(b);a.preventDefault()}function d(){r&&h(r);e.removeEventListener("mousemove",c);e.removeEventListener("mouseup",d)}if("BUTTON"!==a.target.tagName){a.preventDefault();var l=n.element.offsetHeight,m=n.element.offsetHeight-n.element.querySelector(".ko-grid-table-scroller").offsetHeight+50,t=a.pageY,q=t,r=0;e.addEventListener("mousemove",c);e.addEventListener("mouseup",d)}})},update:function(){}};
d.bindingHandlers.__gridHeightResetter={init:function(a,b){var c=b();"auto"!==c.nb&&a.addEventListener("click",function(a){a.preventDefault();c.la(c.nb)})},update:function(a,b){var c=b(),d=c.nb;a.disabled="auto"===d||c.la()===d}};d.bindingHandlers.__gridHeightClearer={init:function(a,b){var c=b();a.addEventListener("click",function(a){a.preventDefault();c.la("auto")})},update:function(a,b){var c=b().la();a.disabled="auto"===c}};return c.q("heightAdjuster","ko-grid-height-adjuster")}({},a,r,'<div class="ko-grid-height-adjuster" data-bind="__gridHeightAdjuster: grid.extensions.heightAdjuster">\n    <div class="ko-grid-height-adjuster-buttons">\n        <button class="ko-grid-height-adjuster-button ko-grid-height-resetter" tabIndex="-1" data-bind="__gridHeightResetter: grid.extensions.heightAdjuster">Clear height</button>\n        <button class="ko-grid-height-adjuster-button ko-grid-height-clearer" tabIndex="-1" data-bind="__gridHeightClearer: grid.extensions.heightAdjuster">Reset height</button>\n    </div>\n</div>'))}(I,
F,G,E,B,aa,T,H,J,Q,D,K);la=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g){g.p("ko-grid-links",{g:function(d,e,c){Object.keys(d).forEach(function(b){var e=c.f.ra(b),g=d[b].uri,h=d[b].label,l="function"===typeof g?g:function(b){return c.data.ua(a.unwrap(b[g]))},m="function"===typeof h?h:function(b){return c.data.ua(a.unwrap(b[h||e.G]))};e.Eb(function(){return{n:function(a){var b=window.document.createElement("a");b.appendChild(window.document.createTextNode(""));a.appendChild(b)},
update:function(a,b,c){a.firstChild.firstChild.nodeValue=m(c);a.firstChild.href=l(c)}}})})}});return g.q("links","ko-grid-links")}({},h,p))}(I,G,F,E,B,K,H,J,D);ma=function(y,v,u,n,g,p){return function(d){return d}(function(d,g,h){var e=window.requestAnimationFrame.bind(window);window.cancelAnimationFrame.bind(window);h.p("ko-grid-resize-detection",{g:function(a,d,h){function m(){c||(c=e(function(){c=null;h.M.ja()}))}var c,b=(a=window.$)?a(g.element.fc(h.B,".ui-resizable")):{on:function(){},off:function(){}};
window.addEventListener("resize",m);b.on("resize resizestop",m);this.dispose=function(){window.removeEventListener("resize",m);b.off("resize resizestop",m)}}});return h.q("resizeDetection","ko-grid-resize-detection")}({},y,p))}(I,G,F,E,B,K,H,J,D);na=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g){function h(a){var c=window.document.createElement("input");c.className="ko-grid-selection-element";c.type=a?"checkbox":"radio";c.tabIndex=-1;return c}g.p("ko-grid-selection",{g:function(d,
c,b){function e(){q?(r={},l([])):b.data.source.Y(function(a){return a.R(b.data.e)}).then(function(a){return a.reduce(function(a,c){var d=b.data.Ba(c[u]);a.jd.push(d);a.e[d]=!0;return a},{jd:[],e:{}})}).then(function(a){r=a.e;l(a.jd)})}function g(c,d,e){c=b.data.ua(a.unwrap(e[u]));n||(r={},l().length=0);r[c]?(delete r[c],l.remove(c)):(r[c]=!0,l.push(c))}var n=!(!d.allowMultiSelection&&!c.allowMultiSelection);c=!(!d.evaluateRowClicks&&!c.evaluateRowClicks);var l=d.selectedEntriesIds||a.observableArray([]),
p=d.selectedEntryId||a.observable(null),q=!1;d=b.f.add({key:"selection",label:"",width:b.M.wb(h(n)).width+"px"});var t=b.headers.mc(d),r={},u=b.primaryKey;d.Eb(function(){return{n:function(a){a.appendChild(h(n))},update:function(a,c,d){l();a.firstChild.checked=!!r[b.data.Ba(d[u])]}}});var v=t.element.subscribe(function(a){if(n&&a){var b=h(!0);a.appendChild(b);a.addEventListener("click",function(b){b.target===a&&(b.preventDefault(),e())})}});b.headers.Ab(".ko-grid-selection-element",function(a){a.Fb();
e()});c?b.data.cb(g):b.data.cb(".ko-grid-selection-element",g);b.data.rows.oc(function(c){l();return r[b.data.ua(a.unwrap(c[u]))]?["selected"]:[]});var y=a.computed(function(){var a=l().length,c=b.data.view.da();p(a?l()[a-1]:null);q=!!a&&a===c;var d=t.element();if(d=d&&d.querySelector(".ko-grid-selection-element"))d.checked=q,d.tf=a>c});this.dispose=function(){v.dispose();y.dispose()}}});return g.q("selection","ko-grid-selection")}({},h,p))}(I,F,G,E,B,K,H,J,D);oa=function(y,v,u,n,g,p){return function(d){return d}(function(d,
g,h){g.p("ko-grid-sorting",{g:function(d,a,g){function n(a){a===c?(b="ascending"===b?"descending":"ascending",f=f.reverse()):(c&&c.Ka.removeAll(["ascending-order","descending-order"]),c=a,b="ascending",f=m(a));a.Ka(c.Ka().filter(function(a){return"ascending-order"!==a&&"descending-order"!==a}).concat(["ascending"===b?"ascending-order":"descending-order"]));g.data.l(f)}function m(a){function b(a){return(a=g.data.Ba(a[c]))&&"function"===typeof a.valueOf?a.valueOf():a}var c=a.G;h.qd(b,function(){return h.Ja.xc(a.G).stringifyable});
return h.ca.Pe.va(b)}var c,b,f;(d=d.initiallyBy)&&n(g.f.ra(d));g.headers.Ab(function(a,b){a.defaultPrevented||(a.preventDefault(),n(b.J))});var k=g.data.l.subscribe(function(a){c&&(a!==f&&(c.Ka.removeAll(["ascending-order","descending-order"]),c=b=f=null),g.M.ja())});this.dispose=function(){k.dispose()}}});return g.q("sorting","ko-grid-sorting")}({},p,v))}(I,G,F,E,B,K,H,J,D);pa=function(y,v,u,n,g,p){return function(d){return d}(function(d,g){g.p("ko-grid-toolbar",{K:function(d){d.gb("grid").append("toolbar",
'<div class="ko-grid-toolbar">  <div class="ko-grid-left-toolbar">\x3c!--left-toolbar--\x3e</div>  <div class="ko-grid-right-toolbar">\x3c!--right-toolbar--\x3e</div></div>')},g:function(){}});return g.q("toolbar","ko-grid-toolbar")}({},p))}(I,F,G,E,B,K,H,J,D);B=function(y,v,u,n,g,p,d,q,h){return function(d){return d}(function(d,a,g){g.p("ko-grid-virtualization",{K:function(a){a.dc("body").L('<tbody class="ko-grid-virtualization-before-spacer"><tr data-bind="style: { height: extensions.virtualization.__beforeHeight() + \'px\' }"><td></td></tr></tbody>');
a.sb("body").L('<tbody class="ko-grid-virtualization-after-spacer"><tr data-bind="style: { height: extensions.virtualization.__afterHeight() + \'px\' }"><td></td></tr></tbody>')},g:function(d,e,c){function b(){c.data.i(Math.ceil((n.clientHeight-1)/q)+2)}function f(){var a=n.scrollTop,b=n.getBoundingClientRect().top-p.getBoundingClientRect().bottom,b=Math.floor(b/q),b=Math.max(0,Math.min(c.data.view.da()-c.data.view.size()+2,c.data.offset()+b)),d=b&1;c.data.offset(b-d);h(a-d*q-a%q);g()}function g(){l(Math.max(0,
c.data.view.da()-c.data.offset()-c.data.i())*q)}var h=a.observable(0),l=a.observable(0);this.__beforeHeight=h;this.__afterHeight=l;var n,p;c.ha(function(){n=c.element.querySelector(".ko-grid-table-scroller");p=c.element.querySelector(".ko-grid-virtualization-before-spacer");c.element.querySelector(".ko-grid-virtualization-after-spacer");c.M.tb(b);c.data.view.da.subscribe(g);n.addEventListener("scroll",f)});var q=25}});return g.q("virtualization","ko-grid-virtualization")}({},h,p))}(I,F,G,E,B,K,H,
J,D);return function(y){return y}({dataSource:H,entry:ca,grid:K,extensions:{aggregate:da,cellNavigation:Y,columnResizing:Z,columnScaling:ea,columnSizing:V,columnWidthPersistence:fa,editing:ga,"export":ha,filtering:ia,fullScreen:ja,heightAdjuster:ka,links:la,paging:aa,resizeDetection:ma,selection:na,sorting:oa,toolbar:pa,viewModes:Q,viewStateStorage:T,virtualization:B}})});